/*! For license information please see main.568ffddf.js.LICENSE.txt */
(()=>{"use strict";var e={730:(e,t,n)=>{var i=n(43),r=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,i,r,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,j=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case x:return"Portal";case k:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=W(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(cs){return e.body}}function Y(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=q(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),i=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ge(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Se=null,Ee=null;function ke(e){if(e=br(e)){if("function"!==typeof xe)throw Error(s(280));var t=e.stateNode;t&&(t=wr(t),xe(e.stateNode,e.type,t))}}function Te(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Ce(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ie(e,t){return e(t)}function Ae(){}var Ne=!1;function Oe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ie(e,t,n)}finally{Ne=!1,(null!==Se||null!==Ee)&&(Ae(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var i=wr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Pe=!1}function Me(e,t,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,je=null,Fe=!1,ze=null,Ue={onError:function(e){Le=!0,je=e}};function Ve(e,t,n,i,r,s,o,a,l){Le=!1,je=null,Me.apply(Ue,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(s(188))}function We(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return qe(r),e;if(o===i)return qe(r),t;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=r.unstable_scheduleCallback,Qe=r.unstable_cancelCallback,Ye=r.unstable_shouldYield,Xe=r.unstable_requestPaint,$e=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~r;0!==a?i=ht(a):0!==(s&=o)&&(i=ht(s))}else 0!==(o=n&~r)?i=ht(o):0!==s&&(i=ht(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-ot(t)),i|=e[n],t&=~r;return i}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var bt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,St,Et,kt,Tt=!1,Ct=[],It=null,At=null,Nt=null,Ot=new Map,Rt=new Map,Pt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=br(t))&&xt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function jt(e){var t=vr(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void kt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=br(n))&&xt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);_e=i,n.target.dispatchEvent(i),_e=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Tt=!1,null!==It&&Ft(It)&&(It=null),null!==At&&Ft(At)&&(At=null),null!==Nt&&Ft(Nt)&&(Nt=null),Ot.forEach(zt),Rt.forEach(zt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return Vt(t,e)}if(0<Ct.length){Vt(Ct[0],e);for(var n=1;n<Ct.length;n++){var i=Ct[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==It&&Vt(It,e),null!==At&&Vt(At,e),null!==Nt&&Vt(Nt,e),Ot.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(i=Pt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)jt(n),null===n.blockedOn&&Pt.shift()}var Ht=_.ReactCurrentBatchConfig,qt=!0;function Wt(e,t,n,i){var r=bt,s=Ht.transition;Ht.transition=null;try{bt=1,Gt(e,t,n,i)}finally{bt=r,Ht.transition=s}}function Kt(e,t,n,i){var r=bt,s=Ht.transition;Ht.transition=null;try{bt=4,Gt(e,t,n,i)}finally{bt=r,Ht.transition=s}}function Gt(e,t,n,i){if(qt){var r=Yt(e,t,n,i);if(null===r)qi(e,t,i,Qt,n),Mt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return It=Lt(It,e,t,n,i,r),!0;case"dragenter":return At=Lt(At,e,t,n,i,r),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Ot.set(s,Lt(Ot.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Rt.set(s,Lt(Rt.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Mt(e,i),4&t&&-1<Dt.indexOf(e)){for(;null!==r;){var s=br(r);if(null!==s&&wt(s),null===(s=Yt(e,t,n,i))&&qi(e,t,i,Qt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else qi(e,t,i,null,n)}}var Qt=null;function Yt(e,t,n,i){if(Qt=null,null!==(e=vr(e=we(i))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,i=n.length,r="value"in $t?$t.value:$t.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[s-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=j({},cn,{view:0,detail:0}),dn=sn(hn),fn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),gn=sn(j({},fn,{dataTransfer:0})),mn=sn(j({},hn,{relatedTarget:0})),yn=sn(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),_n=sn(j({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function kn(){return En}var Tn=j({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Tn),In=sn(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Nn=sn(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(On),Pn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,jn=u&&(!Dn||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,n,i){Te(i),0<(t=Ki(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Fi(e,0)}function Yn(e){if(G(_r(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){Kn&&(Kn.detachEvent("onpropertychange",ni),Gn=Kn=null)}function ni(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Wn(t,Gn,e,we(e)),Oe(Qn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Gn=n,(Kn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function si(e,t){if("click"===e)return Yn(t)}function oi(e,t){if("input"===e||"change"===e)return Yn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pi(e){var t=di(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var o=ui(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,yi=null,vi=null,bi=!1;function _i(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==mi||mi!==Q(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&li(vi,i)||(vi=i,0<(i=Ki(yi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function wi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xi={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},Si={},Ei={};function ki(e){if(Si[e])return Si[e];if(!xi[e])return e;var t,n=xi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ei)return Si[e]=n[t];return e}u&&(Ei=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);var Ti=ki("animationend"),Ci=ki("animationiteration"),Ii=ki("animationstart"),Ai=ki("transitionend"),Ni=new Map,Oi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(e,t){Ni.set(e,t),l(t,[e])}for(var Pi=0;Pi<Oi.length;Pi++){var Di=Oi[Pi];Ri(Di.toLowerCase(),"on"+(Di[0].toUpperCase()+Di.slice(1)))}Ri(Ti,"onAnimationEnd"),Ri(Ci,"onAnimationIteration"),Ri(Ii,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(Ai,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Li=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mi));function ji(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,a,l,c){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=je;Le=!1,je=null,Fe||(Fe=!0,ze=u)}}(i,t,void 0,e),e.currentTarget=null}function Fi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;ji(r,a,c),s=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;ji(r,a,c),s=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zi(e,t){var n=t[gr];void 0===n&&(n=t[gr]=new Set);var i=e+"__bubble";n.has(i)||(Hi(t,e,2,!1),n.add(i))}function Ui(e,t,n){var i=0;t&&(i|=4),Hi(n,e,i,t)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function Bi(e){if(!e[Vi]){e[Vi]=!0,o.forEach((function(t){"selectionchange"!==t&&(Li.has(t)||Ui(t,!1,e),Ui(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vi]||(t[Vi]=!0,Ui("selectionchange",!1,t))}}function Hi(e,t,n,i){switch(Xt(t)){case 1:var r=Wt;break;case 4:r=Kt;break;default:r=Gt}n=r.bind(null,t,n,e),r=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function qi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=vr(a)))return;if(5===(l=o.tag)||6===l){i=s=o;continue e}a=a.parentNode}}i=i.return}Oe((function(){var i=s,r=we(n),o=[];e:{var a=Ni.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ti:case Ci:case Ii:l=yn;break;case Ai:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Re(p,d))&&u.push(Wi(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,r),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!vr(c)&&!c[pr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?vr(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:_r(l),f=null==c?a:_r(c),(a=new u(g,p+"leave",l,n,r)).target=h,a.relatedTarget=f,g=null,vr(r)===i&&((u=new u(d,p+"enter",c,n,r)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gi(f))p++;for(f=0,g=d;g;g=Gi(g))f++;for(;0<p-f;)u=Gi(u),p--;for(;0<f-p;)d=Gi(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gi(u),d=Gi(d)}u=null}else u=null;null!==l&&Qi(o,a,l,u,!1),null!==c&&null!==h&&Qi(o,h,c,u,!0)}if("select"===(l=(a=i?_r(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Xn;else if(qn(a))if($n)m=oi;else{m=ri;var y=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=si);switch(m&&(m=m(e,i))?Wn(o,m,n,r):(y&&y(e,a,i),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=i?_r(i):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(mi=y,yi=i,vi=null);break;case"focusout":vi=yi=mi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,_i(o,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":_i(o,n,r)}var v;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in($t=r)?$t.value:$t.textContent,Bn=!0)),0<(y=Ki(i,b)).length&&(b=new _n(b,e,null,n,r),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Un(e,t)?(e=en(),Zt=Jt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Ki(i,"onBeforeInput")).length&&(r=new _n("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=v))}Fi(o,t)}))}function Wi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ki(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Re(e,n))&&i.unshift(Wi(e,s,r)),null!=(s=Re(e,t))&&i.push(Wi(e,s,r))),e=e.return}return i}function Gi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qi(e,t,n,i,r){for(var s=t._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Re(n,s))&&o.unshift(Wi(n,l,a)):r||null!=(l=Re(n,s))&&o.push(Wi(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yi=/\r\n?/g,Xi=/\u0000|\uFFFD/g;function $i(e){return("string"===typeof e?e:""+e).replace(Yi,"\n").replace(Xi,"")}function Ji(e,t,n){if(t=$i(t),$i(e)!==t&&n)throw Error(s(425))}function Zi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Bt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Bt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,fr="__reactProps$"+hr,pr="__reactContainer$"+hr,gr="__reactEvents$"+hr,mr="__reactListeners$"+hr,yr="__reactHandles$"+hr;function vr(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[dr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[dr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function br(e){return!(e=e[dr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _r(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wr(e){return e[fr]||null}var xr=[],Sr=-1;function Er(e){return{current:e}}function kr(e){0>Sr||(e.current=xr[Sr],xr[Sr]=null,Sr--)}function Tr(e,t){Sr++,xr[Sr]=e.current,e.current=t}var Cr={},Ir=Er(Cr),Ar=Er(!1),Nr=Cr;function Or(e,t){var n=e.type.contextTypes;if(!n)return Cr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Rr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pr(){kr(Ar),kr(Ir)}function Dr(e,t,n){if(Ir.current!==Cr)throw Error(s(168));Tr(Ir,t),Tr(Ar,n)}function Mr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,H(e)||"Unknown",r));return j({},n,i)}function Lr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cr,Nr=Ir.current,Tr(Ir,e),Tr(Ar,Ar.current),!0}function jr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Mr(e,t,Nr),i.__reactInternalMemoizedMergedChildContext=e,kr(Ar),kr(Ir),Tr(Ir,e)):kr(Ar),Tr(Ar,n)}var Fr=null,zr=!1,Ur=!1;function Vr(e){null===Fr?Fr=[e]:Fr.push(e)}function Br(){if(!Ur&&null!==Fr){Ur=!0;var e=0,t=bt;try{var n=Fr;for(bt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Fr=null,zr=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(e+1)),Ge(Ze,Br),r}finally{bt=t,Ur=!1}}return null}var Hr=[],qr=0,Wr=null,Kr=0,Gr=[],Qr=0,Yr=null,Xr=1,$r="";function Jr(e,t){Hr[qr++]=Kr,Hr[qr++]=Wr,Wr=e,Kr=t}function Zr(e,t,n){Gr[Qr++]=Xr,Gr[Qr++]=$r,Gr[Qr++]=Yr,Yr=e;var i=Xr;e=$r;var r=32-ot(i)-1;i&=~(1<<r),n+=1;var s=32-ot(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Xr=1<<32-ot(t)+r|n<<r|i,$r=s+e}else Xr=1<<s|n<<r|i,$r=e}function es(e){null!==e.return&&(Jr(e,1),Zr(e,1,0))}function ts(e){for(;e===Wr;)Wr=Hr[--qr],Hr[qr]=null,Kr=Hr[--qr],Hr[qr]=null;for(;e===Yr;)Yr=Gr[--Qr],Gr[Qr]=null,$r=Gr[--Qr],Gr[Qr]=null,Xr=Gr[--Qr],Gr[Qr]=null}var ns=null,is=null,rs=!1,ss=null;function os(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yr?{id:Xr,overflow:$r}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(rs){var t=is;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var i=ns;t&&as(e,t)?os(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function hs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!rs)return hs(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw fs(),Error(s(418));for(;t;)os(e,t),t=cr(t.nextSibling)}if(hs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?cr(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=is;e;)e=cr(e.nextSibling)}function ps(){is=ns=null,rs=!1}function gs(e){null===ss?ss=[e]:ss.push(e)}var ms=_.ReactCurrentBatchConfig;function ys(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bs(e){return(0,e._init)(e._payload)}function _s(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Fc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===S?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&bs(s)===t.type)?((i=r(t,n.props)).ref=ys(e,t,n),i.return=e,i):((i=Mc(n.type,n.key,n.props,null,e.mode,i)).ref=ys(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=ys(e,null,t),n.return=e,n;case x:return(t=zc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Lc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(e,t,n,i):null;case x:return n.key===r?u(e,t,n,i):null;case R:return f(e,t,(r=n._init)(n._payload),i)}if(te(n)||M(n))return null!==r?null:h(e,t,n,i,null);vs(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case x:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case R:return p(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||M(i))return h(t,e=e.get(n)||null,i,r,null);vs(t,i)}return null}function g(r,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(r,h,a[g],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(r,h),s=o(y,s,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===a.length)return n(r,h),rs&&Jr(r,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(r,a[g],l))&&(s=o(h,s,g),null===u?c=h:u.sibling=h,u=h);return rs&&Jr(r,g),c}for(h=i(r,h);g<a.length;g++)null!==(m=p(h,r,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(r,e)})),rs&&Jr(r,g),c}function m(r,a,l,c){var u=M(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(r,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(r,g),a=o(b,a,m),null===h?u=b:h.sibling=b,h=b,g=y}if(v.done)return n(r,g),rs&&Jr(r,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(r,v.value,c))&&(a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return rs&&Jr(r,m),u}for(g=i(r,g);!v.done;m++,v=l.next())null!==(v=p(g,r,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return e&&g.forEach((function(e){return t(r,e)})),rs&&Jr(r,m),u}return function e(i,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(i,u.sibling),(s=r(u,o.props.children)).return=i,i=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&bs(c)===u.type){n(i,u.sibling),(s=r(u,o.props)).ref=ys(i,u,o),s.return=i,i=s;break e}n(i,u);break}t(i,u),u=u.sibling}o.type===S?((s=Lc(o.props.children,i.mode,l,o.key)).return=i,i=s):((l=Mc(o.type,o.key,o.props,null,i.mode,l)).ref=ys(i,s,o),l.return=i,i=l)}return a(i);case x:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(i,s.sibling),(s=r(s,o.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=zc(o,i.mode,l)).return=i,i=s}return a(i);case R:return e(i,s,(u=o._init)(o._payload),l)}if(te(o))return g(i,s,o,l);if(M(o))return m(i,s,o,l);vs(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,o)).return=i,i=s):(n(i,s),(s=Fc(o,i.mode,l)).return=i,i=s),a(i)):n(i,s)}}var ws=_s(!0),xs=_s(!1),Ss=Er(null),Es=null,ks=null,Ts=null;function Cs(){Ts=ks=Es=null}function Is(e){var t=Ss.current;kr(Ss),e._currentValue=t}function As(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){Es=e,Ts=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function Os(e){var t=e._currentValue;if(Ts!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===Es)throw Error(s(308));ks=e,Es.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var Rs=null;function Ps(e){null===Rs?Rs=[e]:Rs.push(e)}function Ds(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Ps(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ms(e,i)}function Ms(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function js(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Al)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Ms(e,n)}return null===(r=i.interleaved)?(t.next=t,Ps(i)):(t.next=r.next,r.next=t),i.interleaved=t,Ms(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bs(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hs(e,t,n,i){var r=e.updateQueue;Ls=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=j({},h,d);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(d=a).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);jl|=o,e.lanes=o,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Ws={},Ks=Er(Ws),Gs=Er(Ws),Qs=Er(Ws);function Ys(e){if(e===Ws)throw Error(s(174));return e}function Xs(e,t){switch(Tr(Qs,t),Tr(Gs,e),Tr(Ks,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}kr(Ks),Tr(Ks,t)}function $s(){kr(Ks),kr(Gs),kr(Qs)}function Js(e){Ys(Qs.current);var t=Ys(Ks.current),n=le(t,e.type);t!==n&&(Tr(Gs,e),Tr(Ks,n))}function Zs(e){Gs.current===e&&(kr(Ks),kr(Gs))}var eo=Er(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function io(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var ro=_.ReactCurrentDispatcher,so=_.ReactCurrentBatchConfig,oo=0,ao=null,lo=null,co=null,uo=!1,ho=!1,fo=0,po=0;function go(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function yo(e,t,n,i,r,o){if(oo=o,ao=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?ea:ta,e=n(i,r),ho){o=0;do{if(ho=!1,fo=0,25<=o)throw Error(s(301));o+=1,co=lo=null,t.updateQueue=null,ro.current=na,e=n(i,r)}while(ho)}if(ro.current=Zo,t=null!==lo&&null!==lo.next,oo=0,co=lo=ao=null,uo=!1,t)throw Error(s(300));return e}function vo(){var e=0!==fo;return fo=0,e}function bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?ao.memoizedState=co=e:co=co.next=e,co}function _o(){if(null===lo){var e=ao.alternate;e=null!==e?e.memoizedState:null}else e=lo.next;var t=null===co?ao.memoizedState:co.next;if(null!==t)co=t,lo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(lo=e).memoizedState,baseState:lo.baseState,baseQueue:lo.baseQueue,queue:lo.queue,next:null},null===co?ao.memoizedState=co=e:co=co.next=e}return co}function wo(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=lo,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((oo&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=i):c=c.next=d,ao.lanes|=h,jl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=i:c.next=l,ai(i,t.memoizedState)||(_a=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,ao.lanes|=o,jl|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);ai(o,t.memoizedState)||(_a=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Eo(){}function ko(e,t){var n=ao,i=_o(),r=t(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,_a=!0),i=i.queue,jo(Io.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Ro(9,Co.bind(null,n,i,r,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&oo)||To(n,t,r)}return r}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ao.updateQueue)?(t={lastEffect:null,stores:null},ao.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Co(e,t,n,i){t.value=n,t.getSnapshot=i,Ao(t)&&No(e)}function Io(e,t,n){return n((function(){Ao(t)&&No(e)}))}function Ao(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function No(e){var t=Ms(e,1);null!==t&&ic(t,e,1,-1)}function Oo(e){var t=bo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Yo.bind(null,ao,e),[t.memoizedState,e]}function Ro(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=ao.updateQueue)?(t={lastEffect:null,stores:null},ao.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Po(){return _o().memoizedState}function Do(e,t,n,i){var r=bo();ao.flags|=e,r.memoizedState=Ro(1|t,n,void 0,void 0===i?null:i)}function Mo(e,t,n,i){var r=_o();i=void 0===i?null:i;var s=void 0;if(null!==lo){var o=lo.memoizedState;if(s=o.destroy,null!==i&&mo(i,o.deps))return void(r.memoizedState=Ro(t,n,s,i))}ao.flags|=e,r.memoizedState=Ro(1|t,n,s,i)}function Lo(e,t){return Do(8390656,8,e,t)}function jo(e,t){return Mo(2048,8,e,t)}function Fo(e,t){return Mo(4,2,e,t)}function zo(e,t){return Mo(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4,4,Uo.bind(null,t,e),n)}function Bo(){}function Ho(e,t){var n=_o();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&mo(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=_o();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&mo(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Wo(e,t,n){return 0===(21&oo)?(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n):(ai(n,t)||(n=gt(),ao.lanes|=n,jl|=n,e.baseState=!0),t)}function Ko(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var i=so.transition;so.transition={};try{e(!1),t()}finally{bt=n,so.transition=i}}function Go(){return _o().memoizedState}function Qo(e,t,n){var i=nc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Xo(e))$o(t,n);else if(null!==(n=Ds(e,t,n,i))){ic(n,e,i,tc()),Jo(n,t,i)}}function Yo(e,t,n){var i=nc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xo(e))$o(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,o)){var l=t.interleaved;return null===l?(r.next=r,Ps(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Ds(e,t,r,i))&&(ic(n,e,i,r=tc()),Jo(n,t,i))}}function Xo(e){var t=e.alternate;return e===ao||null!==t&&t===ao}function $o(e,t){ho=uo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Zo={readContext:Os,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},ea={readContext:Os,useCallback:function(e,t){return bo().memoizedState=[e,void 0===t?null:t],e},useContext:Os,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=bo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=bo();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Qo.bind(null,ao,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},bo().memoizedState=e},useState:Oo,useDebugValue:Bo,useDeferredValue:function(e){return bo().memoizedState=e},useTransition:function(){var e=Oo(!1),t=e[0];return e=Ko.bind(null,e[1]),bo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=ao,r=bo();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&oo)||To(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Lo(Io.bind(null,i,o,e),[e]),i.flags|=2048,Ro(9,Co.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=bo(),t=Nl.identifierPrefix;if(rs){var n=$r;t=":"+t+"R"+(n=(Xr&~(1<<32-ot(Xr)-1)).toString(32)+n),0<(n=fo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ta={readContext:Os,useCallback:Ho,useContext:Os,useEffect:jo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:zo,useMemo:qo,useReducer:xo,useRef:Po,useState:function(){return xo(wo)},useDebugValue:Bo,useDeferredValue:function(e){return Wo(_o(),lo.memoizedState,e)},useTransition:function(){return[xo(wo)[0],_o().memoizedState]},useMutableSource:Eo,useSyncExternalStore:ko,useId:Go,unstable_isNewReconciler:!1},na={readContext:Os,useCallback:Ho,useContext:Os,useEffect:jo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:zo,useMemo:qo,useReducer:So,useRef:Po,useState:function(){return So(wo)},useDebugValue:Bo,useDeferredValue:function(e){var t=_o();return null===lo?t.memoizedState=e:Wo(t,lo.memoizedState,e)},useTransition:function(){return[So(wo)[0],_o().memoizedState]},useMutableSource:Eo,useSyncExternalStore:ko,useId:Go,unstable_isNewReconciler:!1};function ia(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var sa={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tc(),r=nc(e),s=zs(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,r))&&(ic(t,e,r,i),Vs(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tc(),r=nc(e),s=zs(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,r))&&(ic(t,e,r,i),Vs(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),i=nc(e),r=zs(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Us(e,r,i))&&(ic(t,e,i,n),Vs(t,e,i))}};function oa(e,t,n,i,r,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function aa(e,t,n){var i=!1,r=Cr,s=t.contextType;return"object"===typeof s&&null!==s?s=Os(s):(r=Rr(t)?Nr:Ir.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Or(e,r):Cr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sa,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function la(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&sa.enqueueReplaceState(t,t.state,null)}function ca(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},js(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Os(s):(s=Rr(t)?Nr:Ir.current,r.context=Or(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&sa.enqueueReplaceState(r,r.state,null),Hs(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function ua(e,t){try{var n="",i=t;do{n+=V(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=zs(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Wl||(Wl=!0,Kl=i),da(0,t)},n}function ga(e,t,n){(n=zs(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof i&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new fa;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var ba=_.ReactCurrentOwner,_a=!1;function wa(e,t,n,i){t.child=null===e?xs(t,null,n,i):ws(t,e.child,n,i)}function xa(e,t,n,i,r){n=n.render;var s=t.ref;return Ns(t,r),i=yo(e,t,n,i,s,r),n=vo(),null===e||_a?(rs&&n&&es(t),t.flags|=1,wa(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wa(e,t,r))}function Sa(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&e.ref===t.ref)return Wa(e,t,r)}return t.flags|=1,(e=Dc(s,i)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(_a=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,Wa(e,t,r);0!==(131072&e.flags)&&(_a=!0)}}return Ca(e,t,n,i,r)}function ka(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(Dl,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tr(Dl,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Tr(Dl,Pl),Pl|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Tr(Dl,Pl),Pl|=i;return wa(e,t,r,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,i,r){var s=Rr(n)?Nr:Ir.current;return s=Or(t,s),Ns(t,r),n=yo(e,t,n,i,s,r),i=vo(),null===e||_a?(rs&&i&&es(t),t.flags|=1,wa(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wa(e,t,r))}function Ia(e,t,n,i,r){if(Rr(n)){var s=!0;Lr(t)}else s=!1;if(Ns(t,r),null===t.stateNode)qa(e,t),aa(t,n,i),ca(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Os(c):c=Or(t,c=Rr(n)?Nr:Ir.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||l!==c)&&la(t,o,i,c),Ls=!1;var d=t.memoizedState;o.state=d,Hs(t,i,o,r),l=t.memoizedState,a!==i||d!==l||Ar.current||Ls?("function"===typeof u&&(ra(t,n,u,i),l=t.memoizedState),(a=Ls||oa(t,n,a,i,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ia(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Os(l):l=Or(t,l=Rr(n)?Nr:Ir.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&la(t,o,i,l),Ls=!1,d=t.memoizedState,o.state=d,Hs(t,i,o,r);var p=t.memoizedState;a!==h||d!==p||Ar.current||Ls?("function"===typeof f&&(ra(t,n,f,i),p=t.memoizedState),(c=Ls||oa(t,n,c,i,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Aa(e,t,n,i,s,r)}function Aa(e,t,n,i,r,s){Ta(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&jr(t,n,!1),Wa(e,t,s);i=t.stateNode,ba.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,a,s)):wa(e,t,a,s),t.memoizedState=i.state,r&&jr(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Dr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Dr(0,t.context,!1),Xs(e,t.containerInfo)}function Oa(e,t,n,i,r){return ps(),gs(r),t.flags|=256,wa(e,t,n,i),t.child}var Ra,Pa,Da,Ma,La={dehydrated:null,treeContext:null,retryLane:0};function ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var i,r=t.pendingProps,o=eo.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Tr(eo,1&o),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=jc(l,r,0,null),e=Lc(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ja(n),t.memoizedState=La,e):za(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,r,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,i=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=jc({mode:"visible",children:i.children},r,0,null),(o=Lc(o,r,a,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&ws(t,e.child,null,a),t.child.memoizedState=ja(a),t.memoizedState=La,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Ua(e,t,a,i=ha(o=Error(s(419)),i,void 0))}if(l=0!==(a&e.childLanes),_a||l){if(null!==(i=Nl)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Ms(e,r),ic(i,e,r,-1))}return mc(),Ua(e,t,a,i=ha(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,is=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Gr[Qr++]=Xr,Gr[Qr++]=$r,Gr[Qr++]=Yr,Xr=e.id,$r=e.overflow,Yr=t),t=za(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,o,n);if(a){a=r.fallback,l=t.mode,i=(o=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=Dc(i,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?ja(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,r}return e=(a=e.child).sibling,r=Dc(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function za(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,i){return null!==i&&gs(i),ws(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),As(e.return,t,n)}function Ba(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ha(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(wa(e,t,i.children,n),0!==(2&(i=eo.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Tr(eo,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Ba(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===to(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Qa(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Rr(t.type)&&Pr(),Ga(t),null;case 3:return i=t.stateNode,$s(),kr(Ar),kr(Ir),io(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Pa(e,t),Ga(t),null;case 5:Zs(t);var r=Ys(Qs.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=Ys(Ks.current),ds(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[dr]=t,i[fr]=o,e=0!==(1&t.mode),n){case"dialog":zi("cancel",i),zi("close",i);break;case"iframe":case"object":case"embed":zi("load",i);break;case"video":case"audio":for(r=0;r<Mi.length;r++)zi(Mi[r],i);break;case"source":zi("error",i);break;case"img":case"image":case"link":zi("error",i),zi("load",i);break;case"details":zi("toggle",i);break;case"input":X(i,o),zi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},zi("invalid",i);break;case"textarea":re(i,o),zi("invalid",i)}for(var l in ve(n,o),r=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zi("scroll",i)}switch(n){case"input":K(i),Z(i,o,!0);break;case"textarea":K(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Zi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[dr]=t,e[fr]=i,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,i),n){case"dialog":zi("cancel",e),zi("close",e),r=i;break;case"iframe":case"object":case"embed":zi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Mi.length;r++)zi(Mi[r],e);r=i;break;case"source":zi("error",e),r=i;break;case"img":case"image":case"link":zi("error",e),zi("load",e),r=i;break;case"details":zi("toggle",e),r=i;break;case"input":X(e,i),r=Y(e,i),zi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=j({},i,{value:void 0}),zi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),zi("invalid",e)}for(o in ve(n,r),c=r)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&zi("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":K(e),Z(e,i,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+q(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=Ys(Qs.current),Ys(Ks.current),ds(t)){if(i=t.stateNode,n=t.memoizedProps,i[dr]=t,(o=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=t,t.stateNode=i}return Ga(t),null;case 13:if(kr(eo),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))fs(),ps(),t.flags|=98560,o=!1;else if(o=ds(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[dr]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===Ml&&(Ml=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return $s(),Pa(e,t),null===e&&Bi(t.stateNode.containerInfo),Ga(t),null;case 10:return Is(t.type._context),Ga(t),null;case 19:if(kr(eo),null===(o=t.memoizedState))return Ga(t),null;if(i=0!==(128&t.flags),null===(l=o.rendering))if(i)Ka(o,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=to(e))){for(t.flags|=128,Ka(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Tr(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Hl&&(t.flags|=128,i=!0,Ka(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=to(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!rs)return Ga(t),null}else 2*$e()-o.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,i=!0,Ka(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=eo.current,Tr(eo,i?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return dc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Rr(t.type)&&Pr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $s(),kr(Ar),kr(Ir),io(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(kr(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return kr(eo),null;case 4:return $s(),null;case 10:return Is(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},Da=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Ys(Ks.current);var s,o=null;switch(n){case"input":r=Y(e,r),i=Y(e,i),o=[];break;case"select":r=j({},r,{value:void 0}),i=j({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(u in ve(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zi("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ma=function(e,t,n,i){n!==i&&(t.flags|=4)};var Xa=!1,$a=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){kc(e,t,i)}else n.current=null}function tl(e,t,n){try{n()}catch(i){kc(e,t,i)}}var nl=!1;function il(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&tl(t,n,s)}r=r.next}while(r!==i)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[fr],delete t[gr],delete t[mr],delete t[yr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:$a||el(n,t);case 6:var i=hl,r=dl;hl=null,fl(e,t,n),dl=r,null!==(hl=i)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Bt(e)):lr(hl,n.stateNode));break;case 4:i=hl,r=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=i,dl=r;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),r=r.next}while(r!==i)}fl(e,t,n);break;case 1:if(!$a&&(el(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){kc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?($a=(i=$a)||null!==n.memoizedState,fl(e,t,n),$a=i):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var i=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,r),hl=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){kc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&i){try{il(3,e,e.return),rl(3,e)}catch(m){kc(e,e.return,m)}try{il(5,e,e.return)}catch(m){kc(e,e.return,m)}}break;case 1:ml(t,e),vl(e),512&i&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),vl(e),512&i&&null!==n&&el(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(m){kc(e,e.return,m)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(r,o),be(l,a);var u=be(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?me(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):b(r,h,d,u)}switch(l){case"input":J(r,o);break;case"textarea":se(r,o);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(r,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[fr]=o}catch(m){kc(e,e.return,m)}}break;case 6:if(ml(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(m){kc(e,e.return,m)}}break;case 3:if(ml(t,e),vl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){kc(e,e.return,m)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Bl=$e())),4&i&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||h,ml(t,e),$a=u):ml(t,e),vl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:il(4,f,f.return);break;case 1:el(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,n=f.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){kc(i,n,m)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,Za=p):xl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){kc(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){kc(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),vl(e),4&i&&gl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(de(r,""),i.flags&=-33),ul(e,ll(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){kc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Za=e,_l(e,t,n)}function _l(e,t,n){for(var i=0!==(1&e.mode);null!==Za;){var r=Za,s=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Xa;if(!o){var a=r.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Xa;var c=$a;if(Xa=o,($a=l)&&!c)for(Za=r;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?Sl(r):null!==l?(l.return=o,Za=l):Sl(r);for(;null!==s;)Za=s,_l(s,t,n),s=s.sibling;Za=r,Xa=a,$a=c}wl(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Za=s):wl(e)}}function wl(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||rl(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!$a)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ia(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}$a||512&t.flags&&sl(t)}catch(f){kc(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function xl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Sl(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){kc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){kc(t,r,l)}}var s=t.return;try{sl(t)}catch(l){kc(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){kc(t,o,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var El,kl=Math.ceil,Tl=_.ReactCurrentDispatcher,Cl=_.ReactCurrentOwner,Il=_.ReactCurrentBatchConfig,Al=0,Nl=null,Ol=null,Rl=0,Pl=0,Dl=Er(0),Ml=0,Ll=null,jl=0,Fl=0,zl=0,Ul=null,Vl=null,Bl=0,Hl=1/0,ql=null,Wl=!1,Kl=null,Gl=null,Ql=!1,Yl=null,Xl=0,$l=0,Jl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Al)?$e():-1!==Zl?Zl:Zl=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Rl?Rl&-Rl:null!==ms.transition?(0===ec&&(ec=gt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function ic(e,t,n,i){if(50<$l)throw $l=0,Jl=null,Error(s(185));yt(e,n,i),0!==(2&Al)&&e===Nl||(e===Nl&&(0===(2&Al)&&(Fl|=n),4===Ml&&lc(e,Rl)),rc(e,i),1===n&&0===Al&&0===(1&t.mode)&&(Hl=$e()+500,zr&&Br()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=r[o];-1===l?0!==(a&n)&&0===(a&i)||(r[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var i=dt(e,e===Nl?Rl:0);if(0===i)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){zr=!0,Vr(e)}(cc.bind(null,e)):Vr(cc.bind(null,e)),or((function(){0===(6&Al)&&Br()})),n=null;else{switch(_t(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Nc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var i=dt(e,e===Nl?Rl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=yc(e,i);else{t=i;var r=Al;Al|=2;var o=gc();for(Nl===e&&Rl===t||(ql=null,Hl=$e()+500,fc(e,t));;)try{bc();break}catch(l){pc(e,l)}Cs(),Tl.current=o,Al=r,null!==Ol?t=0:(Nl=null,Rl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(i=r,t=oc(e,r))),1===t)throw n=Ll,fc(e,0),lc(e,i),rc(e,$e()),n;if(6===t)lc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=yc(e,i))&&(0!==(o=pt(e))&&(i=o,t=oc(e,o))),1===t))throw n=Ll,fc(e,0),lc(e,i),rc(e,$e()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Vl,ql);break;case 3:if(lc(e,i),(130023424&i)===i&&10<(t=Bl+500-$e())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){tc(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(xc.bind(null,e,Vl,ql),t);break}xc(e,Vl,ql);break;case 4:if(lc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-ot(i);o=1<<a,(a=t[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=$e()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*kl(i/1960))-i)){e.timeoutHandle=ir(xc.bind(null,e,Vl,ql),i);break}xc(e,Vl,ql);break;default:throw Error(s(329))}}}return rc(e,$e()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Vl,Vl=n,null!==t&&ac(t)),e}function ac(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function lc(e,t){for(t&=~zl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function cc(e){if(0!==(6&Al))throw Error(s(327));Sc();var t=dt(e,0);if(0===(1&t))return rc(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var i=pt(e);0!==i&&(t=i,n=oc(e,i))}if(1===n)throw n=Ll,fc(e,0),lc(e,t),rc(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Vl,ql),rc(e,$e()),null}function uc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Hl=$e()+500,zr&&Br())}}function hc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&Sc();var t=Al;Al|=1;var n=Il.transition,i=bt;try{if(Il.transition=null,bt=1,e)return e()}finally{bt=i,Il.transition=n,0===(6&(Al=t))&&Br()}}function dc(){Pl=Dl.current,kr(Dl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Ol)for(n=Ol.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Pr();break;case 3:$s(),kr(Ar),kr(Ir),io();break;case 5:Zs(i);break;case 4:$s();break;case 13:case 19:kr(eo);break;case 10:Is(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Nl=e,Ol=e=Dc(e.current,null),Rl=Pl=t,Ml=0,Ll=null,zl=Fl=jl=0,Vl=Ul=null,null!==Rs){for(t=0;t<Rs.length;t++)if(null!==(i=(n=Rs[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var o=s.next;s.next=r,i.next=o}n.pending=i}Rs=null}return e}function pc(e,t){for(;;){var n=Ol;try{if(Cs(),ro.current=Zo,uo){for(var i=ao.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}uo=!1}if(oo=0,co=lo=ao=null,ho=!1,fo=0,Cl.current=null,null===n||null===n.return){Ml=1,Ll=t,Ol=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),gs(ua(c,l));break e}}o=c=ua(c,l),4!==Ml&&(Ml=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Bs(o,pa(0,c,t));break e;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Bs(o,ga(o,l,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(_){t=_,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function gc(){var e=Tl.current;return Tl.current=Zo,null===e?Zo:e}function mc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Nl||0===(268435455&jl)&&0===(268435455&Fl)||lc(Nl,Rl)}function yc(e,t){var n=Al;Al|=2;var i=gc();for(Nl===e&&Rl===t||(ql=null,fc(e,t));;)try{vc();break}catch(r){pc(e,r)}if(Cs(),Al=n,Tl.current=i,null!==Ol)throw Error(s(261));return Nl=null,Rl=0,Ml}function vc(){for(;null!==Ol;)_c(Ol)}function bc(){for(;null!==Ol&&!Ye();)_c(Ol)}function _c(e){var t=El(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?wc(e):Ol=t,Cl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Pl)))return void(Ol=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Ol=n);if(null===e)return Ml=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Ml&&(Ml=5)}function xc(e,t,n){var i=bt,r=Il.transition;try{Il.transition=null,bt=1,function(e,t,n,i){do{Sc()}while(null!==Yl);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,o),e===Nl&&(Ol=Nl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Nc(tt,(function(){return Sc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Il.transition,Il.transition=null;var a=bt;bt=1;var l=Al;Al|=4,Cl.current=null,function(e,t){if(er=qt,fi(e=di())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=a+r),d!==o||0!==i&&3!==d.nodeType||(c=a+i),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===r&&(l=a),f===o&&++h===i&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},qt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:ia(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(s(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}g=nl,nl=!1}(e,n),yl(n,e),pi(tr),qt=!!er,tr=er=null,e.current=n,bl(n,e,r),Xe(),Al=l,bt=a,Il.transition=o}else e.current=n;if(Ql&&(Ql=!1,Yl=e,Xl=r),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,e=Kl,Kl=null,e;0!==(1&Xl)&&0!==e.tag&&Sc(),o=e.pendingLanes,0!==(1&o)?e===Jl?$l++:($l=0,Jl=e):$l=0,Br()}(e,t,n,i)}finally{Il.transition=r,bt=i}return null}function Sc(){if(null!==Yl){var e=_t(Xl),t=Il.transition,n=bt;try{if(Il.transition=null,bt=16>e?16:e,null===Yl)var i=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Al))throw Error(s(331));var r=Al;for(Al|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:il(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:il(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var b=e.current;for(Za=b;null!==Za;){var _=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==_)_.return=a,Za=_;else e:for(a=b;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){kc(l,l.return,x)}if(l===a){Za=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Za=w;break e}Za=l.return}}if(Al=r,Br(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(x){}i=!0}return i}finally{bt=n,Il.transition=t}}return!1}function Ec(e,t,n){e=Us(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Gl||!Gl.has(i))){t=Us(t,e=ga(t,e=ua(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Tc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Rl&n)===n&&(4===Ml||3===Ml&&(130023424&Rl)===Rl&&500>$e()-Bl?fc(e,0):zl|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ms(e,t))&&(yt(e,t,n),rc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Cc(e,n)}function Nc(e,t){return Ge(e,t)}function Oc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,i){return new Oc(e,t,n,i)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,i,r,o){var a=2;if(i=e,"function"===typeof e)Pc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Lc(n.children,r,o,t);case E:a=8,r|=8;break;case k:return(e=Rc(12,n,t,2|r)).elementType=k,e.lanes=o,e;case A:return(e=Rc(13,n,t,r)).elementType=A,e.lanes=o,e;case N:return(e=Rc(19,n,t,r)).elementType=N,e.lanes=o,e;case P:return jc(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case C:a=9;break e;case I:a=11;break e;case O:a=14;break e;case R:a=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rc(a,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Lc(e,t,n,i){return(e=Rc(7,e,i,t)).lanes=n,e}function jc(e,t,n,i){return(e=Rc(22,e,i,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,i,r,s,o,a,l){return e=new Uc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},js(s),e}function Bc(e){if(!e)return Cr;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Rr(n))return Mr(e,n,t)}return t}function Hc(e,t,n,i,r,s,o,a,l){return(e=Vc(n,i,!0,e,0,s,0,a,l)).context=Bc(null),n=e.current,(s=zs(i=tc(),r=nc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,r),e.current.lanes=r,yt(e,r,i),rc(e,i),e}function qc(e,t,n,i){var r=t.current,s=tc(),o=nc(r);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zs(s,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Us(r,t,o))&&(ic(e,r,o,s),Vs(e,r,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ar.current)_a=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:Na(t),ps();break;case 5:Js(t);break;case 1:Rr(t.type)&&Lr(t);break;case 4:Xs(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Tr(Ss,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Tr(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Tr(eo,1&eo.current),null!==(e=Wa(e,t,n))?e.sibling:null);Tr(eo,1&eo.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ha(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tr(eo,eo.current),i)break;return null;case 22:case 23:return t.lanes=0,ka(e,t,n)}return Wa(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,rs&&0!==(1048576&t.flags)&&Zr(t,Kr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;qa(e,t),e=t.pendingProps;var r=Or(t,Ir.current);Ns(t,n),r=yo(null,t,i,e,r,n);var o=vo();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rr(i)?(o=!0,Lr(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,js(t),r.updater=sa,t.stateNode=r,r._reactInternals=t,ca(t,i,e,n),t=Aa(null,t,i,!0,o,n)):(t.tag=0,rs&&o&&es(t),wa(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===O)return 14}return 2}(i),e=ia(i,e),r){case 0:t=Ca(null,t,i,e,n);break e;case 1:t=Ia(null,t,i,e,n);break e;case 11:t=xa(null,t,i,e,n);break e;case 14:t=Sa(null,t,i,ia(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ca(e,t,i,r=t.elementType===i?r:ia(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ia(e,t,i,r=t.elementType===i?r:ia(i,r),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));i=t.pendingProps,r=(o=t.memoizedState).element,Fs(e,t),Hs(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Oa(e,t,i,n,r=ua(Error(s(423)),t));break e}if(i!==r){t=Oa(e,t,i,n,r=ua(Error(s(424)),t));break e}for(is=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=xs(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),i===r){t=Wa(e,t,n);break e}wa(e,t,i,n)}t=t.child}return t;case 5:return Js(t),null===e&&us(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==o&&nr(i,o)&&(t.flags|=32),Ta(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&us(t),null;case 13:return Fa(e,t,n);case 4:return Xs(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ws(t,null,i,n):wa(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,xa(e,t,i,r=t.elementType===i?r:ia(i,r),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value,Tr(Ss,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===r.children&&!Ar.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=zs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),As(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),As(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Ns(t,n),i=i(r=Os(r)),t.flags|=1,wa(e,t,i,n),t.child;case 14:return r=ia(i=t.type,t.pendingProps),Sa(e,t,i,r=ia(i.type,r),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ia(i,r),qa(e,t),t.tag=1,Rr(i)?(e=!0,Lr(t)):e=!1,Ns(t,n),aa(t,i,r),ca(t,i,r,n),Aa(null,t,i,!0,e,n);case 19:return Ha(e,t,n);case 22:return ka(e,t,n)}throw Error(s(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}qc(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=Wc(o);s.call(e)}}var o=Hc(t,i,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pr]=o.current,Bi(8===e.nodeType?e.parentNode:e),hc(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=Wc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pr]=l.current,Bi(8===e.nodeType?e.parentNode:e),hc((function(){qc(t,l,n,i)})),l}(n,t,e,r,i);return Wc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){qc(null,e,null,null)})),t[pr]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,$e()),0===(6&Al)&&(Hl=$e()+500,Br()))}break;case 13:hc((function(){var t=Ms(e,1);if(null!==t){var n=tc();ic(t,e,1,n)}})),Gc(e,1)}},xt=function(e){if(13===e.tag){var t=Ms(e,134217728);if(null!==t)ic(t,e,134217728,tc());Gc(e,134217728)}},St=function(e){if(13===e.tag){var t=nc(e),n=Ms(e,t);if(null!==n)ic(n,e,t,tc());Gc(e,t)}},Et=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=wr(i);if(!r)throw Error(s(90));G(i),J(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=uc,Ae=hc;var tu={usingClientEntryPoint:!1,Events:[br,_r,wr,Te,Ce,uc]},nu={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{rt=ru.inject(iu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(s(299));var n=!1,i="",r=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,i,r),e[pr]=t.current,Bi(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,r,0,o,a),e[pr]=t.current,Bi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pr]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{var i=n(950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var _=b.prototype=new v;_.constructor=b,g(_,y.prototype),_.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,i){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,r)&&!E.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,r,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===s?"."+I(l,0):s,w(o)?(r="",null!=e&&(r=e.replace(C,"$&/")+"/"),A(o,t,r,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+I(a=e[c],c);l+=A(a,t,r,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,r,u=s+I(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var i=[],r=0;return A(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=r,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=M,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{e.exports=n(202)},579:(e,t,n)=>{e.exports=n(153)},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function w(e){if(m=!1,_(e),!g)if(null!==i(c))g=!0,P(x);else{var t=i(u);null!==t&&D(w,t.startTime-e)}}function x(e,n){g=!1,m&&(m=!1,v(T),T=-1),p=!0;var s=f;try{for(_(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===i(c)&&r(c),_(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&D(w,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,k=null,T=-1,C=5,I=-1;function A(){return!(t.unstable_now()-I<C)}function N(){if(null!==k){var e=t.unstable_now();I=e;var n=!0;try{n=k(!0,e)}finally{n?S():(E=!1,k=null)}}else E=!1}if("function"===typeof b)S=function(){b(N)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=N,S=function(){R.postMessage(null)}}else S=function(){y(N,0)};function P(e){k=e,E||(E=!0,S())}function D(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(m?(v(T),T=-1):m=!0,D(w,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,P(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{e.exports=n(234)},365:(e,t,n)=>{var i=n(43);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=i.useSyncExternalStore,o=i.useRef,a=i.useEffect,l=i.useMemo,c=i.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,i,u){var h=o(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=l((function(){function e(e){if(!a){if(a=!0,s=e,e=i(e),void 0!==u&&d.hasValue){var t=d.value;if(u(t,e))return o=t}return o=e}if(t=o,r(s,e))return t;var n=i(e);return void 0!==u&&u(t,n)?(s=e,t):(s=e,o=n)}var s,o,a=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,i,u]);var f=s(e,h[0],h[1]);return a((function(){d.hasValue=!0,d.value=f}),[f]),c(f),f}},237:(e,t,n)=>{e.exports=n(365)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>i[e]));return o.default=()=>i,n.d(s,o),s}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i,r=n(43),s=n.t(r,2),o=n(391);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function c(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const f="popstate";function p(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function g(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function m(e,t){return{usr:e.state,key:e.key,idx:t}}function y(e,t,n,i){return void 0===n&&(n=null),d({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?b(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function v(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function b(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function _(e,t,n,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,l=i.Pop,c=null,u=h();function h(){return(a.state||{idx:null}).idx}function g(){l=i.Pop;let e=h(),t=null==e?null:e-u;u=e,c&&c({action:l,location:_.location,delta:t})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:v(e);return n=n.replace(/ $/,"%20"),p(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==u&&(u=0,a.replaceState(d({},a.state,{idx:u}),""));let _={get action(){return l},get location(){return e(s,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(f,g),c=e,()=>{s.removeEventListener(f,g),c=null}},createHref:e=>t(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=i.Push;let r=y(_.location,e,t);n&&n(r,e),u=h()+1;let d=m(r,u),f=_.createHref(r);try{a.pushState(d,"",f)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;s.location.assign(f)}o&&c&&c({action:l,location:_.location,delta:1})},replace:function(e,t){l=i.Replace;let r=y(_.location,e,t);n&&n(r,e),u=h();let s=m(r,u),d=_.createHref(r);a.replaceState(s,"",d),o&&c&&c({action:l,location:_.location,delta:0})},go:e=>a.go(e)};return _}var w;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(w||(w={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function x(e,t,n){return void 0===n&&(n="/"),S(e,t,n,!1)}function S(e,t,n,i){let r=j(("string"===typeof t?b(t):t).pathname||"/",n);if(null==r)return null;let s=E(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=L(r);o=D(s[a],e,i)}return o}function E(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(e,r,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};o.relativePath.startsWith("/")&&(p(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(i.length));let a=B([i,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(p(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),E(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:P(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let i of k(e.path))r(e,t,i);else r(e,t)})),t}function k(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let o=k(i.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),r&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const T=/^:[\w-]+$/,C=3,I=2,A=1,N=10,O=-2,R=e=>"*"===e;function P(e,t){let n=e.split("/"),i=n.length;return n.some(R)&&(i+=O),t&&(i+=I),n.filter((e=>!R(e))).reduce(((e,t)=>e+(T.test(t)?C:""===t?A:N)),i)}function D(e,t,n){void 0===n&&(n=!1);let{routesMeta:i}=e,r={},s="/",o=[];for(let a=0;a<i.length;++a){let e=i[a],l=a===i.length-1,c="/"===s?t:t.slice(s.length)||"/",u=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!i[i.length-1].route.index&&(u=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),o.push({params:r,pathname:B([s,u.pathname]),pathnameBase:H(B([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=B([s,u.pathnameBase]))}return o}function M(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);g("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,t?void 0:"i");return[s,i]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1),l=i.reduce(((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function L(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return g(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function j(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function F(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function z(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function U(e,t){let n=z(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function V(e,t,n,i){let r;void 0===i&&(i=!1),"string"===typeof e?r=b(e):(r=d({},e),p(!r.pathname||!r.pathname.includes("?"),F("?","pathname","search",r)),p(!r.pathname||!r.pathname.includes("#"),F("#","pathname","hash",r)),p(!r.search||!r.search.includes("#"),F("#","search","hash",r)));let s,o=""===e||""===r.pathname,a=o?"/":r.pathname;if(null==a)s=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof e?b(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:q(i),hash:W(r)}}(r,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const B=e=>e.join("/").replace(/\/\/+/g,"/"),H=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",W=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function K(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const G=["post","put","patch","delete"],Q=(new Set(G),["get",...G]);new Set(Q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Y.apply(this,arguments)}const X=r.createContext(null);const $=r.createContext(null);const J=r.createContext(null);const Z=r.createContext(null);const ee=r.createContext({outlet:null,matches:[],isDataRoute:!1});const te=r.createContext(null);function ne(){return null!=r.useContext(Z)}function ie(){return ne()||p(!1),r.useContext(Z).location}function re(e){r.useContext(J).static||r.useLayoutEffect(e)}function se(){let{isDataRoute:e}=r.useContext(ee);return e?function(){let{router:e}=pe(de.UseNavigateStable),t=me(fe.UseNavigateStable),n=r.useRef(!1);re((()=>{n.current=!0}));let i=r.useCallback((function(i,r){void 0===r&&(r={}),n.current&&("number"===typeof i?e.navigate(i):e.navigate(i,Y({fromRouteId:t},r)))}),[e,t]);return i}():function(){ne()||p(!1);let e=r.useContext(X),{basename:t,future:n,navigator:i}=r.useContext(J),{matches:s}=r.useContext(ee),{pathname:o}=ie(),a=JSON.stringify(U(s,n.v7_relativeSplatPath)),l=r.useRef(!1);re((()=>{l.current=!0}));let c=r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=V(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:B([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e]);return c}()}function oe(e,t,n,s){ne()||p(!1);let{navigator:o}=r.useContext(J),{matches:a}=r.useContext(ee),l=a[a.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,d=ie();if(t){var f;let e="string"===typeof t?b(t):t;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||p(!1),h=e}else h=d;let g=h.pathname||"/",m=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");m="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=x(e,{pathname:m});let v=he(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:B([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:B([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,s);return t&&v?r.createElement(Z.Provider,{value:{location:Y({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:i.Pop}},v):v}function ae(){let e=function(){var e;let t=r.useContext(te),n=ge(fe.UseRouteError),i=me(fe.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=K(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const le=r.createElement(ae,null);class ce extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(ee.Provider,{value:this.props.routeContext},r.createElement(te.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ue(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(X);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ee.Provider,{value:t},i)}function he(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=i)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||p(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:i}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!i||void 0===i[e.route.id]);if(e.route.lazy||r){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,h=!1,d=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||le,c&&(u<0&&0===s?(p="route-fallback",!1||ye[p]||(ye[p]=!0),h=!0,f=null):u===s&&(h=!0,f=i.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,s+1)),m=()=>{let t;return t=o?d:h?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ue,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(ce,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),fe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fe||{});function pe(e){let t=r.useContext(X);return t||p(!1),t}function ge(e){let t=r.useContext($);return t||p(!1),t}function me(e){let t=function(){let e=r.useContext(ee);return e||p(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||p(!1),n.route.id}const ye={};const ve={};const be=(e,t,n)=>{var i;ve[i="\u26a0\ufe0f React Router Future Flag Warning: "+t+". You can use the `"+e+"` future flag to opt-in early. For more information, see "+n+"."]||(ve[i]=!0,console.warn(i))};function _e(e,t){void 0===(null==e?void 0:e.v7_startTransition)&&be("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),void 0!==(null==e?void 0:e.v7_relativeSplatPath)||t&&t.v7_relativeSplatPath||be("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(void 0===t.v7_fetcherPersist&&be("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),void 0===t.v7_normalizeFormMethod&&be("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),void 0===t.v7_partialHydration&&be("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),void 0===t.v7_skipActionErrorRevalidation&&be("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}s.startTransition;function we(e){let{to:t,replace:n,state:i,relative:s}=e;ne()||p(!1);let{future:o,static:a}=r.useContext(J),{matches:l}=r.useContext(ee),{pathname:c}=ie(),u=se(),h=V(t,U(l,o.v7_relativeSplatPath),c,"path"===s),d=JSON.stringify(h);return r.useEffect((()=>u(JSON.parse(d),{replace:n,state:i,relative:s})),[u,d,s,n,i]),null}function xe(e){p(!1)}function Se(e){let{basename:t="/",children:n=null,location:s,navigationType:o=i.Pop,navigator:a,static:l=!1,future:c}=e;ne()&&p(!1);let u=t.replace(/^\/*/,"/"),h=r.useMemo((()=>({basename:u,navigator:a,static:l,future:Y({v7_relativeSplatPath:!1},c)})),[u,c,a,l]);"string"===typeof s&&(s=b(s));let{pathname:d="/",search:f="",hash:g="",state:m=null,key:y="default"}=s,v=r.useMemo((()=>{let e=j(d,u);return null==e?null:{location:{pathname:e,search:f,hash:g,state:m,key:y},navigationType:o}}),[u,d,f,g,m,y,o]);return null==v?null:r.createElement(J.Provider,{value:h},r.createElement(Z.Provider,{children:n,value:v}))}function Ee(e){let{children:t,location:n}=e;return oe(ke(t),n)}new Promise((()=>{}));r.Component;function ke(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ke(e.props.children,s));e.type!==xe&&p(!1),e.props.index&&e.props.children&&p(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ke(e.props.children,s)),n.push(o)})),n}var Te=n(237);function Ce(e){e()}var Ie={notify(){},get:()=>[]};function Ae(e,t){let n,i=Ie,r=0,s=!1;function o(){c.onStateChange&&c.onStateChange()}function a(){r++,n||(n=t?t.addNestedSub(o):e.subscribe(o),i=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Ce((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let i=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){i&&null!==e&&(i=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}())}function l(){r--,n&&0===r&&(n(),n=void 0,i.clear(),i=Ie)}const c={addNestedSub:function(e){a();const t=i.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){i.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,a())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>i};return c}var Ne=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),Oe=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),Re=(()=>Ne||Oe?r.useLayoutEffect:r.useEffect)();Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var Pe=Symbol.for("react-redux-context"),De="undefined"!==typeof globalThis?globalThis:{};function Me(){var e;if(!r.createContext)return{};const t=null!==(e=De[Pe])&&void 0!==e?e:De[Pe]=new Map;let n=t.get(r.createContext);return n||(n=r.createContext(null),t.set(r.createContext,n)),n}var Le=Me();var je=function(e){const{children:t,context:n,serverState:i,store:s}=e,o=r.useMemo((()=>{const e=Ae(s);return{store:s,subscription:e,getServerState:i?()=>i:void 0}}),[s,i]),a=r.useMemo((()=>s.getState()),[s]);Re((()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),a!==s.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,a]);const l=n||Le;return r.createElement(l.Provider,{value:o},t)};function Fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le;return function(){return r.useContext(e)}}var ze=Fe();function Ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le;const t=e===Le?ze:Fe(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var Ve=Ue();function Be(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le;const t=e===Le?Ve:Ue(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var He=Be(),qe=(e,t)=>e===t;function We(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le;const t=e===Le?ze:Fe(e),n=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:i=qe}="function"===typeof n?{equalityFn:n}:n;const s=t(),{store:o,subscription:a,getServerState:l}=s,c=(r.useRef(!0),r.useCallback({[e.name]:t=>e(t)}[e.name],[e])),u=(0,Te.useSyncExternalStoreWithSelector)(a.addNestedSub,o.getState,l||o.getState,c,i);return r.useDebugValue(u),u};return Object.assign(n,{withTypes:()=>n}),n}var Ke=We();function Ge(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qe(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var Ye=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),Xe=()=>Math.random().toString(36).substring(7).split("").join("."),$e={INIT:"@@redux/INIT".concat(Xe()),REPLACE:"@@redux/REPLACE".concat(Xe()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(Xe())};function Je(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Ze(e,t,n){if("function"!==typeof e)throw new Error(Qe(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Qe(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Qe(1));return n(Ze)(e,t)}let i=e,r=t,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach(((e,t)=>{o.set(t,e)})))}function u(){if(l)throw new Error(Qe(3));return r}function h(e){if("function"!==typeof e)throw new Error(Qe(4));if(l)throw new Error(Qe(5));let t=!0;c();const n=a++;return o.set(n,e),function(){if(t){if(l)throw new Error(Qe(6));t=!1,c(),o.delete(n),s=null}}}function d(e){if(!Je(e))throw new Error(Qe(7));if("undefined"===typeof e.type)throw new Error(Qe(8));if("string"!==typeof e.type)throw new Error(Qe(17));if(l)throw new Error(Qe(9));try{l=!0,r=i(r,e)}finally{l=!1}return(s=o).forEach((e=>{e()})),e}d({type:$e.INIT});return{dispatch:d,subscribe:h,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Qe(10));i=e,d({type:$e.REPLACE})},[Ye]:function(){const e=h;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(Qe(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[Ye](){return this}}}}}function et(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const i=t[o];0,"function"===typeof e[i]&&(n[i]=e[i])}const i=Object.keys(n);let r;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:$e.INIT}))throw new Error(Qe(12));if("undefined"===typeof n(void 0,{type:$e.PROBE_UNKNOWN_ACTION()}))throw new Error(Qe(13))}))}(n)}catch(s){r=s}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(r)throw r;let s=!1;const o={};for(let r=0;r<i.length;r++){const a=i[r],l=n[a],c=e[a],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(Qe(14))}o[a]=u,s=s||u!==c}return s=s||i.length!==Object.keys(e).length,s?o:e}}function tt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function nt(e){return t=>{let{dispatch:n,getState:i}=t;return t=>r=>"function"===typeof r?r(n,i,e):t(r)}}var it=nt(),rt=nt,st=Symbol.for("immer-nothing"),ot=Symbol.for("immer-draftable"),at=Symbol.for("immer-state");function lt(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var ct=Object.getPrototypeOf;function ut(e){return!!e&&!!e[at]}function ht(e){var t;return!!e&&(ft(e)||Array.isArray(e)||!!e[ot]||!(null===(t=e.constructor)||void 0===t||!t[ot])||vt(e)||bt(e))}var dt=Object.prototype.constructor.toString();function ft(e){if(!e||"object"!==typeof e)return!1;const t=ct(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===dt}function pt(e,t){0===gt(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,i)=>t(i,n,e)))}function gt(e){const t=e[at];return t?t.type_:Array.isArray(e)?1:vt(e)?2:bt(e)?3:0}function mt(e,t){return 2===gt(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function yt(e,t,n){const i=gt(e);2===i?e.set(t,n):3===i?e.add(n):e[t]=n}function vt(e){return e instanceof Map}function bt(e){return e instanceof Set}function _t(e){return e.copy_||e.base_}function wt(e,t){if(vt(e))return new Map(e);if(bt(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=ft(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[at];let n=Reflect.ownKeys(t);for(let i=0;i<n.length;i++){const r=n[i],s=t[r];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[r]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[r]})}return Object.create(ct(e),t)}{const t=ct(e);if(null!==t&&n)return h({},e);const i=Object.create(t);return Object.assign(i,e)}}function xt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Et(e)||ut(e)||!ht(e)||(gt(e)>1&&(e.set=e.add=e.clear=e.delete=St),Object.freeze(e),t&&Object.entries(e).forEach((e=>{let[t,n]=e;return xt(n,!0)}))),e}function St(){lt(2)}function Et(e){return Object.isFrozen(e)}var kt,Tt={};function Ct(e){const t=Tt[e];return t||lt(0),t}function It(){return kt}function At(e,t){t&&(Ct("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Nt(e){Ot(e),e.drafts_.forEach(Pt),e.drafts_=null}function Ot(e){e===kt&&(kt=e.parent_)}function Rt(e){return kt={drafts_:[],parent_:kt,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Pt(e){const t=e[at];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Dt(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[at].modified_&&(Nt(t),lt(4)),ht(e)&&(e=Mt(t,e),t.parent_||jt(t,e)),t.patches_&&Ct("Patches").generateReplacementPatches_(n[at].base_,e,t.patches_,t.inversePatches_)):e=Mt(t,n,[]),Nt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==st?e:void 0}function Mt(e,t,n){if(Et(t))return t;const i=t[at];if(!i)return pt(t,((r,s)=>Lt(e,i,t,r,s,n))),t;if(i.scope_!==e)return t;if(!i.modified_)return jt(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const t=i.copy_;let r=t,s=!1;3===i.type_&&(r=new Set(t),t.clear(),s=!0),pt(r,((r,o)=>Lt(e,i,t,r,o,n,s))),jt(e,t,!1),n&&e.patches_&&Ct("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function Lt(e,t,n,i,r,s,o){if(ut(r)){const o=Mt(e,r,s&&t&&3!==t.type_&&!mt(t.assigned_,i)?s.concat(i):void 0);if(yt(n,i,o),!ut(o))return;e.canAutoFreeze_=!1}else o&&n.add(r);if(ht(r)&&!Et(r)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Mt(e,r),t&&t.scope_.parent_||"symbol"===typeof i||!Object.prototype.propertyIsEnumerable.call(n,i)||jt(e,r)}}function jt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&xt(t,n)}var Ft={get(e,t){if(t===at)return e;const n=_t(e);if(!mt(n,t))return function(e,t,n){var i;const r=Vt(t,n);return r?"value"in r?r.value:null===(i=r.get)||void 0===i?void 0:i.call(e.draft_):void 0}(e,n,t);const i=n[t];return e.finalized_||!ht(i)?i:i===Ut(e.base_,t)?(Ht(e),e.copy_[t]=qt(i,e)):i},has:(e,t)=>t in _t(e),ownKeys:e=>Reflect.ownKeys(_t(e)),set(e,t,n){const i=Vt(_t(e),t);if(null!==i&&void 0!==i&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const i=Ut(_t(e),t),r=null===i||void 0===i?void 0:i[at];if(r&&r.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,i)&&(void 0!==n||mt(e.base_,t)))return!0;Ht(e),Bt(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Ut(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Ht(e),Bt(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=_t(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:i.enumerable,value:n[t]}:i},defineProperty(){lt(11)},getPrototypeOf:e=>ct(e.base_),setPrototypeOf(){lt(12)}},zt={};function Ut(e,t){const n=e[at];return(n?_t(n):e)[t]}function Vt(e,t){if(!(t in e))return;let n=ct(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=ct(n)}}function Bt(e){e.modified_||(e.modified_=!0,e.parent_&&Bt(e.parent_))}function Ht(e){e.copy_||(e.copy_=wt(e.base_,e.scope_.immer_.useStrictShallowCopy_))}pt(Ft,((e,t)=>{zt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),zt.deleteProperty=function(e,t){return zt.set.call(this,e,t,void 0)},zt.set=function(e,t,n){return Ft.set.call(this,e[0],t,n,e[0])};function qt(e,t){const n=vt(e)?Ct("MapSet").proxyMap_(e,t):bt(e)?Ct("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:It(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,s=Ft;n&&(r=[i],s=zt);const{revoke:o,proxy:a}=Proxy.revocable(r,s);return i.draft_=a,i.revoke_=o,a}(e,t);return(t?t.scope_:It()).drafts_.push(n),n}function Wt(e){if(!ht(e)||Et(e))return e;const t=e[at];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=wt(e,t.scope_.immer_.useStrictShallowCopy_)}else n=wt(e,!0);return pt(n,((e,t)=>{yt(n,e,Wt(t))})),t&&(t.finalized_=!1),n}var Kt=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const i=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return i.produce(e,(e=>t.call(this,e,...s)))}}let i;if("function"!==typeof t&&lt(6),void 0!==n&&"function"!==typeof n&&lt(7),ht(e)){const r=Rt(this),s=qt(e,void 0);let o=!0;try{i=t(s),o=!1}finally{o?Nt(r):Ot(r)}return At(r,n),Dt(i,r)}if(!e||"object"!==typeof e){if(i=t(e),void 0===i&&(i=e),i===st&&(i=void 0),this.autoFreeze_&&xt(i,!0),n){const t=[],r=[];Ct("Patches").generateReplacementPatches_(e,i,t,r),n(t,r)}return i}lt(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return t.produceWithPatches(n,(t=>e(t,...r)))};let i,r;return[this.produce(e,n,((e,t)=>{i=e,r=t})),i,r]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ht(e)||lt(8),ut(e)&&(e=function(e){ut(e)||lt(10);return Wt(e)}(e));const t=Rt(this),n=qt(e,void 0);return n[at].isManual_=!0,Ot(t),n}finishDraft(e,t){const n=e&&e[at];n&&n.isManual_||lt(9);const{scope_:i}=n;return At(i,t),Dt(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}n>-1&&(t=t.slice(n+1));const i=Ct("Patches").applyPatches_;return ut(e)?i(e,t):this.produce(e,(e=>i(e,t)))}},Gt=Kt.produce;Kt.produceWithPatches.bind(Kt),Kt.setAutoFreeze.bind(Kt),Kt.setUseStrictShallowCopy.bind(Kt),Kt.applyPatches.bind(Kt),Kt.createDraft.bind(Kt),Kt.finishDraft.bind(Kt);const Qt=["reducerPath"];var Yt="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?tt:tt.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Xt(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(vn(0));return h(h({type:e,payload:n.payload},"meta"in n&&{meta:n.meta}),"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>function(e){return Je(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var $t=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function Jt(e){return ht(e)?Gt(e,(()=>{})):e}function Zt(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var en="RTK_autoBatch",tn=e=>t=>{setTimeout(t,e)},nn=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let i=new $t(e);return n&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let i=!0,r=!1,s=!1;const o=new Set,a="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:tn(10):"callback"===e.type?e.queueNotification:tn(e.timeout),l=()=>{s=!1,r&&(r=!1,o.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>i&&e()));return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){try{var t;return i=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[en]),r=!i,r&&(s||(s=!0,a(l))),n.dispatch(e)}finally{i=!0}}})}}("object"===typeof n?n:void 0)),i};function rn(e){const t={},n=[];let i;const r={addCase(e,n){const i="string"===typeof e?e:e.type;if(!i)throw new Error(vn(28));if(i in t)throw new Error(vn(29));return t[i]=n,r},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),r),addDefaultCase:e=>(i=e,r)};return e(r),[t,n,i]}var sn=Symbol.for("rtk-slice-createasyncthunk");function on(e,t){return"".concat(e,"/").concat(t)}function an(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[sn];return function(e){const{name:t,reducerPath:i=t}=e;if(!t)throw new Error(vn(11));const r=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return h({_reducerDefinitionType:"asyncThunk",payloadCreator:e},t)}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(r),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(vn(12));if(n in o.sliceCaseReducersByType)throw new Error(vn(13));return o.sliceCaseReducersByType[n]=t,a},addMatcher:(e,t)=>(o.sliceMatchers.push({matcher:e,reducer:t}),a),exposeAction:(e,t)=>(o.actionCreators[e]=t,a),exposeCaseReducer:(e,t)=>(o.sliceCaseReducersByName[e]=t,a)};function l(){const[t={},n=[],i]="function"===typeof e.extraReducers?rn(e.extraReducers):[e.extraReducers],r=h(h({},t),o.sliceCaseReducersByType);return function(e,t){let n,[i,r,s]=rn(t);if(function(e){return"function"===typeof e}(e))n=()=>Jt(e());else{const t=Jt(e);n=()=>t}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,o=[i[t.type],...r.filter((e=>{let{matcher:n}=e;return n(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===o.filter((e=>!!e)).length&&(o=[s]),o.reduce(((e,n)=>{if(n){if(ut(e)){const i=n(e,t);return void 0===i?e:i}if(ht(e))return Gt(e,(e=>n(e,t)));{const i=n(e,t);if(void 0===i){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return i}}return e}),e)}return o.getInitialState=n,o}(e.initialState,(e=>{for(let t in r)e.addCase(t,r[t]);for(let t of o.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);i&&e.addDefaultCase(i)}))}s.forEach((i=>{const s=r[i],o={reducerName:i,type:on(t,i),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,n){let i,r,{type:s,reducerName:o,createNotation:a}=e;if("reducer"in t){if(a&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(vn(17));i=t.reducer,r=t.prepare}else i=t;n.addCase(s,i).exposeCaseReducer(o,i).exposeAction(o,r?Xt(s,r):Xt(s))}(o,s,a):function(e,t,n,i){let{type:r,reducerName:s}=e;if(!i)throw new Error(vn(18));const{payloadCreator:o,fulfilled:a,pending:l,rejected:c,settled:u,options:h}=t,d=i(r,o,h);n.exposeAction(s,d),a&&n.addCase(d.fulfilled,a);l&&n.addCase(d.pending,l);c&&n.addCase(d.rejected,c);u&&n.addMatcher(d.settled,u);n.exposeCaseReducer(s,{fulfilled:a||un,pending:l||un,rejected:c||un,settled:u||un})}(o,s,a,n)}));const c=e=>e,u=new Map;let d;function f(e,t){return d||(d=l()),d(e,t)}function p(){return d||(d=l()),d.getInitialState()}function g(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function i(e){let i=e[t];return"undefined"===typeof i&&n&&(i=p()),i}function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const i=Zt(u,n,(()=>new WeakMap));return Zt(i,t,(()=>{const i={};for(const[s,o]of Object.entries(null!==(r=e.selectors)&&void 0!==r?r:{})){var r;i[s]=ln(o,t,p,n)}return i}))}return{reducerPath:t,getSelectors:r,get selectors(){return r(i)},selectSlice:i}}const m=h(h({name:t,reducer:f,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:p},g(i)),{},{injectInto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reducerPath:n}=t,r=Ge(t,Qt);const s=null!==n&&void 0!==n?n:i;return e.inject({reducerPath:s,reducer:f},r),h(h({},m),g(s,!0))}});return m}}function ln(e,t,n,i){function r(r){let s=t(r);"undefined"===typeof s&&i&&(s=n());for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return e(s,...a)}return r.unwrapped=e,r}var cn=an();function un(){}var hn="listener",dn="completed",fn="cancelled";"task-".concat(fn),"task-".concat(dn),"".concat(hn,"-").concat(fn),"".concat(hn,"-").concat(dn);var{assign:pn}=Object,gn="listenerMiddleware",mn=pn(Xt("".concat(gn,"/add")),{withTypes:()=>mn}),yn=("".concat(gn,"/removeAll"),pn(Xt("".concat(gn,"/remove")),{withTypes:()=>yn}));Symbol.for("rtk-state-proxy-original");function vn(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}const bn=cn({name:"quiz",initialState:{questions:[],currentAnswers:{},preferences:{questionTypes:{multipleChoice:!0},typeCount:{multipleChoice:10}},fileName:"",course:"",showResults:!1,showQuiz:!1,isGeneratingQuiz:!1,prioritizeWeakTopics:!1,courses:[],weakTopics:{},uploadedFile:null},reducers:{setQuestions(e,t){e.questions=t.payload},setCurrentAnswers(e,t){e.currentAnswers=t.payload},setPreferences(e,t){e.preferences=t.payload},setFileName(e,t){e.fileName=t.payload},setCourse(e,t){e.course=t.payload},setShowResults(e,t){e.showResults=t.payload},setShowQuiz(e,t){e.showQuiz=t.payload},setIsGeneratingQuiz(e,t){e.isGeneratingQuiz=t.payload},setPrioritizeWeakTopics(e,t){e.prioritizeWeakTopics=t.payload},setCourses(e,t){e.courses=t.payload},addCourse(e,t){e.courses.push(t.payload)},clearAllTopics(e){e.weakTopics={}},setUploadedFile(e,t){e.uploadedFile=t.payload}}}),{setQuestions:_n,setCurrentAnswers:wn,setPreferences:xn,setFileName:Sn,setCourse:En,setShowResults:kn,setShowQuiz:Tn,setIsGeneratingQuiz:Cn,setPrioritizeWeakTopics:In,setCourses:An,addCourse:Nn,clearAllTopics:On,setUploadedFile:Rn}=bn.actions,Pn=bn.reducer,Dn=["proactiveRefresh"],Mn=cn({name:"user",initialState:{currentUser:null,loading:!0},reducers:{setCurrentUser(e,t){const n=t.payload||{},{proactiveRefresh:i}=n,r=Ge(n,Dn);e.currentUser=r},setLoading(e,t){e.loading=t.payload}}}),{setCurrentUser:Ln,setLoading:jn}=Mn.actions,Fn=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:r=!0}=null!==e&&void 0!==e?e:{};let s=new $t;return t&&(function(e){return"boolean"===typeof e}(t)?s.push(it):s.push(rt(t.extraArgument))),s},{reducer:n,middleware:i,devTools:r=!0,preloadedState:s,enhancers:o}=e||{};let a,l;if("function"===typeof n)a=n;else{if(!Je(n))throw new Error(vn(1));a=et(n)}l="function"===typeof i?i(t):t();let c=tt;r&&(c=Yt(h({trace:!1},"object"===typeof r&&r)));const u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,i)=>{const r=e(n,i);let s=()=>{throw new Error(Qe(15))};const o={getState:r.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return s(e,...n)}},a=t.map((e=>e(o)));return s=tt(...a)(r.dispatch),h(h({},r),{},{dispatch:s})}}(...l),d=nn(u);return Ze(a,s,c(..."function"===typeof o?o(d):d()))}({reducer:{quiz:Pn,user:Mn.reducer}}),zn=Fn;var Un=n(579);const Vn=e=>{var t;let{onCreateQuiz:n,isGeneratingQuiz:i,course:s}=e;const o=He(),{preferences:a,uploadedFile:l}=Ke((e=>({preferences:e.quiz.preferences,uploadedFile:e.quiz.uploadedFile}))),[c,u]=(0,r.useState)("");return(0,Un.jsxs)("div",{className:"quiz-features",children:[(0,Un.jsxs)("div",{className:"feature-section",children:[(0,Un.jsx)("h3",{children:"Ders Se\xe7imi"}),(0,Un.jsxs)("div",{className:"course-selection",children:[(0,Un.jsxs)("select",{value:a.selectedCourseId||"",onChange:e=>{return t=e.target.value,void o(xn(h(h({},a),{},{selectedCourseId:t})));var t},children:[(0,Un.jsx)("option",{value:"",children:"Ders Se\xe7in"}),null===(t=a.courses)||void 0===t?void 0:t.map((e=>(0,Un.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,Un.jsxs)("div",{className:"add-course",children:[(0,Un.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),placeholder:"Yeni ders ad\u0131"}),(0,Un.jsx)("button",{onClick:()=>{if(c.trim()){const e={id:Date.now().toString(),name:c,userId:"current-user-id",createdAt:(new Date).toISOString()};o(Nn(e)),u("")}},children:"Ekle"})]})]})]}),(0,Un.jsxs)("div",{className:"feature-section",children:[(0,Un.jsx)("h3",{children:"Dosya Y\xfckleme"}),(0,Un.jsx)("div",{className:"file-status",children:l?(0,Un.jsxs)("p",{children:["Y\xfcklenen dosya: ",l.name]}):(0,Un.jsx)("p",{children:"Hen\xfcz dosya y\xfcklenmedi"})})]})]})},Bn=(0,r.createContext)(void 0),Hn=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(0);(0,r.useEffect)((()=>{let e;return n&&(e=setInterval((()=>{o((e=>{const t=Number(e)+1;return isNaN(t)?0:t}))}),1e3)),()=>{e&&clearInterval(e)}}),[n]);return(0,Un.jsx)(Bn.Provider,{value:{isQuizActive:n,elapsedTime:Number(s)||0,startQuiz:()=>{o(0),i(!0)},stopQuiz:()=>{i(!1)},resetQuiz:()=>{o(0),i(!1)},getFormattedTime:()=>{const e=Number(s)||0,t=Math.floor(e/60),n=e%60;return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))}},children:t})},qn=()=>{const e=(0,r.useContext)(Bn);if(!e)throw new Error("useQuizTimer bir QuizTimerProvider i\xe7inde kullan\u0131lmal\u0131d\u0131r");return e},Wn=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},Kn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,o=s?e[r+1]:0,a=r+2<e.length,l=a?e[r+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Wn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const o=r<e.length?n[e.charAt(r)]:64;++r;const a=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==o||null==a)throw new Gn;const l=t<<2|s>>4;if(i.push(l),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Gn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Qn=function(e){return function(e){const t=Wn(e);return Kn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Yn=function(e){try{return Kn.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const Xn=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,$n=()=>{try{return Xn()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:"0",FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000",REACT_APP_FIREBASE_API_KEY:"AIzaSyC_3HCvaCSsLDvO0IJNmjXNvtNffalUl8Y",REACT_APP_FIREBASE_APP_ID:"1:29159149861:web:5ca6583d1f45efcb6e0acc",REACT_APP_FIREBASE_AUTH_DOMAIN:"my-app-71530.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-CZNHMSMK8P",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"29159149861",REACT_APP_FIREBASE_PROJECT_ID:"my-app-71530",REACT_APP_FIREBASE_STORAGE_BUCKET:"my-app-71530.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Yn(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Jn=e=>{var t,n;return null===(n=null===(t=$n())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Zn=e=>{const t=Jn(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},ei=()=>{var e;return null===(e=$n())||void 0===e?void 0:e.config},ti=e=>{var t;return null===(t=$n())||void 0===t?void 0:t["_".concat(e)]};class ni{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function ii(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Qn(JSON.stringify({alg:"none",type:"JWT"})),Qn(JSON.stringify(s)),""].join(".")}function ri(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function si(){return!function(){var e;const t=null===(e=$n())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(i){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oi(){try{return"object"===typeof indexedDB}catch(e){return!1}}class ai extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,li.prototype.create)}}class li{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],r=i?function(e,t){return e.replace(ci,((e,n)=>{const i=t[n];return null!=i?String(i):"<".concat(n,"?>")}))}(i,t):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new ai(n,s,t)}}const ci=/\{\$([^}]+)}/g;function ui(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(hi(n)&&hi(s)){if(!ui(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function hi(e){return null!==e&&"object"===typeof e}function di(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function fi(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function pi(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class gi{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=mi),void 0===i.error&&(i.error=mi),void 0===i.complete&&(i.complete=mi);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function mi(){}function yi(e){return e&&e._delegate?e._delegate:e}class vi{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const bi="[DEFAULT]";class _i{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ni;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(i){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===bi?void 0:r),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(s){}var r;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi;return this.component?this.component.multipleInstances?e:bi:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class wi{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _i(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const xi=[];var Si;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Si||(Si={}));const Ei={debug:Si.DEBUG,verbose:Si.VERBOSE,info:Si.INFO,warn:Si.WARN,error:Si.ERROR,silent:Si.SILENT},ki=Si.INFO,Ti={[Si.DEBUG]:"log",[Si.VERBOSE]:"log",[Si.INFO]:"info",[Si.WARN]:"warn",[Si.ERROR]:"error"},Ci=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=Ti[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];console[i]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Ii{constructor(e){this.name=e,this._logLevel=ki,this._logHandler=Ci,this._userLogHandler=null,xi.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Si))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ei[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Si.DEBUG,...t),this._logHandler(this,Si.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Si.VERBOSE,...t),this._logHandler(this,Si.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Si.INFO,...t),this._logHandler(this,Si.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Si.WARN,...t),this._logHandler(this,Si.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Si.ERROR,...t),this._logHandler(this,Si.ERROR,...t)}}let Ai,Ni;const Oi=new WeakMap,Ri=new WeakMap,Pi=new WeakMap,Di=new WeakMap,Mi=new WeakMap;let Li={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ri.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Pi.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zi(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ji(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ni||(Ni=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(Ui(this),n),zi(Oi.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return zi(e.apply(Ui(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=e.call(Ui(this),t,...i);return Pi.set(s,t.sort?t.sort():[t]),zi(s)}}function Fi(e){return"function"===typeof e?ji(e):(e instanceof IDBTransaction&&function(e){if(Ri.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));Ri.set(e,t)}(e),t=e,(Ai||(Ai=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Li):e);var t}function zi(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(zi(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Oi.set(t,e)})).catch((()=>{})),Mi.set(t,e),t}(e);if(Di.has(e))return Di.get(e);const t=Fi(e);return t!==e&&(Di.set(e,t),Mi.set(t,e)),t}const Ui=e=>Mi.get(e);const Vi=["get","getKey","getAll","getAllKeys","count"],Bi=["put","add","delete","clear"],Hi=new Map;function qi(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Hi.get(t))return Hi.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Bi.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Vi.includes(n))return;const s=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return i&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),r&&t.done]))[0]};return Hi.set(t,s),s}!function(e){Li=e(Li)}((e=>h(h({},e),{},{get:(t,n,i)=>qi(t,n)||e.get(t,n,i),has:(t,n)=>!!qi(t,n)||e.has(t,n)})));class Wi{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Ki="@firebase/app",Gi="0.10.13",Qi=new Ii("@firebase/app"),Yi="@firebase/app-compat",Xi="@firebase/analytics-compat",$i="@firebase/analytics",Ji="@firebase/app-check-compat",Zi="@firebase/app-check",er="@firebase/auth",tr="@firebase/auth-compat",nr="@firebase/database",ir="@firebase/data-connect",rr="@firebase/database-compat",sr="@firebase/functions",or="@firebase/functions-compat",ar="@firebase/installations",lr="@firebase/installations-compat",cr="@firebase/messaging",ur="@firebase/messaging-compat",hr="@firebase/performance",dr="@firebase/performance-compat",fr="@firebase/remote-config",pr="@firebase/remote-config-compat",gr="@firebase/storage",mr="@firebase/storage-compat",yr="@firebase/firestore",vr="@firebase/vertexai-preview",br="@firebase/firestore-compat",_r="firebase",wr="[DEFAULT]",xr={[Ki]:"fire-core",[Yi]:"fire-core-compat",[$i]:"fire-analytics",[Xi]:"fire-analytics-compat",[Zi]:"fire-app-check",[Ji]:"fire-app-check-compat",[er]:"fire-auth",[tr]:"fire-auth-compat",[nr]:"fire-rtdb",[ir]:"fire-data-connect",[rr]:"fire-rtdb-compat",[sr]:"fire-fn",[or]:"fire-fn-compat",[ar]:"fire-iid",[lr]:"fire-iid-compat",[cr]:"fire-fcm",[ur]:"fire-fcm-compat",[hr]:"fire-perf",[dr]:"fire-perf-compat",[fr]:"fire-rc",[pr]:"fire-rc-compat",[gr]:"fire-gcs",[mr]:"fire-gcs-compat",[yr]:"fire-fst",[br]:"fire-fst-compat",[vr]:"fire-vertex","fire-js":"fire-js",[_r]:"fire-js-all"},Sr=new Map,Er=new Map,kr=new Map;function Tr(e,t){try{e.container.addComponent(t)}catch(n){Qi.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Cr(e){const t=e.name;if(kr.has(t))return Qi.debug("There were multiple attempts to register component ".concat(t,".")),!1;kr.set(t,e);for(const n of Sr.values())Tr(n,e);for(const n of Er.values())Tr(n,e);return!0}function Ir(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ar(e){return void 0!==e.settings}const Nr=new li("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Or{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new vi("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}const Rr="10.14.1";function Pr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:wr,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!==typeof r||!r)throw Nr.create("bad-app-name",{appName:String(r)});if(n||(n=ei()),!n)throw Nr.create("no-options");const s=Sr.get(r);if(s){if(ui(n,s.options)&&ui(i,s.config))return s;throw Nr.create("duplicate-app",{appName:r})}const o=new wi(r);for(const l of kr.values())o.addComponent(l);const a=new Or(n,i,o);return Sr.set(r,a),a}function Dr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wr;const t=Sr.get(e);if(!t&&e===wr&&ei())return Pr();if(!t)throw Nr.create("no-app",{appName:e});return t}function Mr(e,t,n){var i;let r=null!==(i=xr[e])&&void 0!==i?i:e;n&&(r+="-".concat(n));const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Qi.warn(e.join(" "))}Cr(new vi("".concat(r,"-version"),(()=>({library:r,version:t})),"VERSION"))}const Lr="firebase-heartbeat-store";let jr=null;function Fr(){return jr||(jr=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=zi(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(zi(o.result),e.oldVersion,e.newVersion,zi(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Lr)}catch(n){console.warn(n)}}}).catch((e=>{throw Nr.create("idb-open",{originalErrorMessage:e.message})}))),jr}async function zr(e,t){try{const n=(await Fr()).transaction(Lr,"readwrite"),i=n.objectStore(Lr);await i.put(t,Ur(e)),await n.done}catch(n){if(n instanceof ai)Qi.warn(n.message);else{const e=Nr.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Qi.warn(e.message)}}}function Ur(e){return"".concat(e.name,"!").concat(e.options.appId)}class Vr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Hr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Br();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some((e=>e.date===i)))return;return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(n){Qi.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Br(),{heartbeatsToSend:n,unsentEntries:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),qr(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),qr(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=Qn(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return Qi.warn(t),""}}}function Br(){return(new Date).toISOString().substring(0,10)}class Hr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!oi()&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Fr()).transaction(Lr),n=await t.objectStore(Lr).get(Ur(e));return await t.done,n}catch(t){if(t instanceof ai)Qi.warn(t.message);else{const e=Nr.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Qi.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return zr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return zr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function qr(e){return Qn(JSON.stringify({version:2,heartbeats:e})).length}var Wr;Wr="",Cr(new vi("platform-logger",(e=>new Wi(e)),"PRIVATE")),Cr(new vi("heartbeat",(e=>new Vr(e)),"PRIVATE")),Mr(Ki,Gi,Wr),Mr(Ki,Gi,"esm2017"),Mr("fire-js","");var Kr,Gr,Qr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Yr={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var i=Array(16);if("string"===typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var s=e.g[3],o=t+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(t^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+s&4294967295}function i(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var s=0|e[r];i&&s==t||(n[r]=s,i=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var i=t-this.blockSize,r=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=i;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,r),s=0;break}}else for(;o<t;)if(r[s++]=e[o++],s==this.blockSize){n(this,r),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var r={};function s(e){return-128<=e&&128>e?function(e,t){var n=r;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new i([0|e],0>e?-1:0)})):new i([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,i=t;0>=i.l(e);)n=y(n),i=y(i);var r=v(n,1),s=v(i,1);for(i=v(i,2),n=v(n,2);!u(i);){var c=s.add(i);0>=c.l(e)&&(r=r.add(n),s=c),i=v(i,1),n=v(n,1)}return t=f(e,r.j(t)),new g(r,t)}for(r=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=i)).j(t);u(s)&&(s=l),r=r.add(s),e=f(e,c)}return new g(r,e)}function y(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],o=0;o<r;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new i(s,e.h)}(e=i.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.i(n);e+=(0<=i?i:4294967296+i)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,i="";;){var r=m(n,t).g,s=((0<(n=f(n,r.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var o=r+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var l=this.i(r)>>>16,f=65535&this.i(r),g=e.i(s)>>>16,m=65535&e.i(s);n[2*r+2*s]+=f*m,p(n,2*r+2*s),n[2*r+2*s+1]+=l*m,p(n,2*r+2*s+1),n[2*r+2*s+1]+=f*g,p(n,2*r+2*s+1),n[2*r+2*s+2]+=l*g,p(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Gr=Yr.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=o,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=o(Math.pow(n,8)),r=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),r=r.j(l).add(o(c))):r=(r=r.j(i)).add(o(c))}return r},Kr=Yr.Integer=i}).apply("undefined"!==typeof Qr?Qr:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Xr,$r,Jr,Zr,es,ts,ns,is,rs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ss={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof rs&&rs];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,i){if(i)e:{var r=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in r))break e;r=r[o]}(i=i(s=r[e=e[e.length-1]]))!=s&&null!=i&&t(r,e,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e,t){return t}))}}));var i=i||{},r=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,i=t.length||0;e.length=n+i;for(let r=0;r<i;r++)e[n+r]=t[r]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=r.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)e[n]=i[n];for(let t=0;t<_.length;t++)n=_[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function x(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){r.setTimeout((()=>{throw e}),0)}function E(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var k=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new T),(e=>e.reset()));class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,I=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=k.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const e=r.Promise.resolve(void 0);C=()=>{e.then(O)}};var O=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){S(n)}var t=k;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function R(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};r.addEventListener("test",e,t),r.removeEventListener("test",e,t)}catch(n){}return e}();function M(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}h(M,P);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),F=0;function z(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ha=r,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=Array.prototype.indexOf.call(r,t,void 0);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function H(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==i)return r}return-1}V.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=H(e,t,i,r);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new z(t,this.src,s,!!i,r)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),W={};function K(e,t,n,i,r){if(i&&i.once)return Q(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,i,r);return null}return n=te(n),e&&e[j]?e.K(t,n,o(i)?!!i.capture:!!i,r):G(e,t,n,!1,i,r)}function G(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var a=o(r)?!!r.capture:!!r,l=Z(e);if(l||(e[q]=l=new V(e)),(n=l.add(t,n,i,a,s)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)D||(r=a),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent($(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function Q(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,i,r);return null}return n=te(n),e&&e[j]?e.L(t,n,o(i)?!!i.capture:!!i,r):G(e,t,n,!0,i,r)}function Y(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,i,r);else i=o(i)?!!i.capture:!!i,n=te(n),e&&e[j]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=H(s=e.g[t],n,i,r))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=H(t,n,i,r)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[j])B(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent($(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[q]=null)):U(e)}}}function $(e){return e in W?W[e]:W[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,i=e.ha||e.src;e.fa&&X(e),e=n.call(i,t)}return e}function Z(e){return(e=e[q])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new V(this),this.M=this,this.F=null}function ie(e,t){var n,i=e.F;if(i)for(n=[];i;i=i.F)n.push(i);if(e=e.M,i=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var r=t;w(t=new P(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=re(o,i,!0,t)&&r}if(r=re(o=t.g=e,i,!0,t)&&r,r=re(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=re(o=t.g=n[s],i,!1,t)&&r}function re(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(e.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:r.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,R),ne.prototype[j]=!0,ne.prototype.removeEventListener=function(e,t,n,i){Y(this,e,t,n,i)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)U(n[i]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},ne.prototype.L=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};class ae extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}h(le,R);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&X(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=r.JSON.stringify,de=r.JSON.parse,fe=class{stringify(e){return r.JSON.stringify(e,void 0)}parse(e){return r.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){P.call(this,"d")}function be(){P.call(this,"c")}h(ve,P),h(be,P);var _e={},we=null;function xe(){return we=we||new ne}function Se(e){P.call(this,_e.La,e)}function Ee(e){const t=xe();ie(t,new Se(t))}function ke(e,t){P.call(this,_e.STAT_EVENT,e),this.stat=t}function Te(e){const t=xe();ie(t,new ke(t,e))}function Ce(e,t){P.call(this,_e.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return r.setTimeout((function(){e()}),t)}function Ae(){this.g=!0}function Ne(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(i?" "+i:"")}))}_e.La="serverreachability",h(Se,P),_e.STAT_EVENT="statevent",h(ke,P),_e.Ma="timingevent",h(Ce,P),Ae.prototype.xa=function(){this.g=!1},Ae.prototype.info=function(){};var Oe,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Me(e,t,n,i){this.j=e,this.i=t,this.l=n,this.R=i||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}h(De,pe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Oe=new De;var je={},Fe={};function ze(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),He(e),e.A=ot(e.v);var n=e.A,i=e.R;Array.isArray(i)||(i=[String(i)]),kt(n.i,"t",i),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,i=e.ca;var r="readystatechange";Array.isArray(r)||(r&&(ce[0]=r.toString()),r=ce);for(var s=0;s<r.length;s++){var o=K(n,r[s],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,i,r,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?Fe:(n=Number(t.substring(n,i)),isNaN(n)?je:(i+=1)+n>t.length?Fe:(t=t.slice(i,i+n),e.C=i+n,t))}function He(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(c(e.ba,e),t)}function We(e){e.B&&(r.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var i=n.Da.g.parse(t)}catch(u){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Xt(n)}rn(n),Te(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(r=n.Da.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const r=c[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(i.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.ya=e,ut(i.I,i.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((i=n).qa=dn(i,i.J?i.ia:null,i.W),o.K){tt(i.h,o);var a=o,l=i.L;l&&(a.I=l),a.B&&(We(a),He(a)),i.g=o}else nn(i);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}Me.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Wt(e)?t.j():this.Y(e)},Me.prototype.Y=function(e){try{if(e==this.g)e:{const d=Wt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=d||7==t||Ee(),We(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var i=Kt(this.g);e="";var s=i.length,o=4==Wt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var a="";break t}this.h.i=new r.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:!(o&&t==s-1)});i.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,i,r,s,o){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Te(12),Ge(this),Ke(this);break e}Ne(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Fe){4==d&&(this.s=4,Te(14),n=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(e==je){this.s=4,Te(15),Ne(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ne(this.i,this.l,e,null),Qe(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Te(11))}}else Ne(this.i,this.l,a,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Ne(this.i,this.l,a,null),Qe(this,a);4==d&&Ge(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,He(this)))}else(function(e){const t={};e=(e.g&&2<=Wt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(p(e[i]))continue;var n=x(e[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[r]||[];t[r]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ge(this),Ke(this)}}}catch(os){}},Me.prototype.cancel=function(){this.J=!0,Ge(this)},Me.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ee(),Te(17)),Ge(this),this.s=2,Ke(this)):qe(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,r.PerformanceNavigationTiming?e=0<(e=r.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $e(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function it(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}(e),i=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length,o=0;o<r;o++)t.call(void 0,i[o],n&&n[o],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(rt))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),kt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,_t)),e.join("")};var gt,mt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,_t=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function St(e,t){xt(e),t=Tt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return xt(e),t=Tt(e,t),e.g.has(t)}function kt(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(Tt(e,t),d(n)),e.h+=n.length)}function Tt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(s){}}function It(){this.g=new fe}function At(e,t,n){const i=n||"";try{it(e,(function(e,n){let r=e;o(e)&&(r=he(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Ot(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Lt(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function jt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){xt(this),this.i=null,e=Tt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach((function(n,i){n.forEach((function(n){e.call(t,n,i,this)}),this)}),this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let e=0;e<r.length;e++)n.push(t[i])}return n},e.V=function(e){xt(this);let t=[];if("string"===typeof e)Et(this,e)&&(t=t.concat(this.g.get(Tt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,Et(this,e=Tt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const s=encodeURIComponent(String(i)),o=this.V(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),e.push(r)}}return this.i=e.join("&")},h(Nt,pe),Nt.prototype.g=function(){return new Ot(this.l,this.j)},Nt.prototype.i=(gt={},function(){return gt}),h(Ot,ne),(e=Ot.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||r).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof r.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):Dt(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Qa=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ot.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(jt,ne);var Ft=/^https?$/i,zt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),Ht(e)}function Vt(e){e.A||(e.A=!0,ie(e,"complete"),ie(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof i&&(!e.v[1]||4!=Wt(e)||2!=e.Z()))if(e.u&&4==Wt(e))se(e.Ea,0,e);else if(ie(e,"readystatechange"),4==Wt(e)){e.h=!1;try{const i=e.Z();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===i){var o=String(e.D).match(rt)[1]||null;!o&&r.self&&r.self.location&&(o=r.self.location.protocol.slice(0,-1)),s=!Ft.test(o?o.toLowerCase():"")}n=s}if(n)ie(e,"complete"),ie(e,"success");else{e.m=6;try{var a=2<Wt(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Vt(e)}}finally{Ht(e)}}}function Ht(e,t){if(e.g){qt(e);const i=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||ie(e,"ready");try{i.onreadystatechange=r}catch(n){}}}function qt(e){e.I&&(r.clearTimeout(e.I),e.I=null)}function Wt(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(cs){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new It,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if($t(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Me(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(t.v.toString(),"")}catch(i){}!n&&r.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),He(t)}hn(e)}function Xt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function $t(e){Xt(e),e.u&&(r.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&r.clearTimeout(e.s),e.s=null)}function Jt(e){if(!$e(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||N(),I||(C(),I=!0),A.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const i=ot(e.I);ut(i,"SID",e.K),ut(i,"RID",n),ut(i,"AID",e.T),en(e,i),e.m&&e.o&&Lt(i,e.m,e.o),n=new Me(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),ze(n,i,t)}function en(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&it({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var i=e.l?c(e.l.Na,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=t,0>n)t=Math.max(0,r[o].g-100),s=!1;else try{At(a,e,"req"+n+"_")}catch(os){i&&i(a)}}if(s){i=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,i}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||N(),I||(C(),I=!0),A.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(r.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Me(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ue(n,e)}function an(e){null!=e.C&&(r.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var i=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),i=1}if(0!=e.G)if(t.o)if(1==i){n=t.m?t.m.length:0,t=Date.now()-t.F;var r=e.B;ie(i=xe(),new Ce(i,n)),Jt(e)}else nn(e);else if(3==(r=t.s)||0==r&&0<t.X||!(1==i&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==i&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),r){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),i=e.Xa;const t=!i;i=new st(i||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||at(i,"https"),ht(i),t?function(e,t){const n=new Ae;if(r.Image){const i=new Image;i.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,i),i.onerror=u(Ct,n,"TestLoadImage: error",!1,t,i),i.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,i),i.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,i),r.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(i.toString(),n):function(e,t){new Ae;const n=new AbortController,i=setTimeout((()=>{n.abort(),Ct(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(i),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)})).catch((()=>{clearTimeout(i),Ct(0,0,!1,t)}))}(i.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),hn(e),$t(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var i=n instanceof st?ot(n):new st(n);if(""!=i.g)t&&(i.g=t+"."+i.g),lt(i,i.s);else{var s=r.location;i=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);i&&at(o,i),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),i=o}return n=e.D,t=e.ya,n&&t&&ut(i,n,t),ut(i,"VER",e.la),en(e,i),i}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new jt(new Nt({eb:n})):new jt(e.pa)).Ha(e.J),t}function pn(){}function gn(){}function mn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=jt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oe.g(),this.v=this.o?ge(this.o):ge(Oe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Ut(this,o)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=r.FormData&&e instanceof r.FormData,!(0<=Array.prototype.indexOf.call(zt,t,void 0))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,a]of n)this.g.setRequestHeader(r,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Ut(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,ie(this,"complete"),ie(this,"abort"),Ht(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ht(this,!0)),jt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,i){Te(0),this.W=e,this.H=t||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.I=dn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const r=new Me(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(r.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,r,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Mt(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,r),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),r.T=!0,ze(r,n,null)):ze(r,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||$e(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Xt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Xt(this),rn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},gn.prototype.g=function(e,t){return new mn(e,t)},h(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Yt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Jt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,mn.aa.N.call(this)},h(yn,ve),h(vn,be),h(bn,pn),bn.prototype.ua=function(){ie(this.g,"a")},bn.prototype.ta=function(e){ie(this.g,new yn(e))},bn.prototype.sa=function(e){ie(this.g,new vn)},bn.prototype.ra=function(){ie(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,is=ss.createWebChannelTransport=function(){return new gn},ns=ss.getStatEventTarget=function(){return xe()},ts=ss.Event=_e,es=ss.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,Zr=ss.ErrorCode=Re,Pe.COMPLETE="complete",Jr=ss.EventType=Pe,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,$r=ss.WebChannel=me,ss.FetchXmlHttpFactory=Nt,jt.prototype.listenOnce=jt.prototype.L,jt.prototype.getLastError=jt.prototype.Ka,jt.prototype.getLastErrorCode=jt.prototype.Ba,jt.prototype.getStatus=jt.prototype.Z,jt.prototype.getResponseJson=jt.prototype.Oa,jt.prototype.getResponseText=jt.prototype.oa,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Ha,Xr=ss.XhrIo=jt}).apply("undefined"!==typeof rs?rs:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const os="@firebase/firestore";class as{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}as.UNAUTHENTICATED=new as(null),as.GOOGLE_CREDENTIALS=new as("google-credentials-uid"),as.FIRST_PARTY=new as("first-party-uid"),as.MOCK_USER=new as("mock-user");let ls="10.14.0";const cs=new Ii("@firebase/firestore");function us(){return cs.logLevel}function hs(e){if(cs.logLevel<=Si.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(ps);cs.debug("Firestore (".concat(ls,"): ").concat(e),...r)}}function ds(e){if(cs.logLevel<=Si.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(ps);cs.error("Firestore (".concat(ls,"): ").concat(e),...r)}}function fs(e){if(cs.logLevel<=Si.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(ps);cs.warn("Firestore (".concat(ls,"): ").concat(e),...r)}}function ps(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function gs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(ls,") INTERNAL ASSERTION FAILED: ")+e;throw ds(t),new Error(t)}function ms(e,t){e||gs()}function ys(e,t){return e}const vs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bs extends ai{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class _s{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ws{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class xs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(as.UNAUTHENTICATED)))}shutdown(){}}class Ss{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Es{constructor(e){this.t=e,this.currentUser=as.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ms(void 0===this.o);let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new _s;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new _s,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},o=e=>{hs("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(hs("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new _s)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(hs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ms("string"==typeof t.accessToken),new ws(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ms(null===e||"string"==typeof e),new as(e)}}class ks{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=as.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ts{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new ks(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(as.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Is{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ms(void 0===this.o);const n=e=>{null!=e.error&&hs("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,hs("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{hs("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?i(e):hs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(ms("string"==typeof e.token),this.R=e.token,new Cs(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function As(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}class Ns{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const i=As(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<t&&(n+=e.charAt(i[r]%62))}return n}}function Os(e,t){return e<t?-1:e>t?1:0}function Rs(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}class Ps{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new bs(vs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new bs(vs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new bs(vs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new bs(vs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ps.fromMillis(Date.now())}static fromDate(e){return Ps.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ps(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Os(this.nanoseconds,e.nanoseconds):Os(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ds{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ds(e)}static min(){return new Ds(new Ps(0,0))}static max(){return new Ds(new Ps(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ms{constructor(e,t,n){void 0===t?t=0:t>e.length&&gs(),void 0===n?n=e.length-t:n>e.length-t&&gs(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ms.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ms?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ls extends Ms{construct(e,t,n){return new Ls(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new bs(vs.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));e.push(...r.split("/").filter((e=>e.length>0)))}return new Ls(e)}static emptyPath(){return new Ls([])}}const js=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fs extends Ms{construct(e,t,n){return new Fs(e,t,n)}static isValidIdentifier(e){return js.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fs.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fs(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new bs(vs.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new bs(vs.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new bs(vs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(s=!s,i++):"."!==t||s?(n+=t,i++):(r(),i++)}if(r(),s)throw new bs(vs.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fs(t)}static emptyPath(){return new Fs([])}}class zs{constructor(e){this.path=e}static fromPath(e){return new zs(Ls.fromString(e))}static fromName(e){return new zs(Ls.fromString(e).popFirst(5))}static empty(){return new zs(Ls.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ls.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ls.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zs(new Ls(e.slice()))}}class Us{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}Us.UNKNOWN_ID=-1;function Vs(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Ds.fromTimestamp(1e9===i?new Ps(n+1,0):new Ps(n,i));return new Hs(r,zs.empty(),t)}function Bs(e){return new Hs(e.readTime,e.key,-1)}class Hs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Hs(Ds.min(),zs.empty(),-1)}static max(){return new Hs(Ds.max(),zs.empty(),-1)}}function qs(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=zs.comparator(e.documentKey,t.documentKey),0!==n?n:Os(e.largestBatchId,t.largestBatchId))}const Ws="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ks{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Gs(e){if(e.code!==vs.FAILED_PRECONDITION||e.message!==Ws)throw e;hs("LocalStore","Unexpectedly lost primary lease")}class Qs{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Qs(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Qs?t:Qs.resolve(t)}catch(e){return Qs.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Qs.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Qs.reject(t)}static resolve(e){return new Qs(((t,n)=>{t(e)}))}static reject(e){return new Qs(((t,n)=>{n(e)}))}static waitFor(e){return new Qs(((t,n)=>{let i=0,r=0,s=!1;e.forEach((e=>{++i,e.next((()=>{++r,s&&r===i&&t()}),(e=>n(e)))})),s=!0,r===i&&t()}))}static or(e){let t=Qs.resolve(!1);for(const n of e)t=t.next((e=>e?Qs.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}static mapArray(e,t){return new Qs(((n,i)=>{const r=e.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===r&&n(s)}),(e=>i(e)))}}))}static doWhile(e,t){return new Qs(((n,i)=>{const r=()=>{!0===e()?t().next((()=>{r()}),i):n()};r()}))}}function Ys(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xs(e){return"IndexedDbTransactionError"===e.name}class $s{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Js(e){return null==e}function Zs(e){return 0===e&&1/e==-1/0}function eo(e){return"number"==typeof e&&Number.isInteger(e)&&!Zs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}$s.oe=-1;const to=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],no=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],io=no,ro=[...io,"indexConfiguration","indexState","indexEntries"];function so(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function oo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ao(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class lo{constructor(e,t){this.comparator=e,this.root=t||uo.EMPTY}insert(e,t){return new lo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,uo.BLACK,null,null))}remove(e){return new lo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,uo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new co(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new co(this.root,e,this.comparator,!1)}getReverseIterator(){return new co(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new co(this.root,e,this.comparator,!0)}}class co{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class uo{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:uo.RED,this.left=null!=i?i:uo.EMPTY,this.right=null!=r?r:uo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new uo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return uo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return uo.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,uo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,uo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gs();if(this.right.isRed())throw gs();const e=this.left.check();if(e!==this.right.check())throw gs();return e+(this.isRed()?0:1)}}uo.EMPTY=null,uo.RED=!0,uo.BLACK=!1,uo.EMPTY=new class{constructor(){this.size=0}get key(){throw gs()}get value(){throw gs()}get color(){throw gs()}get left(){throw gs()}get right(){throw gs()}copy(e,t,n,i,r){return this}insert(e,t,n){return new uo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ho{constructor(e){this.comparator=e,this.data=new lo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fo(this.data.getIterator())}getIteratorFrom(e){return new fo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof ho))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ho(this.comparator);return t.data=e,t}}class fo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class po{constructor(e){this.fields=e,e.sort(Fs.comparator)}static empty(){return new po([])}unionWith(e){let t=new ho(Fs.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new po(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rs(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class go extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class mo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new go("Invalid base64 string: "+e):e}}(e);return new mo(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new mo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Os(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mo.EMPTY_BYTE_STRING=new mo("");const yo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vo(e){if(ms(!!e),"string"==typeof e){let t=0;const n=yo.exec(e);if(ms(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:bo(e.seconds),nanos:bo(e.nanos)}}function bo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function _o(e){return"string"==typeof e?mo.fromBase64String(e):mo.fromUint8Array(e)}function wo(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function xo(e){const t=e.mapValue.fields.__previous_value__;return wo(t)?xo(t):t}function So(e){const t=vo(e.mapValue.fields.__local_write_time__.timestampValue);return new Ps(t.seconds,t.nanos)}class Eo{constructor(e,t,n,i,r,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class ko{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ko("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ko&&e.projectId===this.projectId&&e.database===this.database}}const To={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Co(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?wo(e)?4:Ho(e)?9007199254740991:Vo(e)?10:11:gs()}function Io(e,t){if(e===t)return!0;const n=Co(e);if(n!==Co(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return So(e).isEqual(So(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=vo(e.timestampValue),i=vo(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return _o(e.bytesValue).isEqual(_o(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return bo(e.geoPointValue.latitude)===bo(t.geoPointValue.latitude)&&bo(e.geoPointValue.longitude)===bo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return bo(e.integerValue)===bo(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=bo(e.doubleValue),i=bo(t.doubleValue);return n===i?Zs(n)===Zs(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return Rs(e.arrayValue.values||[],t.arrayValue.values||[],Io);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(so(n)!==so(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Io(n[r],i[r])))return!1;return!0}(e,t);default:return gs()}}function Ao(e,t){return void 0!==(e.values||[]).find((e=>Io(e,t)))}function No(e,t){if(e===t)return 0;const n=Co(e),i=Co(t);if(n!==i)return Os(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Os(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=bo(e.integerValue||e.doubleValue),i=bo(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return Oo(e.timestampValue,t.timestampValue);case 4:return Oo(So(e),So(t));case 5:return Os(e.stringValue,t.stringValue);case 6:return function(e,t){const n=_o(e),i=_o(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let r=0;r<n.length&&r<i.length;r++){const e=Os(n[r],i[r]);if(0!==e)return e}return Os(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Os(bo(e.latitude),bo(t.latitude));return 0!==n?n:Os(bo(e.longitude),bo(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ro(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,i,r,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o.value)||void 0===n?void 0:n.arrayValue,c=null===(i=a.value)||void 0===i?void 0:i.arrayValue,u=Os((null===(r=null==l?void 0:l.values)||void 0===r?void 0:r.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Ro(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===To.mapValue&&t===To.mapValue)return 0;if(e===To.mapValue)return 1;if(t===To.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const e=Os(i[o],s[o]);if(0!==e)return e;const t=No(n[i[o]],r[s[o]]);if(0!==t)return t}return Os(i.length,s.length)}(e.mapValue,t.mapValue);default:throw gs()}}function Oo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Os(e,t);const n=vo(e),i=vo(t),r=Os(n.seconds,i.seconds);return 0!==r?r:Os(n.nanos,i.nanos)}function Ro(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const e=No(n[r],i[r]);if(e)return e}return Os(n.length,i.length)}function Po(e){return Do(e)}function Do(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=vo(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return _o(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return zs.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=Do(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+="".concat(r,":").concat(Do(e.fields[r]));return n+"}"}(e.mapValue):gs()}function Mo(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Lo(e){return!!e&&"integerValue"in e}function jo(e){return!!e&&"arrayValue"in e}function Fo(e){return!!e&&"nullValue"in e}function zo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Uo(e){return!!e&&"mapValue"in e}function Vo(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bo(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return oo(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Bo(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Bo(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ho(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class qo{constructor(e){this.value=e}static empty(){return new qo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Uo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bo(t)}setAll(e){let t=Fs.emptyPath(),n={},i=[];e.forEach(((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=Bo(e):i.push(r.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());Uo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Io(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Uo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){oo(t,((t,n)=>e[t]=n));for(const i of n)delete e[i]}clone(){return new qo(Bo(this.value))}}function Wo(e){const t=[];return oo(e.fields,((e,n)=>{const i=new Fs([e]);if(Uo(n)){const e=Wo(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new po(t)}class Ko{constructor(e,t,n,i,r,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Ko(e,0,Ds.min(),Ds.min(),Ds.min(),qo.empty(),0)}static newFoundDocument(e,t,n,i){return new Ko(e,1,t,Ds.min(),n,i,0)}static newNoDocument(e,t){return new Ko(e,2,t,Ds.min(),Ds.min(),qo.empty(),0)}static newUnknownDocument(e,t){return new Ko(e,3,t,Ds.min(),Ds.min(),qo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ds.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ds.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ko&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ko(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Go{constructor(e,t){this.position=e,this.inclusive=t}}function Qo(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(i=s.field.isKeyField()?zs.comparator(zs.fromName(o.referenceValue),n.key):No(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Yo(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Io(e.position[n],t.position[n]))return!1;return!0}class Xo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function $o(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Jo{}class Zo extends Jo{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new aa(e,t,n):"array-contains"===t?new ha(e,n):"in"===t?new da(e,n):"not-in"===t?new fa(e,n):"array-contains-any"===t?new pa(e,n):new Zo(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new la(e,n):new ca(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(No(t,this.value)):null!==t&&Co(this.value)===Co(t)&&this.matchesComparison(No(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gs()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ea extends Jo{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ea(e,t)}matches(e){return ta(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ta(e){return"and"===e.op}function na(e){return ia(e)&&ta(e)}function ia(e){for(const t of e.filters)if(t instanceof ea)return!1;return!0}function ra(e){if(e instanceof Zo)return e.field.canonicalString()+e.op.toString()+Po(e.value);if(na(e))return e.filters.map((e=>ra(e))).join(",");{const t=e.filters.map((e=>ra(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function sa(e,t){return e instanceof Zo?function(e,t){return t instanceof Zo&&e.op===t.op&&e.field.isEqual(t.field)&&Io(e.value,t.value)}(e,t):e instanceof ea?function(e,t){return t instanceof ea&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,i)=>e&&sa(n,t.filters[i])),!0)}(e,t):void gs()}function oa(e){return e instanceof Zo?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Po(e.value))}(e):e instanceof ea?function(e){return e.op.toString()+" {"+e.getFilters().map(oa).join(" ,")+"}"}(e):"Filter"}class aa extends Zo{constructor(e,t,n){super(e,t,n),this.key=zs.fromName(n.referenceValue)}matches(e){const t=zs.comparator(e.key,this.key);return this.matchesComparison(t)}}class la extends Zo{constructor(e,t){super(e,"in",t),this.keys=ua("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ca extends Zo{constructor(e,t){super(e,"not-in",t),this.keys=ua("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ua(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>zs.fromName(e.referenceValue)))}class ha extends Zo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jo(t)&&Ao(t.arrayValue,this.value)}}class da extends Zo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ao(this.value.arrayValue,t)}}class fa extends Zo{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ao(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ao(this.value.arrayValue,t)}}class pa extends Zo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jo(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ao(this.value.arrayValue,e)))}}class ga{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ue=null}}function ma(e){return new ga(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ya(e){const t=ys(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ra(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Js(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Po(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Po(e))).join(",")),t.ue=e}return t.ue}function va(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!$o(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!sa(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Yo(e.startAt,t.startAt)&&Yo(e.endAt,t.endAt)}function ba(e){return zs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class _a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function wa(e,t,n,i,r,s,o,a){return new _a(e,t,n,i,r,s,o,a)}function xa(e){return new _a(e)}function Sa(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ea(e){return null!==e.collectionGroup}function ka(e){const t=ys(e);if(null===t.ce){t.ce=[];const e=new Set;for(const r of t.explicitOrderBy)t.ce.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",i=function(e){let t=new ho(Fs.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);i.forEach((i=>{e.has(i.canonicalString())||i.isKeyField()||t.ce.push(new Xo(i,n))})),e.has(Fs.keyField().canonicalString())||t.ce.push(new Xo(Fs.keyField(),n))}return t.ce}function Ta(e){const t=ys(e);return t.le||(t.le=Ca(t,ka(e))),t.le}function Ca(e,t){if("F"===e.limitType)return ma(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Xo(e.field,t)}));const n=e.endAt?new Go(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Go(e.startAt.position,e.startAt.inclusive):null;return ma(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Ia(e,t){const n=e.filters.concat([t]);return new _a(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Aa(e,t,n){return new _a(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Na(e,t){return va(Ta(e),Ta(t))&&e.limitType===t.limitType}function Oa(e){return"".concat(ya(Ta(e)),"|lt:").concat(e.limitType)}function Ra(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>oa(e))).join(", "),"]")),Js(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Po(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Po(e))).join(",")),"Target(".concat(t,")")}(Ta(e)),"; limitType=").concat(e.limitType,")")}function Pa(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):zs.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ka(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=Qo(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,ka(e),t))&&!(e.endAt&&!function(e,t,n){const i=Qo(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,ka(e),t))}(e,t)}function Da(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ma(e){return(t,n)=>{let i=!1;for(const r of ka(e)){const e=La(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function La(e,t,n){const i=e.field.isKeyField()?zs.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?No(i,r):gs()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return gs()}}class ja{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){oo(this.inner,((t,n)=>{for(const[i,r]of n)e(i,r)}))}isEmpty(){return ao(this.inner)}size(){return this.innerSize}}const Fa=new lo(zs.comparator);function za(){return Fa}const Ua=new lo(zs.comparator);function Va(){let e=Ua;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.insert(r.key,r);return e}function Ba(e){let t=Ua;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Ha(){return Wa()}function qa(){return Wa()}function Wa(){return new ja((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Ka=new lo(zs.comparator),Ga=new ho(zs.comparator);function Qa(){let e=Ga;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.add(r);return e}const Ya=new ho(Os);function Xa(){return Ya}function $a(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zs(t)?"-0":t}}function Ja(e){return{integerValue:""+e}}function Za(e,t){return eo(t)?Ja(t):$a(e,t)}class el{constructor(){this._=void 0}}function tl(e,t,n){return e instanceof rl?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&wo(t)&&(t=xo(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof sl?ol(e,t):e instanceof al?ll(e,t):function(e,t){const n=il(e,t),i=ul(n)+ul(e.Pe);return Lo(n)&&Lo(e.Pe)?Ja(i):$a(e.serializer,i)}(e,t)}function nl(e,t,n){return e instanceof sl?ol(e,t):e instanceof al?ll(e,t):n}function il(e,t){return e instanceof cl?function(e){return Lo(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class rl extends el{}class sl extends el{constructor(e){super(),this.elements=e}}function ol(e,t){const n=hl(t);for(const i of e.elements)n.some((e=>Io(e,i)))||n.push(i);return{arrayValue:{values:n}}}class al extends el{constructor(e){super(),this.elements=e}}function ll(e,t){let n=hl(t);for(const i of e.elements)n=n.filter((e=>!Io(e,i)));return{arrayValue:{values:n}}}class cl extends el{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ul(e){return bo(e.integerValue||e.doubleValue)}function hl(e){return jo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class dl{constructor(e,t){this.version=e,this.transformResults=t}}class fl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fl}static exists(e){return new fl(void 0,e)}static updateTime(e){return new fl(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class gl{}function ml(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Tl(e.key,fl.none()):new wl(e.key,e.data,fl.none());{const n=e.data,i=qo.empty();let r=new ho(Fs.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new xl(e.key,i,new po(r.toArray()),fl.none())}}function yl(e,t,n){e instanceof wl?function(e,t,n){const i=e.value.clone(),r=El(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof xl?function(e,t,n){if(!pl(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=El(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(Sl(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function vl(e,t,n,i){return e instanceof wl?function(e,t,n,i){if(!pl(e.precondition,t))return n;const r=e.value.clone(),s=kl(e.fieldTransforms,i,t);return r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof xl?function(e,t,n,i){if(!pl(e.precondition,t))return n;const r=kl(e.fieldTransforms,i,t),s=t.data;return s.setAll(Sl(e)),s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,i):function(e,t,n){return pl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function bl(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),r=il(i.transform,e||null);null!=r&&(null===n&&(n=qo.empty()),n.set(i.field,r))}return n||null}function _l(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Rs(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof sl&&t instanceof sl||e instanceof al&&t instanceof al?Rs(e.elements,t.elements,Io):e instanceof cl&&t instanceof cl?Io(e.Pe,t.Pe):e instanceof rl&&t instanceof rl}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class wl extends gl{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class xl extends gl{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Sl(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function El(e,t,n){const i=new Map;ms(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,nl(o,a,n[r]))}return i}function kl(e,t,n){const i=new Map;for(const r of e){const e=r.transform,s=n.data.field(r.field);i.set(r.field,tl(e,s,t))}return i}class Tl extends gl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cl extends gl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Il{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const t=this.mutations[i];t.key.isEqual(e.key)&&yl(t,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=vl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=vl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=qa();return this.mutations.forEach((i=>{const r=e.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=t.has(i.key)?null:o;const a=ml(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(Ds.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Qa())}isEqual(e){return this.batchId===e.batchId&&Rs(this.mutations,e.mutations,((e,t)=>_l(e,t)))&&Rs(this.baseMutations,e.baseMutations,((e,t)=>_l(e,t)))}}class Al{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){ms(e.mutations.length===n.length);let i=Ka;const r=e.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new Al(e,t,n,i)}}class Nl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Ol{constructor(e,t){this.count=e,this.unchangedNames=t}}var Rl,Pl;function Dl(e){switch(e){default:return gs();case vs.CANCELLED:case vs.UNKNOWN:case vs.DEADLINE_EXCEEDED:case vs.RESOURCE_EXHAUSTED:case vs.INTERNAL:case vs.UNAVAILABLE:case vs.UNAUTHENTICATED:return!1;case vs.INVALID_ARGUMENT:case vs.NOT_FOUND:case vs.ALREADY_EXISTS:case vs.PERMISSION_DENIED:case vs.FAILED_PRECONDITION:case vs.ABORTED:case vs.OUT_OF_RANGE:case vs.UNIMPLEMENTED:case vs.DATA_LOSS:return!0}}function Ml(e){if(void 0===e)return ds("GRPC error has no .code"),vs.UNKNOWN;switch(e){case Rl.OK:return vs.OK;case Rl.CANCELLED:return vs.CANCELLED;case Rl.UNKNOWN:return vs.UNKNOWN;case Rl.DEADLINE_EXCEEDED:return vs.DEADLINE_EXCEEDED;case Rl.RESOURCE_EXHAUSTED:return vs.RESOURCE_EXHAUSTED;case Rl.INTERNAL:return vs.INTERNAL;case Rl.UNAVAILABLE:return vs.UNAVAILABLE;case Rl.UNAUTHENTICATED:return vs.UNAUTHENTICATED;case Rl.INVALID_ARGUMENT:return vs.INVALID_ARGUMENT;case Rl.NOT_FOUND:return vs.NOT_FOUND;case Rl.ALREADY_EXISTS:return vs.ALREADY_EXISTS;case Rl.PERMISSION_DENIED:return vs.PERMISSION_DENIED;case Rl.FAILED_PRECONDITION:return vs.FAILED_PRECONDITION;case Rl.ABORTED:return vs.ABORTED;case Rl.OUT_OF_RANGE:return vs.OUT_OF_RANGE;case Rl.UNIMPLEMENTED:return vs.UNIMPLEMENTED;case Rl.DATA_LOSS:return vs.DATA_LOSS;default:return gs()}}(Pl=Rl||(Rl={}))[Pl.OK=0]="OK",Pl[Pl.CANCELLED=1]="CANCELLED",Pl[Pl.UNKNOWN=2]="UNKNOWN",Pl[Pl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pl[Pl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pl[Pl.NOT_FOUND=5]="NOT_FOUND",Pl[Pl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pl[Pl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pl[Pl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pl[Pl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pl[Pl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pl[Pl.ABORTED=10]="ABORTED",Pl[Pl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pl[Pl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pl[Pl.INTERNAL=13]="INTERNAL",Pl[Pl.UNAVAILABLE=14]="UNAVAILABLE",Pl[Pl.DATA_LOSS=15]="DATA_LOSS";let Ll=null;function jl(){return new TextEncoder}const Fl=new Kr([4294967295,4294967295],0);function zl(e){const t=jl().encode(e),n=new Gr;return n.update(t),new Uint8Array(n.digest())}function Ul(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Kr([n,i],0),new Kr([r,s],0)]}class Vl{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Bl("Invalid padding: ".concat(t));if(n<0)throw new Bl("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Bl("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Bl("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Kr.fromNumber(this.Ie)}Ee(e,t,n){let i=e.add(t.multiply(Kr.fromNumber(n)));return 1===i.compare(Fl)&&(i=new Kr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=zl(e),[n,i]=Ul(t);for(let r=0;r<this.hashCount;r++){const e=this.Ee(n,i,r);if(!this.de(e))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),s=new Vl(r,i,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=zl(e),[n,i]=Ul(t);for(let r=0;r<this.hashCount;r++){const e=this.Ee(n,i,r);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Hl{constructor(e,t,n,i,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,ql.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Hl(Ds.min(),i,new lo(Os),za(),Qa())}}class ql{constructor(e,t,n,i,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ql(n,t,Qa(),Qa(),Qa())}}class Wl{constructor(e,t,n,i){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=i}}class Kl{constructor(e,t){this.targetId=e,this.me=t}}class Gl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mo.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Ql{constructor(){this.fe=0,this.ge=$l(),this.pe=mo.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Qa(),t=Qa(),n=Qa();return this.ge.forEach(((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:gs()}})),new ql(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=$l()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ms(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Yl{constructor(e){this.Le=e,this.Be=new Map,this.ke=za(),this.qe=Xl(),this.Qe=new lo(Os)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:gs()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,i=this.Je(t);if(i){const r=i.target;if(ba(r))if(0===n){const e=new zs(r.path);this.Ue(t,e,Ko.newNoDocument(e,Ds.min()))}else ms(1===n);else{const i=this.Ye(t);if(i!==n){const n=this.Ze(e),r=n?this.Xe(n,e,i):1;if(0!==r){this.je(t);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Ll||Ll.et(function(e,t,n,i,r){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===r,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==i?void 0:i.mightContain(e))&&void 0!==t&&t}}),h}(i,e.me,this.Le.tt(),n,r))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=t;let s,o;try{s=_o(n).toUint8Array()}catch(e){if(e instanceof go)return fs("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Vl(s,i,r)}catch(e){return fs(e instanceof Bl?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let i=0;return n.forEach((n=>{const r=this.Le.tt(),s="projects/".concat(r.projectId,"/databases/").concat(r.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),i++)})),i}rt(e){const t=new Map;this.Be.forEach(((n,i)=>{const r=this.Je(i);if(r){if(n.current&&ba(r.target)){const t=new zs(r.target.path);null!==this.ke.get(t)||this.it(i,t)||this.Ue(i,t,Ko.newNoDocument(t,e))}n.be&&(t.set(i,n.ve()),n.Ce())}}));let n=Qa();this.qe.forEach(((e,t)=>{let i=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(i=!1,!1)})),i&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const i=new Hl(e,t,this.Qe,this.ke,n);return this.ke=za(),this.qe=Xl(),this.Qe=new lo(Os),i}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ql,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ho(Os),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||hs("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ql),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Xl(){return new lo(zs.comparator)}function $l(){return new lo(zs.comparator)}const Jl={asc:"ASCENDING",desc:"DESCENDING"},Zl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ec={and:"AND",or:"OR"};class tc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nc(e,t){return e.useProto3Json||Js(t)?t:{value:t}}function ic(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function rc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function sc(e,t){return ic(e,t.toTimestamp())}function oc(e){return ms(!!e),Ds.fromTimestamp(function(e){const t=vo(e);return new Ps(t.seconds,t.nanos)}(e))}function ac(e,t){return lc(e,t).canonicalString()}function lc(e,t){const n=function(e){return new Ls(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function cc(e){const t=Ls.fromString(e);return ms(Ac(t)),t}function uc(e,t){return ac(e.databaseId,t.path)}function hc(e,t){const n=cc(t);if(n.get(1)!==e.databaseId.projectId)throw new bs(vs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bs(vs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new zs(gc(n))}function dc(e,t){return ac(e.databaseId,t)}function fc(e){const t=cc(e);return 4===t.length?Ls.emptyPath():gc(t)}function pc(e){return new Ls(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function gc(e){return ms(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function mc(e,t,n){return{name:uc(e,t),fields:n.value.mapValue.fields}}function yc(e,t){let n;if(t instanceof wl)n={update:mc(e,t.key,t.value)};else if(t instanceof Tl)n={delete:uc(e,t.key)};else if(t instanceof xl)n={update:mc(e,t.key,t.data),updateMask:Ic(t.fieldMask)};else{if(!(t instanceof Cl))return gs();n={verify:uc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof rl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof sl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof al)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof cl)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw gs()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:sc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:gs()}(e,t.precondition)),n}function vc(e,t){return{documents:[dc(e,t.path)]}}function bc(e,t){const n={structuredQuery:{}},i=t.path;let r;null!==t.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=dc(e,r);const s=function(e){if(0!==e.length)return Cc(ea.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:kc(e.field),direction:xc(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=nc(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:r}}function _c(e){let t=fc(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ms(1===i);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=wc(e);return t instanceof ea&&na(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Xo(Tc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Js(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Go(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Go(n,t)}(n.endAt)),wa(t,r,o,s,a,"F",l,c)}function wc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Tc(e.unaryFilter.field);return Zo.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Tc(e.unaryFilter.field);return Zo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Tc(e.unaryFilter.field);return Zo.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Tc(e.unaryFilter.field);return Zo.create(r,"!=",{nullValue:"NULL_VALUE"});default:return gs()}}(e):void 0!==e.fieldFilter?function(e){return Zo.create(Tc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gs()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ea.create(e.compositeFilter.filters.map((e=>wc(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return gs()}}(e.compositeFilter.op))}(e):gs()}function xc(e){return Jl[e]}function Sc(e){return Zl[e]}function Ec(e){return ec[e]}function kc(e){return{fieldPath:e.canonicalString()}}function Tc(e){return Fs.fromServerFormat(e.fieldPath)}function Cc(e){return e instanceof Zo?function(e){if("=="===e.op){if(zo(e.value))return{unaryFilter:{field:kc(e.field),op:"IS_NAN"}};if(Fo(e.value))return{unaryFilter:{field:kc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zo(e.value))return{unaryFilter:{field:kc(e.field),op:"IS_NOT_NAN"}};if(Fo(e.value))return{unaryFilter:{field:kc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kc(e.field),op:Sc(e.op),value:e.value}}}(e):e instanceof ea?function(e){const t=e.getFilters().map((e=>Cc(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ec(e.op),filters:t}}}(e):gs()}function Ic(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Ac(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Nc{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ds.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ds.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:mo.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Nc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Nc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Oc{constructor(e){this.ct=e}}function Rc(e){const t=_c({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Aa(t,t.limit,"L"):t}class Pc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(bo(e.integerValue));else if("doubleValue"in e){const n=bo(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Zs(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=vo(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(_o(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Ho(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Vo(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):gs()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const i of Object.keys(n))this.Vt(i,t),this.Tt(n[i],t)}wt(e,t){var n,i;const r=e.fields||{};this.dt(t,53);const s="value",o=(null===(i=null===(n=r[s].arrayValue)||void 0===n?void 0:n.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(bo(o)),this.Vt(s,t),this.Tt(r[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const i of n)this.Tt(i,t)}yt(e,t){this.dt(t,37),zs.fromName(e).path.forEach((e=>{this.dt(t,60),this.Dt(e,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}Pc.vt=new Pc;class Dc{constructor(){this.un=new Mc}addToCollectionParentIndex(e,t){return this.un.add(t),Qs.resolve()}getCollectionParents(e,t){return Qs.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Qs.resolve()}deleteFieldIndex(e,t){return Qs.resolve()}deleteAllFieldIndexes(e){return Qs.resolve()}createTargetIndexes(e,t){return Qs.resolve()}getDocumentsMatchingTarget(e,t){return Qs.resolve(null)}getIndexType(e,t){return Qs.resolve(0)}getFieldIndexes(e,t){return Qs.resolve([])}getNextCollectionGroupToUpdate(e){return Qs.resolve(null)}getMinOffset(e,t){return Qs.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,t){return Qs.resolve(Hs.min())}updateCollectionGroup(e,t,n){return Qs.resolve()}updateIndexEntries(e,t){return Qs.resolve()}}class Mc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new ho(Ls.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new ho(Ls.comparator)).toArray()}}new Uint8Array(0);class Lc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Lc(e,Lc.DEFAULT_COLLECTION_PERCENTILE,Lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Lc.DEFAULT_COLLECTION_PERCENTILE=10,Lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lc.DEFAULT=new Lc(41943040,Lc.DEFAULT_COLLECTION_PERCENTILE,Lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lc.DISABLED=new Lc(-1,0,0);class jc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new jc(0)}static kn(){return new jc(-1)}}class Fc{constructor(){this.changes=new ja((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ko.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Qs.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zc{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Uc{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&vl(n.mutation,e,po.empty(),Ps.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Qa()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qa();const i=Ha();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((e=>{let t=Va();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Ha();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Qa())))}populateOverlays(e,t,n){const i=[];return n.forEach((e=>{t.has(e)||i.push(e)})),this.documentOverlayCache.getOverlays(e,i).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,i){let r=za();const s=Wa(),o=Wa();return t.forEach(((e,t)=>{const o=n.get(t.key);i.has(t.key)&&(void 0===o||o.mutation instanceof xl)?r=r.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),vl(o.mutation,t,o.mutation.getFieldMask(),Ps.now())):s.set(t.key,po.empty())})),this.recalculateAndSaveOverlays(e,r).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new zc(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Wa();let i=new lo(((e,t)=>e-t)),r=Qa();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const r of e)r.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||po.empty();o=r.applyToLocalView(s,o),n.set(e,o);const a=(i.get(r.batchId)||Qa()).add(e);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,l=i.value,c=qa();l.forEach((e=>{if(!r.has(e)){const i=ml(t.get(e),n.get(e));null!==i&&c.set(e,i),r=r.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Qs.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,i){return function(e){return zs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ea(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):Qs.resolve(Ha());let o=-1,a=r;return s.next((t=>Qs.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(t)?Qs.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,r))).next((()=>this.computeViews(e,a,t,Qa()))).next((e=>({batchId:o,changes:Ba(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new zs(t)).next((e=>{let t=Va();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const r=t.collectionGroup;let s=Va();return this.indexManager.getCollectionParents(e,r).next((o=>Qs.forEach(o,(o=>{const a=function(e,t){return new _a(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,a,n,i).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,i)))).next((e=>{r.forEach(((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,Ko.newInvalidDocument(i)))}));let n=Va();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&vl(s.mutation,i,po.empty(),Ps.now()),Pa(t,i)&&(n=n.insert(e,i))})),n}))}}class Vc{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Qs.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:oc(e.createTime)}}(t)),Qs.resolve()}getNamedQuery(e,t){return Qs.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Rc(e.bundledQuery),readTime:oc(e.readTime)}}(t)),Qs.resolve()}}class Bc{constructor(){this.overlays=new lo(zs.comparator),this.Ir=new Map}getOverlay(e,t){return Qs.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ha();return Qs.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,i)=>{this.ht(e,t,i)})),Qs.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Ir.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.Ir.delete(n)),Qs.resolve()}getOverlaysForCollection(e,t,n){const i=Ha(),r=t.length+1,s=new zs(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return Qs.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new lo(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=Ha(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Ha(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=i)););return Qs.resolve(o)}ht(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Nl(t,n));let r=this.Ir.get(t);void 0===r&&(r=Qa(),this.Ir.set(t,r)),this.Ir.set(t,r.add(n.key))}}class Hc{constructor(){this.sessionToken=mo.EMPTY_BYTE_STRING}getSessionToken(e){return Qs.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Qs.resolve()}}class qc{constructor(){this.Tr=new ho(Wc.Er),this.dr=new ho(Wc.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Wc(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Vr(new Wc(e,t))}mr(e,t){e.forEach((e=>this.removeReference(e,t)))}gr(e){const t=new zs(new Ls([])),n=new Wc(t,e),i=new Wc(t,e+1),r=[];return this.dr.forEachInRange([n,i],(e=>{this.Vr(e),r.push(e.key)})),r}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new zs(new Ls([])),n=new Wc(t,e),i=new Wc(t,e+1);let r=Qa();return this.dr.forEachInRange([n,i],(e=>{r=r.add(e.key)})),r}containsKey(e){const t=new Wc(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Wc{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return zs.comparator(e.key,t.key)||Os(e.wr,t.wr)}static Ar(e,t){return Os(e.wr,t.wr)||zs.comparator(e.key,t.key)}}class Kc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ho(Wc.Er)}checkEmpty(e){return Qs.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Il(r,t,n,i);this.mutationQueue.push(s);for(const o of i)this.br=this.br.add(new Wc(o.key,r)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Qs.resolve(s)}lookupMutationBatch(e,t){return Qs.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.vr(n),r=i<0?0:i;return Qs.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Qs.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Qs.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Wc(t,0),i=new Wc(t,Number.POSITIVE_INFINITY),r=[];return this.br.forEachInRange([n,i],(e=>{const t=this.Dr(e.wr);r.push(t)})),Qs.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ho(Os);return t.forEach((e=>{const t=new Wc(e,0),i=new Wc(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,i],(e=>{n=n.add(e.wr)}))})),Qs.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;zs.isDocumentKey(r)||(r=r.child(""));const s=new Wc(new zs(r),0);let o=new ho(Os);return this.br.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.wr)),!0)}),s),Qs.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach((e=>{const n=this.Dr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){ms(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Qs.forEach(t.mutations,(i=>{const r=new Wc(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new Wc(t,0),i=this.br.firstAfterOrEqual(n);return Qs.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Qs.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Gc{constructor(e){this.Mr=e,this.docs=new lo(zs.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Qs.resolve(n?n.document.mutableCopy():Ko.newInvalidDocument(t))}getEntries(e,t){let n=za();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ko.newInvalidDocument(e))})),Qs.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=za();const s=t.path,o=new zs(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||qs(Bs(o),n)<=0||(i.has(o.key)||Pa(t,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Qs.resolve(r)}getAllFromCollectionGroup(e,t,n,i){gs()}Or(e,t){return Qs.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Qc(this)}getSize(e){return Qs.resolve(this.size)}}class Qc extends Fc{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)})),Qs.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Yc{constructor(e){this.persistence=e,this.Nr=new ja((e=>ya(e)),va),this.lastRemoteSnapshotVersion=Ds.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qc,this.targetCount=0,this.kr=jc.Bn()}forEachTarget(e,t){return this.Nr.forEach(((e,n)=>t(n))),Qs.resolve()}getLastRemoteSnapshotVersion(e){return Qs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Qs.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Qs.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Qs.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new jc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Qs.resolve()}updateTargetData(e,t){return this.Kn(t),Qs.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Qs.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.Nr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Nr.delete(s),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),Qs.waitFor(r).next((()=>i))}getTargetCount(e){return Qs.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Qs.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Qs.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach((t=>{r.push(i.markPotentiallyOrphaned(e,t))})),Qs.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Qs.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Qs.resolve(n)}containsKey(e,t){return Qs.resolve(this.Br.containsKey(t))}}class Xc{constructor(e,t){this.qr={},this.overlays={},this.Qr=new $s(0),this.Kr=!1,this.Kr=!0,this.$r=new Hc,this.referenceDelegate=e(this),this.Ur=new Yc(this),this.indexManager=new Dc,this.remoteDocumentCache=function(e){return new Gc(e)}((e=>this.referenceDelegate.Wr(e))),this.serializer=new Oc(t),this.Gr=new Vc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Bc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Kc(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){hs("MemoryPersistence","Starting transaction:",e);const i=new $c(this.Qr.next());return this.referenceDelegate.zr(),n(i).next((e=>this.referenceDelegate.jr(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Hr(e,t){return Qs.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class $c extends Ks{constructor(e){super(),this.currentSequenceNumber=e}}class Jc{constructor(e){this.persistence=e,this.Jr=new qc,this.Yr=null}static Zr(e){return new Jc(e)}get Xr(){if(this.Yr)return this.Yr;throw gs()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Qs.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Qs.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Qs.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((e=>this.Xr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Xr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qs.forEach(this.Xr,(n=>{const i=zs.fromPath(n);return this.ei(e,i).next((e=>{e||t.removeEntry(i,Ds.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return Qs.or([()=>Qs.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Zc{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=i}static Wi(e,t){let n=Qa(),i=Qa();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Zc(e,t.fromCache,n,i)}}class eu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class tu{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=si()?8:Ys(ri())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,i){const r={result:null};return this.Yi(e,t).next((e=>{r.result=e})).next((()=>{if(!r.result)return this.Zi(e,t,i,n).next((e=>{r.result=e}))})).next((()=>{if(r.result)return;const n=new eu;return this.Xi(e,t,n).next((i=>{if(r.result=i,this.zi)return this.es(e,t,n,i.size)}))})).next((()=>r.result))}es(e,t,n,i){return n.documentReadCount<this.ji?(us()<=Si.DEBUG&&hs("QueryEngine","SDK will not create cache indexes for query:",Ra(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Qs.resolve()):(us()<=Si.DEBUG&&hs("QueryEngine","Query:",Ra(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(us()<=Si.DEBUG&&hs("QueryEngine","The SDK decides to create cache indexes for query:",Ra(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ta(t))):Qs.resolve())}Yi(e,t){if(Sa(t))return Qs.resolve(null);let n=Ta(t);return this.indexManager.getIndexType(e,n).next((i=>0===i?null:(null!==t.limit&&1===i&&(t=Aa(t,null,"F"),n=Ta(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const r=Qa(...i);return this.Ji.getDocuments(e,r).next((i=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ts(t,i);return this.ns(t,s,r,n.readTime)?this.Yi(e,Aa(t,null,"F")):this.rs(e,s,t,n)}))))})))))}Zi(e,t,n,i){return Sa(t)||i.isEqual(Ds.min())?Qs.resolve(null):this.Ji.getDocuments(e,n).next((r=>{const s=this.ts(t,r);return this.ns(t,s,n,i)?Qs.resolve(null):(us()<=Si.DEBUG&&hs("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ra(t)),this.rs(e,s,t,Vs(i,-1)).next((e=>e)))}))}ts(e,t){let n=new ho(Ma(e));return t.forEach(((t,i)=>{Pa(e,i)&&(n=n.add(i))})),n}ns(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Xi(e,t,n){return us()<=Si.DEBUG&&hs("QueryEngine","Using full collection scan to execute query:",Ra(t)),this.Ji.getDocumentsMatchingQuery(e,t,Hs.min(),n)}rs(e,t,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class nu{constructor(e,t,n,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new lo(Os),this._s=new ja((e=>ya(e)),va),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Uc(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function iu(e,t,n,i){return new nu(e,t,n,i)}async function ru(e,t){const n=ys(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next((r=>(i=r,n.ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const r=[],s=[];let o=Qa();for(const e of i){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({hs:e,removedBatchIds:r,addedBatchIds:s})))}))}))}function su(e){const t=ys(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ur.getLastRemoteSnapshotVersion(e)))}function ou(e,t,n){let i=Qa(),r=Qa();return n.forEach((e=>i=i.add(e))),t.getEntries(e,i).next((e=>{let i=za();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(Ds.min())?(t.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),i=i.insert(n,s)):hs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Ps:i,Is:r}}))}function au(e,t){const n=ys(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function lu(e,t){const n=ys(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let i;return n.Ur.getTargetData(e,t).next((r=>r?(i=r,Qs.resolve(i)):n.Ur.allocateTargetId(e).next((r=>(i=new Nc(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,i).next((()=>i)))))))})).then((e=>{const i=n.os.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e}))}async function cu(e,t,n){const i=ys(e),r=i.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(e=>i.persistence.referenceDelegate.removeTarget(e,r)))}catch(e){if(!Xs(e))throw e;hs("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}i.os=i.os.remove(t),i._s.delete(r.target)}function uu(e,t,n){const i=ys(e);let r=Ds.min(),s=Qa();return i.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const i=ys(e),r=i._s.get(n);return void 0!==r?Qs.resolve(i.os.get(r)):i.Ur.getTargetData(t,n)}(i,e,Ta(t)).next((t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>i.ss.getDocumentsMatchingQuery(e,t,n?r:Ds.min(),n?s:Qa()))).next((e=>(hu(i,Da(t),e),{documents:e,Ts:s})))))}function hu(e,t,n){let i=e.us.get(t)||Ds.min();n.forEach(((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)})),e.us.set(t,i)}class du{constructor(){this.activeTargetIds=Xa()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fu{constructor(){this.so=new du,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new du,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pu{_o(e){}shutdown(){}}class gu{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){hs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){hs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let mu=null;function yu(){return null===mu?mu=268435456+Math.round(2147483648*Math.random()):mu++,"0x"+mu.toString(16)}const vu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bu{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const _u="WebChannelConnection";class wu extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(i),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}get Fo(){return!1}Mo(e,t,n,i,r){const s=yu(),o=this.xo(e,t.toUriEncodedString());hs("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,i,r),this.No(e,o,a,n).then((t=>(hs("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw fs("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Lo(e,t,n,i,r,s){return this.Mo(e,t,n,i,r)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ls,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}xo(e,t){const n=vu[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,i){const r=yu();return new Promise(((s,o)=>{const a=new Xr;a.setWithCredentials(!0),a.listenOnce(Jr.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Zr.NO_ERROR:const t=a.getResponseJson();hs(_u,"XHR for RPC '".concat(e,"' ").concat(r," received:"),JSON.stringify(t)),s(t);break;case Zr.TIMEOUT:hs(_u,"RPC '".concat(e,"' ").concat(r," timed out")),o(new bs(vs.DEADLINE_EXCEEDED,"Request time out"));break;case Zr.HTTP_ERROR:const n=a.getStatus();if(hs(_u,"RPC '".concat(e,"' ").concat(r," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(vs).indexOf(t)>=0?t:vs.UNKNOWN}(t.status);o(new bs(e,t.message))}else o(new bs(vs.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new bs(vs.UNAVAILABLE,"Connection failed."));break;default:gs()}}finally{hs(_u,"RPC '".concat(e,"' ").concat(r," completed."))}}));const l=JSON.stringify(i);hs(_u,"RPC '".concat(e,"' ").concat(r," sending request:"),i),a.send(t,"POST",l,n,15)}))}Bo(e,t,n){const i=yu(),r=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=is(),o=ns(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=r.join("");hs(_u,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new bu({Io:t=>{d?hs(_u,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),t):(h||(hs(_u,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),u.open(),h=!0),hs(_u,"RPC '".concat(e,"' stream ").concat(i," sending:"),t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,$r.EventType.OPEN,(()=>{d||(hs(_u,"RPC '".concat(e,"' stream ").concat(i," transport opened.")),f.yo())})),p(u,$r.EventType.CLOSE,(()=>{d||(d=!0,hs(_u,"RPC '".concat(e,"' stream ").concat(i," transport closed")),f.So())})),p(u,$r.EventType.ERROR,(t=>{d||(d=!0,fs(_u,"RPC '".concat(e,"' stream ").concat(i," transport errored:"),t),f.So(new bs(vs.UNAVAILABLE,"The operation could not be completed")))})),p(u,$r.EventType.MESSAGE,(t=>{var n;if(!d){const r=t.data[0];ms(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){hs(_u,"RPC '".concat(e,"' stream ").concat(i," received error:"),o);const t=o.status;let n=function(e){const t=Rl[e];if(void 0!==t)return Ml(t)}(t),r=o.message;void 0===n&&(n=vs.INTERNAL,r="Unknown error status: "+t+" with message "+o.message),d=!0,f.So(new bs(n,r)),u.close()}else hs(_u,"RPC '".concat(e,"' stream ").concat(i," received:"),r),f.bo(r)}})),p(o,ts.STAT_EVENT,(t=>{t.stat===es.PROXY?hs(_u,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):t.stat===es.NOPROXY&&hs(_u,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))})),setTimeout((()=>{f.wo()}),0),f}}function xu(){return"undefined"!=typeof document?document:null}function Su(e){return new tc(e,!0)}class Eu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=i,this.Qo=r,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-n);i>0&&hs("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class ku{constructor(e,t,n,i,r,s,o,a){this.ui=e,this.Ho=n,this.Jo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Eu(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===vs.RESOURCE_EXHAUSTED?(ds(t.toString()),ds("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===vs.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,i]=e;this.Yo===t&&this.P_(n,i)}),(t=>{e((()=>{const e=new bs(vs.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((e=>{n((()=>this.I_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.e_?this.E_(e):this.onNext(e)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return hs("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(hs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Tu extends ku{constructor(e,t,n,i,r,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:gs()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(ms(void 0===t||"string"==typeof t),mo.fromBase64String(t||"")):(ms(void 0===t||t instanceof Buffer||t instanceof Uint8Array),mo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?vs.UNKNOWN:Ml(e.code);return new bs(t,e.message||"")}(o);n=new Gl(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=hc(e,i.document.name),s=oc(i.document.updateTime),o=i.document.createTime?oc(i.document.createTime):Ds.min(),a=new qo({mapValue:{fields:i.document.fields}}),l=Ko.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new Wl(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=hc(e,i.document),s=i.readTime?oc(i.readTime):Ds.min(),o=Ko.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Wl([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=hc(e,i.document),s=i.removedTargetIds||[];n=new Wl([],s,r,null)}else{if(!("filter"in t))return gs();{t.filter;const e=t.filter;e.targetId;const{count:i=0,unchangedNames:r}=e,s=new Ol(i,r),o=e.targetId;n=new Kl(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ds.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ds.min():t.readTime?oc(t.readTime):Ds.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=pc(this.serializer),t.addTarget=function(e,t){let n;const i=t.target;if(n=ba(i)?{documents:vc(e,i)}:{query:bc(e,i)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=rc(e,t.resumeToken);const i=nc(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Ds.min())>0){n.readTime=ic(e,t.snapshotVersion.toTimestamp());const i=nc(e,t.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gs()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=pc(this.serializer),t.removeTarget=e,this.a_(t)}}class Cu extends ku{constructor(e,t,n,i,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ms(!!e.streamToken),this.lastStreamToken=e.streamToken,ms(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){ms(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(ms(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?oc(e.updateTime):oc(t);return n.isEqual(Ds.min())&&(n=oc(t)),new dl(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=oc(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=pc(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>yc(this.serializer,e)))};this.a_(t)}}class Iu extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new bs(vs.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[s,o]=r;return this.connection.Mo(e,lc(t,n),i,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===vs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new bs(vs.UNKNOWN,e.toString())}))}Lo(e,t,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Lo(e,lc(t,n),i,o,a,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===vs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new bs(vs.UNKNOWN,e.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Au{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(ds(t),this.D_=!1):hs("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Nu{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=r,this.k_._o((e=>{n.enqueueAndForget((async()=>{zu(this)&&(hs("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ys(e);t.L_.add(4),await Ru(t),t.q_.set("Unknown"),t.L_.delete(4),await Ou(t)}(this))}))})),this.q_=new Au(n,i)}}async function Ou(e){if(zu(e))for(const t of e.B_)await t(!0)}async function Ru(e){for(const t of e.B_)await t(!1)}function Pu(e,t){const n=ys(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Fu(n)?ju(n):rh(n).r_()&&Mu(n,t))}function Du(e,t){const n=ys(e),i=rh(n);n.N_.delete(t),i.r_()&&Lu(n,t),0===n.N_.size&&(i.r_()?i.o_():zu(n)&&n.q_.set("Unknown"))}function Mu(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ds.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}rh(e).A_(t)}function Lu(e,t){e.Q_.xe(t),rh(e).R_(t)}function ju(e){e.Q_=new Yl({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),rh(e).start(),e.q_.v_()}function Fu(e){return zu(e)&&!rh(e).n_()&&e.N_.size>0}function zu(e){return 0===ys(e).L_.size}function Uu(e){e.Q_=void 0}async function Vu(e){e.q_.set("Online")}async function Bu(e){e.N_.forEach(((t,n)=>{Mu(e,t)}))}async function Hu(e,t){Uu(e),Fu(e)?(e.q_.M_(t),ju(e)):e.q_.set("Unknown")}async function qu(e,t,n){if(e.q_.set("Online"),t instanceof Gl&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.N_.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.N_.delete(i),e.Q_.removeTarget(i))}(e,t)}catch(n){hs("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Wu(e,n)}else if(t instanceof Wl?e.Q_.Ke(t):t instanceof Kl?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Ds.min()))try{const t=await su(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.N_.get(i);r&&e.N_.set(i,r.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const i=e.N_.get(t);if(!i)return;e.N_.set(t,i.withResumeToken(mo.EMPTY_BYTE_STRING,i.snapshotVersion)),Lu(e,t);const r=new Nc(i.target,t,n,i.sequenceNumber);Mu(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){hs("RemoteStore","Failed to raise snapshot:",t),await Wu(e,t)}}async function Wu(e,t,n){if(!Xs(t))throw t;e.L_.add(1),await Ru(e),e.q_.set("Offline"),n||(n=()=>su(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{hs("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Ou(e)}))}function Ku(e,t){return t().catch((n=>Wu(e,n,t)))}async function Gu(e){const t=ys(e),n=sh(t);let i=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Qu(t);)try{const e=await au(t.localStore,i);if(null===e){0===t.O_.length&&n.o_();break}i=e.batchId,Yu(t,e)}catch(e){await Wu(t,e)}Xu(t)&&$u(t)}function Qu(e){return zu(e)&&e.O_.length<10}function Yu(e,t){e.O_.push(t);const n=sh(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Xu(e){return zu(e)&&!sh(e).n_()&&e.O_.length>0}function $u(e){sh(e).start()}async function Ju(e){sh(e).p_()}async function Zu(e){const t=sh(e);for(const n of e.O_)t.m_(n.mutations)}async function eh(e,t,n){const i=e.O_.shift(),r=Al.from(i,t,n);await Ku(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await Gu(e)}async function th(e,t){t&&sh(e).V_&&await async function(e,t){if(function(e){return Dl(e)&&e!==vs.ABORTED}(t.code)){const n=e.O_.shift();sh(e).s_(),await Ku(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Gu(e)}}(e,t),Xu(e)&&$u(e)}async function nh(e,t){const n=ys(e);n.asyncQueue.verifyOperationInProgress(),hs("RemoteStore","RemoteStore received new credentials");const i=zu(n);n.L_.add(3),await Ru(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Ou(n)}async function ih(e,t){const n=ys(e);t?(n.L_.delete(2),await Ou(n)):t||(n.L_.add(2),await Ru(n),n.q_.set("Unknown"))}function rh(e){return e.K_||(e.K_=function(e,t,n){const i=ys(e);return i.w_(),new Tu(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Vu.bind(null,e),Ro:Bu.bind(null,e),mo:Hu.bind(null,e),d_:qu.bind(null,e)}),e.B_.push((async t=>{t?(e.K_.s_(),Fu(e)?ju(e):e.q_.set("Unknown")):(await e.K_.stop(),Uu(e))}))),e.K_}function sh(e){return e.U_||(e.U_=function(e,t,n){const i=ys(e);return i.w_(),new Cu(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Ju.bind(null,e),mo:th.bind(null,e),f_:Zu.bind(null,e),g_:eh.bind(null,e)}),e.B_.push((async t=>{t?(e.U_.s_(),await Gu(e)):(await e.U_.stop(),e.O_.length>0&&(hs("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))}))),e.U_}class oh{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new _s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,o=new oh(e,t,s,i,r);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bs(vs.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ah(e,t){if(ds("AsyncQueue","".concat(t,": ").concat(e)),Xs(e))return new bs(vs.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class lh{constructor(e){this.comparator=e?(t,n)=>e(t,n)||zs.comparator(t.key,n.key):(e,t)=>zs.comparator(e.key,t.key),this.keyedMap=Va(),this.sortedSet=new lo(this.comparator)}static emptySet(e){return new lh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new lh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ch{constructor(){this.W_=new lo(zs.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):gs():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class uh{constructor(e,t,n,i,r,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,i,r){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new uh(e,t,lh.emptySet(t),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Na(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}class hh{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class dh{constructor(){this.queries=fh(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=ys(e),i=n.queries;n.queries=fh(),i.forEach(((e,n)=>{for(const i of n.j_)i.onError(t)}))}(this,new bs(vs.ABORTED,"Firestore shutting down"))}}function fh(){return new ja((e=>Oa(e)),Na)}async function ph(e,t){const n=ys(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.H_()&&t.J_()&&(i=2):(s=new hh,i=t.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(e){const n=ah(e,"Initialization of query '".concat(Ra(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&vh(n)}async function gh(e,t){const n=ys(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?r=t.J_()?0:1:!s.H_()&&t.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function mh(e,t){const n=ys(e);let i=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(r)&&(i=!0);t.z_=r}}i&&vh(n)}function yh(e,t,n){const i=ys(e),r=i.queries.get(t);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(t)}function vh(e){e.Y_.forEach((e=>{e.next()}))}var bh,_h;(_h=bh||(bh={})).ea="default",_h.Cache="cache";class wh{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new uh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=uh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bh.Cache}}class xh{constructor(e){this.key=e}}class Sh{constructor(e){this.key=e}}class Eh{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Qa(),this.mutatedKeys=Qa(),this.Aa=Ma(e),this.Ra=new lh(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new ch,i=t?t.Ra:this.Ra;let r=t?t.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((e,t)=>{const c=i.get(e),u=Pa(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Aa(u,a)>0||l&&this.Aa(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),r=d?r.add(e):r.delete(e)):(s=s.delete(e),r=r.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:o,mutatedKeys:r}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const r=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gs()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc))),this.pa(n),i=null!=i&&i;const o=t&&!i?this.ya():[],a=0===this.da.size&&this.current&&!i?1:0,l=a!==this.Ea;return this.Ea=a,0!==s.length||l?{snapshot:new uh(this.query,e.Ra,r,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ch,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((e=>this.Ta=this.Ta.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ta=this.Ta.delete(e))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Qa(),this.Ra.forEach((e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))}));const t=[];return e.forEach((e=>{this.da.has(e)||t.push(new Sh(e))})),this.da.forEach((n=>{e.has(n)||t.push(new xh(n))})),t}ba(e){this.Ta=e.Ts,this.da=Qa();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return uh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class kh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Th{constructor(e){this.key=e,this.va=!1}}class Ch{constructor(e,t,n,i,r,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new ja((e=>Oa(e)),Na),this.Ma=new Map,this.xa=new Set,this.Oa=new lo(zs.comparator),this.Na=new Map,this.La=new qc,this.Ba={},this.ka=new Map,this.qa=jc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Ih(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=Yh(e);let r;const s=i.Fa.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await Nh(i,t,n,!0),r}async function Ah(e,t){const n=Yh(e);await Nh(n,t,!0,!1)}async function Nh(e,t,n,i){const r=await lu(e.localStore,Ta(t)),s=r.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await Oh(e,t,s,"current"===o,r.resumeToken)),e.isPrimaryClient&&n&&Pu(e.remoteStore,r),a}async function Oh(e,t,n,i,r){e.Ka=(t,n,i)=>async function(e,t,n,i){let r=t.view.ma(n);r.ns&&(r=await uu(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ma(n,r)})));const s=i&&i.targetChanges.get(t.targetId),o=i&&null!=i.targetMismatches.get(t.targetId),a=t.view.applyChanges(r,e.isPrimaryClient,s,o);return Hh(e,t.targetId,a.wa),a.snapshot}(e,t,n,i);const s=await uu(e.localStore,t,!0),o=new Eh(t,s.Ts),a=o.ma(s.documents),l=ql.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState,r),c=o.applyChanges(a,e.isPrimaryClient,l);Hh(e,n,c.wa);const u=new kh(t,n,o);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Rh(e,t,n){const i=ys(e),r=i.Fa.get(t),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter((e=>!Na(e,t)))),void i.Fa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await cu(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Du(i.remoteStore,r.targetId),Vh(i,r.targetId)})).catch(Gs)):(Vh(i,r.targetId),await cu(i.localStore,r.targetId,!0))}async function Ph(e,t){const n=ys(e),i=n.Fa.get(t),r=n.Ma.get(i.targetId);n.isPrimaryClient&&1===r.length&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Du(n.remoteStore,i.targetId))}async function Dh(e,t){const n=ys(e);try{const e=await function(e,t){const n=ys(e),i=t.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const o=[];t.targetChanges.forEach(((s,a)=>{const l=r.get(a);if(!l)return;o.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Ur.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(mo.EMPTY_BYTE_STRING,Ds.min()).withLastLimboFreeSnapshotVersion(Ds.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,i)),r=r.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Ur.updateTargetData(e,c))}));let a=za(),l=Qa();if(t.documentUpdates.forEach((i=>{t.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))})),o.push(ou(e,s,t.documentUpdates).next((e=>{a=e.Ps,l=e.Is}))),!i.isEqual(Ds.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next((t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,i)));o.push(t)}return Qs.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.os=r,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const i=n.Na.get(t);i&&(ms(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.va=!0:e.modifiedDocuments.size>0?ms(i.va):e.removedDocuments.size>0&&(ms(i.va),i.va=!1))})),await Kh(n,e,t)}catch(e){await Gs(e)}}function Mh(e,t,n){const i=ys(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.Fa.forEach(((n,i)=>{const r=i.view.Z_(t);r.snapshot&&e.push(r.snapshot)})),function(e,t){const n=ys(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const r of n.j_)r.Z_(t)&&(i=!0)})),i&&vh(n)}(i.eventManager,t),e.length&&i.Ca.d_(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Lh(e,t,n){const i=ys(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Na.get(t),s=r&&r.key;if(s){let e=new lo(zs.comparator);e=e.insert(s,Ko.newNoDocument(s,Ds.min()));const n=Qa().add(s),r=new Hl(Ds.min(),new Map,new lo(Os),e,n);await Dh(i,r),i.Oa=i.Oa.remove(s),i.Na.delete(t),Wh(i)}else await cu(i.localStore,t,!1).then((()=>Vh(i,t,n))).catch(Gs)}async function jh(e,t){const n=ys(e),i=t.batch.batchId;try{const e=await function(e,t){const n=ys(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),r=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const r=n.batch,s=r.keys();let o=Qs.resolve();return s.forEach((e=>{o=o.next((()=>i.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);ms(null!==s),t.version.compareTo(s)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,r)))}(n,e,t,r).next((()=>r.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Qa();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(n.localStore,t);Uh(n,i,null),zh(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Kh(n,e)}catch(e){await Gs(e)}}async function Fh(e,t,n){const i=ys(e);try{const e=await function(e,t){const n=ys(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(ms(null!==t),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(i.localStore,t);Uh(i,t,n),zh(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Kh(i,e)}catch(n){await Gs(n)}}function zh(e,t){(e.ka.get(t)||[]).forEach((e=>{e.resolve()})),e.ka.delete(t)}function Uh(e,t,n){const i=ys(e);let r=i.Ba[i.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),i.Ba[i.currentUser.toKey()]=r}}function Vh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Ma.get(t))e.Fa.delete(i),n&&e.Ca.$a(i,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach((t=>{e.La.containsKey(t)||Bh(e,t)}))}function Bh(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Du(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Wh(e))}function Hh(e,t,n){for(const i of n)i instanceof xh?(e.La.addReference(i.key,t),qh(e,i)):i instanceof Sh?(hs("SyncEngine","Document no longer in limbo: "+i.key),e.La.removeReference(i.key,t),e.La.containsKey(i.key)||Bh(e,i.key)):gs()}function qh(e,t){const n=t.key,i=n.path.canonicalString();e.Oa.get(n)||e.xa.has(i)||(hs("SyncEngine","New document in limbo: "+n),e.xa.add(i),Wh(e))}function Wh(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new zs(Ls.fromString(t)),i=e.qa.next();e.Na.set(i,new Th(n)),e.Oa=e.Oa.insert(n,i),Pu(e.remoteStore,new Nc(Ta(xa(n.path)),i,"TargetPurposeLimboResolution",$s.oe))}}async function Kh(e,t,n){const i=ys(e),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach(((e,a)=>{o.push(i.Ka(a,t,n).then((e=>{var t;if((e||n)&&i.isPrimaryClient){const r=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;i.sharedClientState.updateQueryState(a.targetId,r?"current":"not-current")}if(e){r.push(e);const t=Zc.Wi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),i.Ca.d_(r),await async function(e,t){const n=ys(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Qs.forEach(t,(t=>Qs.forEach(t.$i,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>Qs.forEach(t.Ui,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!Xs(e))throw e;hs("LocalStore","Failed to update sequence numbers: "+e)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.os.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.os=n.os.insert(e,r)}}}(i.localStore,s))}async function Gh(e,t){const n=ys(e);if(!n.currentUser.isEqual(t)){hs("SyncEngine","User change. New user:",t.toKey());const e=await ru(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach((e=>{e.forEach((e=>{e.reject(new bs(vs.CANCELLED,t))}))})),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Kh(n,e.hs)}}function Qh(e,t){const n=ys(e),i=n.Na.get(t);if(i&&i.va)return Qa().add(i.key);{let e=Qa();const i=n.Ma.get(t);if(!i)return e;for(const t of i){const i=n.Fa.get(t);e=e.unionWith(i.view.Va)}return e}}function Yh(e){const t=ys(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Dh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lh.bind(null,t),t.Ca.d_=mh.bind(null,t.eventManager),t.Ca.$a=yh.bind(null,t.eventManager),t}function Xh(e){const t=ys(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=jh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Fh.bind(null,t),t}class $h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Su(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return iu(this.persistence,new tu,e.initialUser,this.serializer)}Ga(e){return new Xc(Jc.Zr,this.serializer)}Wa(e){return new fu}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$h.provider={build:()=>new $h};class Jh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Mh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gh.bind(null,this.syncEngine),await ih(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new dh}createDatastore(e){const t=Su(e.databaseInfo.databaseId),n=function(e){return new wu(e)}(e.databaseInfo);return function(e,t,n,i){return new Iu(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,i,r){return new Nu(e,t,n,i,r)}(this.localStore,this.datastore,e.asyncQueue,(e=>Mh(this.syncEngine,e,0)),gu.D()?new gu:new pu)}createSyncEngine(e,t){return function(e,t,n,i,r,s,o){const a=new Ch(e,t,n,i,r,s);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=ys(e);hs("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Ru(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Jh.provider={build:()=>new Jh};class Zh{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ds("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class ed{constructor(e,t,n,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=as.UNAUTHENTICATED,this.clientId=Ns.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,(async e=>{hs("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(hs("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ah(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function td(e,t){e.asyncQueue.verifyOperationInProgress(),hs("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await ru(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function nd(e,t){e.asyncQueue.verifyOperationInProgress();const n=await id(e);hs("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>nh(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>nh(t.remoteStore,n))),e._onlineComponents=t}async function id(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){hs("FirestoreClient","Using user provided OfflineComponentProvider");try{await td(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===vs.FAILED_PRECONDITION||e.code===vs.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;fs("Error using user provided cache. Falling back to memory cache: "+n),await td(e,new $h)}}else hs("FirestoreClient","Using default OfflineComponentProvider"),await td(e,new $h);return e._offlineComponents}async function rd(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(hs("FirestoreClient","Using user provided OnlineComponentProvider"),await nd(e,e._uninitializedComponentsProvider._online)):(hs("FirestoreClient","Using default OnlineComponentProvider"),await nd(e,new Jh))),e._onlineComponents}function sd(e){return rd(e).then((e=>e.syncEngine))}async function od(e){const t=await rd(e),n=t.eventManager;return n.onListen=Ih.bind(null,t.syncEngine),n.onUnlisten=Rh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Ah.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Ph.bind(null,t.syncEngine),n}function ad(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new _s;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const s=new Zh({next:a=>{s.Za(),t.enqueueAndForget((()=>gh(e,o)));const l=a.docs.has(n);!l&&a.fromCache?r.reject(new bs(vs.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&i&&"server"===i.source?r.reject(new bs(vs.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(a)},error:e=>r.reject(e)}),o=new wh(xa(n.path),s,{includeMetadataChanges:!0,_a:!0});return ph(e,o)}(await od(e),e.asyncQueue,t,n,i))),i.promise}function ld(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new _s;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const s=new Zh({next:n=>{s.Za(),t.enqueueAndForget((()=>gh(e,o))),n.fromCache&&"server"===i.source?r.reject(new bs(vs.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),o=new wh(n,s,{includeMetadataChanges:!0,_a:!0});return ph(e,o)}(await od(e),e.asyncQueue,t,n,i))),i.promise}function cd(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const ud=new Map;function hd(e,t,n){if(!n)throw new bs(vs.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function dd(e){if(!zs.isDocumentKey(e))throw new bs(vs.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function fd(e){if(zs.isDocumentKey(e))throw new bs(vs.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function pd(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":gs()}function gd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bs(vs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pd(e);throw new bs(vs.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class md{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new bs(vs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new bs(vs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,i){if(!0===t&&!0===i)throw new bs(vs.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cd(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new bs(vs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new bs(vs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new bs(vs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yd{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new md({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new bs(vs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new bs(vs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new md(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new xs;switch(e.type){case"firstParty":return new Ts(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new bs(vs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ud.get(e);t&&(hs("ComponentProvider","Removing Datastore"),ud.delete(e),t.terminate())}(this),Promise.resolve()}}class vd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new vd(this.firestore,e,this._query)}}class bd{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _d(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bd(this.firestore,e,this._key)}}class _d extends vd{constructor(e,t,n){super(e,t,xa(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bd(this.firestore,null,new zs(e))}withConverter(e){return new _d(this.firestore,e,this._path)}}function wd(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=yi(e),hd("collection","path",t),e instanceof yd){const n=Ls.fromString(t,...i);return fd(n),new _d(e,null,n)}{if(!(e instanceof bd||e instanceof _d))throw new bs(vs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ls.fromString(t,...i));return fd(n),new _d(e.firestore,null,n)}}function xd(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=yi(e),1===arguments.length&&(t=Ns.newId()),hd("doc","path",t),e instanceof yd){const n=Ls.fromString(t,...i);return dd(n),new bd(e,null,new zs(n))}{if(!(e instanceof bd||e instanceof _d))throw new bs(vs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ls.fromString(t,...i));return dd(n),new bd(e.firestore,e instanceof _d?e.converter:null,new zs(n))}}class Sd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Eu(this,"async_queue_retry"),this.Vu=()=>{const e=xu();e&&hs("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=xu();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=xu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new _s;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Xs(e))throw e;hs("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ds("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.du=!1,e))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=oh.createAndSchedule(this,e,t,n,(e=>this.yu(e)));return this.Tu.push(i),i}fu(){this.Eu&&gs()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Ed extends yd{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Sd,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sd(e),this._firestoreClient=void 0,await e}}}function kd(e,t){const n="string"==typeof e?e:t||"(default)",i=Ir("object"==typeof e?e:Dr(),"firestore").getImmediate({identifier:n});if(!i._initialized){const e=Zn("firestore");e&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var r;const s=(e=gd(e,yd))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=as.MOCK_USER;else{t=ii(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new bs(vs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new as(s)}e._authCredentials=new Ss(new ws(t,n))}}(i,...e)}return i}function Td(e){if(e._terminated)throw new bs(vs.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Cd(e),e._firestoreClient}function Cd(e){var t,n,i;const r=e._freezeSettings(),s=function(e,t,n,i){return new Eo(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,cd(i.experimentalLongPollingOptions),i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,r);e._componentsProvider||(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new ed(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Id{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Id(mo.fromBase64String(e))}catch(e){throw new bs(vs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Id(mo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ad{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let i=0;i<t.length;++i)if(0===t[i].length)throw new bs(vs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fs(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Nd{constructor(e){this._methodName=e}}class Od{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new bs(vs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new bs(vs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Os(this._lat,e._lat)||Os(this._long,e._long)}}class Rd{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Pd=/^__.*__$/;class Dd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new xl(e,this.data,this.fieldMask,t,this.fieldTransforms):new wl(e,this.data,t,this.fieldTransforms)}}class Md{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new xl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ld(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gs()}}class jd{constructor(e,t,n,i,r,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.vu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new jd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Ld(this.Cu)&&Pd.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Fd{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Su(e)}Qu(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new jd({Cu:e,methodName:t,qu:n,path:Fs.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zd(e){const t=e._freezeSettings(),n=Su(e._databaseId);return new Fd(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ud(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Qu(s.merge||s.mergeFields?2:0,t,n,r);Qd("Data must be an object, but it was:",o,i);const a=Kd(i,o);let l,c;if(s.merge)l=new po(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const i of s.mergeFields){const r=Yd(t,i,n);if(!o.contains(r))throw new bs(vs.INVALID_ARGUMENT,"Field '".concat(r,"' is specified in your field mask but missing from your input data."));Zd(e,r)||e.push(r)}l=new po(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new Dd(new qo(a),l,c)}class Vd extends Nd{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vd}}function Bd(e,t,n,i){const r=e.Qu(1,t,n);Qd("Data must be an object, but it was:",r,i);const s=[],o=qo.empty();oo(i,((e,i)=>{const a=$d(t,e,n);i=yi(i);const l=r.Nu(a);if(i instanceof Vd)s.push(a);else{const e=Wd(i,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new po(s);return new Md(o,a,r.fieldTransforms)}function Hd(e,t,n,i,r,s){const o=e.Qu(1,t,n),a=[Yd(t,i,n)],l=[r];if(s.length%2!=0)throw new bs(vs.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(Yd(t,s[d])),l.push(s[d+1]);const c=[],u=qo.empty();for(let d=a.length-1;d>=0;--d)if(!Zd(c,a[d])){const e=a[d];let t=l[d];t=yi(t);const n=o.Nu(e);if(t instanceof Vd)c.push(e);else{const i=Wd(t,n);null!=i&&(c.push(e),u.set(e,i))}}const h=new po(c);return new Md(u,h,o.fieldTransforms)}function qd(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Wd(n,e.Qu(i?4:3,t))}function Wd(e,t){if(Gd(e=yi(e)))return Qd("Unsupported field value:",t,e),Kd(e,t);if(e instanceof Nd)return function(e,t){if(!Ld(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const r of e){let e=Wd(r,t.Lu(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=yi(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Za(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ps.fromDate(e);return{timestampValue:ic(t.serializer,n)}}if(e instanceof Ps){const n=new Ps(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ic(t.serializer,n)}}if(e instanceof Od)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Id)return{bytesValue:rc(t.serializer,e._byteString)};if(e instanceof bd){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.Bu("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:ac(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Rd)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return $a(t.serializer,e)}))}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(pd(e)))}(e,t)}function Kd(e,t){const n={};return ao(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):oo(e,((e,i)=>{const r=Wd(i,t.Mu(e));null!=r&&(n[e]=r)})),{mapValue:{fields:n}}}function Gd(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ps||e instanceof Od||e instanceof Id||e instanceof bd||e instanceof Nd||e instanceof Rd)}function Qd(e,t,n){if(!Gd(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=pd(n);throw"an object"===i?t.Bu(e+" a custom object"):t.Bu(e+" "+i)}}function Yd(e,t,n){if((t=yi(t))instanceof Ad)return t._internalPath;if("string"==typeof t)return $d(e,t);throw Jd("Field path arguments must be of type string or ",e,!1,void 0,n)}const Xd=new RegExp("[~\\*/\\[\\]]");function $d(e,t,n){if(t.search(Xd)>=0)throw Jd("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Ad(...t.split("."))._internalPath}catch(i){throw Jd("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Jd(e,t,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(i)),o&&(l+=" in document ".concat(r)),l+=")"),new bs(vs.INVALID_ARGUMENT,a+e+l)}function Zd(e,t){return e.some((e=>e.isEqual(t)))}class ef{constructor(e,t,n,i,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new bd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new tf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class tf extends ef{data(){return super.data()}}function nf(e,t){return"string"==typeof t?$d(e,t):t instanceof Ad?t._internalPath:t._delegate._internalPath}function rf(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new bs(vs.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sf{}class of extends sf{}function af(e,t){let n=[];for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];t instanceof sf&&n.push(t),n=n.concat(r),function(e){const t=e.filter((e=>e instanceof uf)).length,n=e.filter((e=>e instanceof lf)).length;if(t>1||t>0&&n>0)throw new bs(vs.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class lf extends of{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new lf(e,t,n)}_apply(e){const t=this._parse(e);return ff(e._query,t),new vd(e.firestore,e.converter,Ia(e._query,t))}_parse(e){const t=zd(e.firestore),n=function(e,t,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new bs(vs.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){df(o,s);const t=[];for(const n of o)t.push(hf(i,e,n));a={arrayValue:{values:t}}}else a=hf(i,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||df(o,s),a=qd(n,t,o,"in"===s||"not-in"===s);return Zo.create(r,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function cf(e,t,n){const i=t,r=nf("where",e);return lf._create(r,i,n)}class uf extends sf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new uf(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ea.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const i=t.getFlattenedFilters();for(const r of i)ff(n,r),n=Ia(n,r)}(e._query,t),new vd(e.firestore,e.converter,Ia(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function hf(e,t,n){if("string"==typeof(n=yi(n))){if(""===n)throw new bs(vs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ea(t)&&-1!==n.indexOf("/"))throw new bs(vs.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const i=t.path.child(Ls.fromString(n));if(!zs.isDocumentKey(i))throw new bs(vs.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(i,"' is not because it has an odd number of segments (").concat(i.length,")."));return Mo(e,new zs(i))}if(n instanceof bd)return Mo(e,n._key);throw new bs(vs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(pd(n),"."))}function df(e,t){if(!Array.isArray(e)||0===e.length)throw new bs(vs.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function ff(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new bs(vs.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new bs(vs.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class pf{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_o(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw gs()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return oo(e,((e,i)=>{n[e]=this.convertValue(i,t)})),n}convertVectorValue(e){var t,n,i;const r=null===(i=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===i?void 0:i.map((e=>bo(e.doubleValue)));return new Rd(r)}convertGeoPoint(e){return new Od(bo(e.latitude),bo(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=xo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(So(e));default:return null}}convertTimestamp(e){const t=vo(e);return new Ps(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ls.fromString(e);ms(Ac(n));const i=new ko(n.get(1),n.get(3)),r=new zs(n.popFirst(5));return i.isEqual(t)||ds("Document ".concat(r," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),r}}function gf(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class mf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yf extends ef{constructor(e,t,n,i,r,s){super(e,t,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new vf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(nf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class vf extends yf{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class bf{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mf(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new vf(this._firestore,this._userDataWriter,n.key,n,new mf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new bs(vs.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const i=new vf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new mf(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const i=new vf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new mf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,s=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:_f(t.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function _f(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gs()}}function wf(e){e=gd(e,bd);const t=gd(e.firestore,Ed);return ad(Td(t),e._key).then((n=>Cf(t,e,n)))}class xf extends pf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Id(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bd(this.firestore,null,t)}}function Sf(e){e=gd(e,vd);const t=gd(e.firestore,Ed),n=Td(t),i=new xf(t);return rf(e._query),ld(n,e._query).then((n=>new bf(t,i,e,n)))}function Ef(e,t,n){e=gd(e,bd);const i=gd(e.firestore,Ed),r=gf(e.converter,t,n);return Tf(i,[Ud(zd(i),"setDoc",e._key,r,null!==e.converter,n).toMutation(e._key,fl.none())])}function kf(e,t,n){e=gd(e,bd);const i=gd(e.firestore,Ed),r=zd(i);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=yi(t))||t instanceof Ad?Hd(r,"updateDoc",e._key,t,n,a):Bd(r,"updateDoc",e._key,t),Tf(i,[s.toMutation(e._key,fl.exists(!0))])}function Tf(e,t){return function(e,t){const n=new _s;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const i=Xh(e);try{const e=await function(e,t){const n=ys(e),i=Ps.now(),r=t.reduce(((e,t)=>e.add(t.key)),Qa());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=za(),l=Qa();return n.cs.getEntries(e,r).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((r=>{s=r;const o=[];for(const e of t){const t=bl(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new xl(e.key,t,Wo(t.value.mapValue),fl.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,o,t)})).next((t=>{o=t;const i=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:Ba(s)})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.Ba[e.currentUser.toKey()];i||(i=new lo(Os)),i=i.insert(t,n),e.Ba[e.currentUser.toKey()]=i}(i,e.batchId,n),await Kh(i,e.changes),await Gu(i.remoteStore)}catch(e){const t=ah(e,"Failed to persist write");n.reject(t)}}(await sd(e),t,n))),n.promise}(Td(e),t)}function Cf(e,t,n){const i=n.docs.get(t._key),r=new xf(e);return new yf(e,r,t._key,i,new mf(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ls=e}(Rr),Cr(new vi("firestore",((e,n)=>{let{instanceIdentifier:i,options:r}=n;const s=e.getProvider("app").getImmediate(),o=new Ed(new Es(e.getProvider("auth-internal")),new Is(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new bs(vs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ko(e.options.projectId,t)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o}),"PUBLIC").setMultipleInstances(!0)),Mr(os,"4.7.3",e),Mr(os,"4.7.3","esm2017")}();const If="firebasestorage.googleapis.com",Af="storageBucket";class Nf extends ai{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Pf(e),"Firebase Storage: ".concat(t," (").concat(Pf(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nf.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Pf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Of,Rf;function Pf(e){return"storage/"+e}function Df(){return new Nf(Of.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Mf(){return new Nf(Of.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Lf(){return new Nf(Of.CANCELED,"User canceled the upload/download.")}function jf(){return new Nf(Of.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ff(e){return new Nf(Of.INVALID_ARGUMENT,e)}function zf(){return new Nf(Of.APP_DELETED,"The Firebase app was deleted.")}function Uf(e,t){return new Nf(Of.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Vf(e){throw new Nf(Of.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Of||(Of={}));class Bf{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Bf.makeFromUrl(e,t)}catch(r){return new Bf(e,"")}if(""===n.path)return n;throw i=e,new Nf(Of.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.");var i}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";const r=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===If?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],i=t.regex.exec(e);if(i){const e=i[t.indices.bucket];let r=i[t.indices.path];r||(r=""),n=new Bf(e,r),t.postModify(n);break}}if(null==n)throw function(e){return new Nf(Of.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Hf{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function qf(e){return"string"===typeof e||e instanceof String}function Wf(e){return Kf()&&e instanceof Blob}function Kf(){return"undefined"!==typeof Blob}function Gf(e,t,n,i){if(i<t)throw Ff("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(i>n)throw Ff("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Qf(e,t,n){let i=t;return null==n&&(i="https://".concat(t)),"".concat(n,"://").concat(i,"/v0").concat(e)}function Yf(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){n=n+(t(i)+"="+t(e[i]))+"&"}return n=n.slice(0,-1),n}function Xf(e,t){const n=e>=500&&e<600,i=-1!==[408,429].indexOf(e),r=-1!==t.indexOf(e);return n||i||r}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Rf||(Rf={}));class $f{constructor(e,t,n,i,r,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Jf(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const t=n.getErrorCode()===Rf.NO_ERROR,r=n.getStatus();if(!t||Xf(r,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Rf.ABORT;return void e(!1,new Jf(!1,null,t))}const s=-1!==this.successCodes_.indexOf(r);e(!0,new Jf(s,n))}))},t=(e,t)=>{const n=this.resolve_,i=this.reject_,r=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(r,r.getResponse());void 0!==e?n(e):n()}catch(s){i(s)}else if(null!==r){const e=Df();e.serverResponse=r.getErrorText(),this.errorCallback_?i(this.errorCallback_(r,e)):i(e)}else if(t.canceled){i(this.appDelete_?zf():Lf())}else{i(Mf())}};this.canceled_?t(0,new Jf(!1,null,!0)):this.backoffId_=function(e,t,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(null,n)}}function h(t){r=setTimeout((()=>{r=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;i<64&&(i*=2),1===a?(a=2,s=0):s=1e3*(i+Math.random()),h(s)}let p=!1;function g(e){p||(p=!0,d(),c||(null!==r?(e||(a=2),clearTimeout(r),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,g(!0)}),n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Jf{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Zf(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ep(){const e=Zf();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Kf())return new Blob(n);throw new Nf(Of.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function tp(e){if("undefined"===typeof atob)throw t="base-64",new Nf(Of.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const np="raw",ip="base64",rp="base64url",sp="data_url";class op{constructor(e,t){this.data=e,this.contentType=t||null}}function ap(e,t){switch(e){case np:return new op(lp(t));case ip:case rp:return new op(cp(e,t));case sp:return new op(function(e){const t=new up(e);return t.base64?cp(ip,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw Uf(sp,"Malformed data URL.")}return lp(t)}(t.rest)}(t),new up(t).contentType)}throw Df()}function lp(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|63&i);else if(55296===(64512&i)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){i=65536|(1023&i)<<10|1023&e.charCodeAt(++n),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)}else t.push(239,191,189)}else 56320===(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function cp(e,t){switch(e){case ip:{const n=-1!==t.indexOf("-"),i=-1!==t.indexOf("_");if(n||i){throw Uf(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case rp:{const n=-1!==t.indexOf("+"),i=-1!==t.indexOf("/");if(n||i){throw Uf(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=tp(t)}catch(r){if(r.message.includes("polyfill"))throw r;throw Uf(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}class up{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Uf(sp,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class hp{constructor(e,t){let n=0,i="";Wf(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Wf(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new hp(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new hp(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Kf()){const e=t.map((e=>e instanceof hp?e.data_:e));return new hp(ep.apply(null,e))}{const e=t.map((e=>qf(e)?ap(np,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const i=new Uint8Array(n);let r=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)i[r++]=e[t]})),new hp(i,!0)}}uploadData(){return this.data_}}function dp(e){let t;try{t=JSON.parse(e)}catch(i){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t;var n}function fp(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function pp(e,t){return t}class gp{constructor(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||pp}}let mp=null;function yp(){if(mp)return mp;const e=[];e.push(new gp("bucket")),e.push(new gp("generation")),e.push(new gp("metageneration")),e.push(new gp("name","fullPath",!0));const t=new gp("name");t.xform=function(e,t){return function(e){return!qf(e)||e.length<2?e:fp(e)}(t)},e.push(t);const n=new gp("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new gp("timeCreated")),e.push(new gp("updated")),e.push(new gp("md5Hash",null,!0)),e.push(new gp("cacheControl",null,!0)),e.push(new gp("contentDisposition",null,!0)),e.push(new gp("contentEncoding",null,!0)),e.push(new gp("contentLanguage",null,!0)),e.push(new gp("contentType",null,!0)),e.push(new gp("metadata","customMetadata",!0)),mp=e,mp}function vp(e,t,n){const i={type:"file"},r=n.length;for(let s=0;s<r;s++){const e=n[s];i[e.local]=e.xform(i,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,i=e.fullPath,r=new Bf(n,i);return t._makeStorageReference(r)}})}(i,e),i}function bp(e,t,n){const i=dp(t);if(null===i)return null;return vp(e,i,n)}function _p(e,t){const n={},i=t.length;for(let r=0;r<i;r++){const i=t[r];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}class wp{constructor(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function xp(e){if(!e)throw Df()}function Sp(e,t){return function(n,i){const r=bp(e,i,t);return xp(null!==r),r}}function Ep(e,t){return function(n,i){const r=bp(e,i,t);return xp(null!==r),function(e,t,n,i){const r=dp(t);if(null===r)return null;if(!qf(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const r=e.bucket,s=e.fullPath;return Qf("/b/"+o(r)+"/o/"+o(s),n,i)+Yf({alt:"media",token:t})}))[0]}(r,i,e.host,e._protocol)}}function kp(e){return function(t,n){let i;var r,s;return 401===t.getStatus()?i=t.getErrorText().includes("Firebase App Check token is invalid")?new Nf(Of.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Nf(Of.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,i=new Nf(Of.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=e.path,i=new Nf(Of.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):i=n,i.status=t.getStatus(),i.serverResponse=n.serverResponse,i}}function Tp(e){const t=kp(e);return function(n,i){let r=t(n,i);var s;return 404===n.getStatus()&&(s=e.path,r=new Nf(Of.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),r.serverResponse=i.serverResponse,r}}function Cp(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}function Ip(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=Cp(t,i,r),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+_p(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=hp.getBlob(c,i,u);if(null===h)throw jf();const d={name:l.fullPath},f=Qf(s,e.host,e._protocol),p=e.maxUploadRetryTime,g=new wp(f,"POST",Sp(e,n),p);return g.urlParams=d,g.headers=o,g.body=h.uploadData(),g.errorHandler=kp(t),g}class Ap{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Rf.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Rf.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Rf.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,i){if(this.sent_)throw Vf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vf("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Vf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Np extends Ap{initXhr(){this.xhr_.responseType="text"}}function Op(){return new Np}class Rp{constructor(e,t){this._service=e,this._location=t instanceof Bf?t:Bf.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Rp(e,t)}get root(){const e=new Bf(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fp(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Bf(this._location.bucket,e);return new Rp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Nf(Of.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Pp(e,t,n){e._throwIfRoot("uploadBytes");const i=Ip(e.storage,e._location,yp(),new hp(t,!0),n);return e.storage.makeRequestWithTokens(i,Op).then((t=>({metadata:t,ref:e})))}function Dp(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const i=Qf(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,s=new wp(i,"GET",Ep(e,n),r);return s.errorHandler=Tp(t),s}(e.storage,e._location,yp());return e.storage.makeRequestWithTokens(t,Op).then((e=>{if(null===e)throw new Nf(Of.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Mp(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),i=new Bf(e._location.bucket,n);return new Rp(e.storage,i)}function Lp(e,t){if(e instanceof zp){const n=e;if(null==n._bucket)throw new Nf(Of.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Af+"' property when initializing the app?");const i=new Rp(n,n._bucket);return null!=t?Lp(i,t):i}return void 0!==t?Mp(e,t):e}function jp(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof zp)return new Rp(e,t);throw Ff("To use ref(service, url), the first argument must be a Storage instance.")}return Lp(e,t)}function Fp(e,t){const n=null===t||void 0===t?void 0:t[Af];return null==n?null:Bf.makeFromBucketSpec(n,e)}class zp{constructor(e,t,n,i,r){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=If,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Bf.makeFromBucketSpec(i,this._host):Fp(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Bf.makeFromBucketSpec(this._url,e):this._bucket=Fp(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Gf("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Gf("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rp(this,e)}_makeRequest(e,t,n,i){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Hf(zf());{const s=function(e,t,n,i,r,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=Yf(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,i),new $f(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o)}(e,this._appId,n,i,t,this._firebaseVersion,r);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const Up="@firebase/storage",Vp="0.13.2",Bp="storage";function Hp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr(),t=arguments.length>1?arguments[1]:void 0;e=yi(e);const n=Ir(e,Bp).getImmediate({identifier:t}),i=Zn("storage");return i&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken="string"===typeof r?r:ii(r,e.app.options.projectId))}(e,t,n,i)}(n,...i),n}function qp(e,t){let{instanceIdentifier:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new zp(i,r,s,n,Rr)}Cr(new vi(Bp,qp,"PUBLIC").setMultipleInstances(!0)),Mr(Up,Vp,""),Mr(Up,Vp,"esm2017");Mr("firebase","10.14.1","app");function Wp(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Kp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Gp=Kp,Qp=new li("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Yp=new Ii("@firebase/auth");function Xp(e){if(Yp.logLevel<=Si.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Yp.error("Auth (".concat(Rr,"): ").concat(e),...n)}}function $p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw tg(e,...n)}function Jp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return tg(e,...n)}function Zp(e,t,n){const i=Object.assign(Object.assign({},Gp()),{[t]:n});return new li("auth","Firebase",i).create(t,{appName:e.name})}function eg(e){return Zp(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("string"!==typeof e){const t=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(t,...i)}return Qp.create(e,...n)}function ng(e,t){if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw tg(t,...i)}}function ig(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Xp(t),new Error(t)}function rg(e,t){e||ig(t)}function sg(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function og(){return"http:"===ag()||"https:"===ag()}function ag(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function lg(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(og()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class cg{constructor(e,t){this.shortDelay=e,this.longDelay=t,rg(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ri())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return lg()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ug(e,t){rg(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class hg{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ig("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ig("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ig("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const dg={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},fg=new cg(3e4,6e4);function pg(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function gg(e,t,n,i){return mg(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const o=di(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},r);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),hg.fetch()(vg(e,e.config.apiHost,n,o),l)}))}async function mg(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},dg),t);try{const t=new _g(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw wg(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw wg(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw wg(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw wg(e,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Zp(e,a,o);$p(e,a)}}catch(r){if(r instanceof ai)throw r;$p(e,"network-request-failed",{message:String(r)})}}async function yg(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await gg(e,t,n,i,r);return"mfaPendingCredential"in s&&$p(e,"multi-factor-auth-required",{_serverResponse:s}),s}function vg(e,t,n,i){const r="".concat(t).concat(n,"?").concat(i);return e.config.emulator?ug(e.config,r):"".concat(e.config.apiScheme,"://").concat(r)}function bg(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _g{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Jp(this.auth,"network-request-failed"))),fg.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function wg(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Jp(e,t,i);return r.customData._tokenResponse=n,r}function xg(e){return void 0!==e&&void 0!==e.enterprise}class Sg{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return bg(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Eg(e,t){return gg(e,"GET","/v2/recaptchaConfig",pg(e,t))}async function kg(e,t){return gg(e,"POST","/v1/accounts:lookup",t)}function Tg(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Cg(e){return 1e3*Number(e)}function Ig(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return Xp("JWT malformed, contained fewer than 3 sections"),null;try{const e=Yn(n);return e?JSON.parse(e):(Xp("Failed to decode base64 JWT payload"),null)}catch(r){return Xp("Caught error parsing JWT payload as JSON",null===r||void 0===r?void 0:r.toString()),null}}function Ag(e){const t=Ig(e);return ng(t,"internal-error"),ng("undefined"!==typeof t.exp,"internal-error"),ng("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Ng(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof ai&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Og{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Rg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tg(this.lastLoginAt),this.creationTime=Tg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Pg(e){var t;const n=e.auth,i=await e.getIdToken(),r=await Ng(e,kg(n,{idToken:i}));ng(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Dg(s.providerUserInfo):[],a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!l&&c,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Rg(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,h)}function Dg(e){return e.map((e=>{var{providerId:t}=e,n=Wp(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Mg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ng(e.idToken,"internal-error"),ng("undefined"!==typeof e.idToken,"internal-error"),ng("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Ag(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ng(0!==e.length,"internal-error");const t=Ag(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ng(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await mg(e,{},(async()=>{const n=di({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=vg(e,i,"/v1/token","key=".concat(r)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",hg.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new Mg;return n&&(ng("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(ng("string"===typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(ng("number"===typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mg,this.toJSON())}_performRefresh(){return ig("not implemented")}}function Lg(e,t){ng("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class jg{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=Wp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Og(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Rg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Ng(this,this.stsTokenManager.getToken(this.auth,e));return ng(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=yi(e),i=await n.getIdToken(t),r=Ig(i);ng(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Tg(Cg(r.auth_time)),issuedAtTime:Tg(Cg(r.iat)),expirationTime:Tg(Cg(r.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=yi(e);await Pg(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ng(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jg(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ng(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Pg(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ar(this.auth.app))return Promise.reject(eg(this.auth));const e=await this.getIdToken();return await Ng(this,async function(e,t){return gg(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:_,providerData:w,stsTokenManager:x}=t;ng(v&&x,e,"internal-error");const S=Mg.fromJSON(this.name,x);ng("string"===typeof v,e,"internal-error"),Lg(u,e.name),Lg(h,e.name),ng("boolean"===typeof b,e,"internal-error"),ng("boolean"===typeof _,e,"internal-error"),Lg(d,e.name),Lg(f,e.name),Lg(p,e.name),Lg(g,e.name),Lg(m,e.name),Lg(y,e.name);const E=new jg({uid:v,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:m,lastLoginAt:y});return w&&Array.isArray(w)&&(E.providerData=w.map((e=>Object.assign({},e)))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new Mg;i.updateFromServerResponse(t);const r=new jg({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Pg(r),r}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];ng(void 0!==i.localId,"internal-error");const r=void 0!==i.providerUserInfo?Dg(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length),o=new Mg;o.updateFromIdToken(n);const a=new jg({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new Rg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length)};return Object.assign(a,l),a}}const Fg=new Map;function zg(e){rg(e instanceof Function,"Expected a class definition");let t=Fg.get(e);return t?(rg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Fg.set(e,t),t)}class Ug{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ug.type="NONE";const Vg=Ug;function Bg(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Hg{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Bg(this.userKey,i.apiKey,r),this.fullPersistenceKey=Bg("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?jg._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Hg(zg(Vg),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||zg(Vg);const s=Bg(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=jg._fromJSON(e,t);c!==r&&(o=n),r=c;break}}catch(l){}const a=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(l){}}))),new Hg(r,e,n)):new Hg(r,e,n)}}function qg(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Qg(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Wg(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Xg(t))return"Blackberry";if($g(t))return"Webos";if(Kg(t))return"Safari";if((t.includes("chrome/")||Gg(t))&&!t.includes("edge/"))return"Chrome";if(Yg(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Wg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ri();return/firefox\//i.test(e)}function Kg(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ri()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ri();return/crios\//i.test(e)}function Qg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ri();return/iemobile/i.test(e)}function Yg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ri();return/android/i.test(e)}function Xg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ri();return/blackberry/i.test(e)}function $g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ri();return/webos/i.test(e)}function Jg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ri();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Zg(){return function(){const e=ri();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function em(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ri();return Jg(e)||Yg(e)||$g(e)||Xg(e)||/windows phone/i.test(e)||Qg(e)}function tm(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=qg(ri());break;case"Worker":t="".concat(qg(ri()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Rr,"/").concat(i)}class nm{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(r){i(r)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class im{constructor(e){var t,n,i,r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class rm{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new om(this),this.idTokenSubscription=new om(this),this.beforeStateQueue=new nm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qp,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zg(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Hg.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await kg(this,{idToken:e}),n=await jg._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ar(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ng(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pg(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ar(this.app))return Promise.reject(eg(this));const t=e?yi(e):null;return t&&ng(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ng(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Ar(this.app)?Promise.reject(eg(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ar(this.app)?Promise.reject(eg(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(zg(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return gg(e,"GET","/v2/passwordPolicy",pg(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new im(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new li("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return gg(e,"POST","/v2/accounts:revokeToken",pg(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zg(e)||this._popupRedirectResolver;ng(t,this,"argument-error"),this.redirectPersistenceManager=await Hg.create(this,[zg(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ng(o,this,"internal-error"),o.then((()=>{s||r(this.currentUser)})),"function"===typeof t){const r=e.addObserver(t,n,i);return()=>{s=!0,r()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ng(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Yp.logLevel<=Si.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Yp.warn("Auth (".concat(Rr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function sm(e){return yi(e)}class om{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new gi(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return ng(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let am={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lm(e){return am.loadJS(e)}function cm(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class um{constructor(e){this.type="recaptcha-enterprise",this.auth=sm(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,i){const r=window.grecaptcha;xg(r)?r.enterprise.ready((()=>{r.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Eg(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new Sg(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((r=>{if(!t&&xg(window.grecaptcha))n(r,e,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=am.recaptchaEnterpriseScript;0!==t.length&&(t+=r),lm(t).then((()=>{n(r,e,i)})).catch((e=>{i(e)}))}})).catch((e=>{i(e)}))}))}}async function hm(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new um(e);let s;try{s=await r.verify(n)}catch(a){s=await r.verify(n,!0)}const o=Object.assign({},t);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function dm(e,t,n,i){var r;if(null===(r=e._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await hm(e,t,n,"getOobCode"===n);return i(e,r)}return i(e,t).catch((async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await hm(e,t,n,"getOobCode"===n);return i(e,r)}return Promise.reject(r)}))}function fm(e,t,n){const i=sm(e);ng(i._canInitEmulator,i,"emulator-config-failed"),ng(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=pm(t),{host:o,port:a}=function(e){const t=pm(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:gm(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:gm(t)}}}(t),l=null===a?"":":".concat(a);i.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function pm(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function gm(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class mm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ig("not implemented")}_getIdTokenResponse(e){return ig("not implemented")}_linkToIdToken(e,t){return ig("not implemented")}_getReauthenticationResolver(e){return ig("not implemented")}}async function ym(e,t){return gg(e,"POST","/v1/accounts:signUp",t)}async function vm(e,t){return yg(e,"POST","/v1/accounts:signInWithPassword",pg(e,t))}class bm extends mm{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new bm(e,t,"password")}static _fromEmailAndCode(e,t){return new bm(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return dm(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",vm);case"emailLink":return async function(e,t){return yg(e,"POST","/v1/accounts:signInWithEmailLink",pg(e,t))}(e,{email:this._email,oobCode:this._password});default:$p(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return dm(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ym);case"emailLink":return async function(e,t){return yg(e,"POST","/v1/accounts:signInWithEmailLink",pg(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:$p(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function _m(e,t){return yg(e,"POST","/v1/accounts:signInWithIdp",pg(e,t))}class wm extends mm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wm(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$p("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=Wp(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new wm(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return _m(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,_m(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_m(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=di(t)}return e}}const xm={USER_NOT_FOUND:"user-not-found"};class Sm extends mm{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Sm({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Sm({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return yg(e,"POST","/v1/accounts:signInWithPhoneNumber",pg(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await yg(e,"POST","/v1/accounts:signInWithPhoneNumber",pg(e,t));if(n.temporaryProof)throw wg(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return yg(e,"POST","/v1/accounts:signInWithPhoneNumber",pg(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),xm)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new Sm({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Em{constructor(e){var t,n,i,r,s,o;const a=fi(pi(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);ng(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=fi(pi(e)).link,n=t?fi(pi(t)).deep_link_id:null,i=fi(pi(e)).deep_link_id;return(i?fi(pi(i)).link:null)||i||n||t||e}(e);try{return new Em(t)}catch(n){return null}}}class km{constructor(){this.providerId=km.PROVIDER_ID}static credential(e,t){return bm._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Em.parseLink(t);return ng(n,"argument-error"),bm._fromEmailAndCode(e,n.code,n.tenantId)}}km.PROVIDER_ID="password",km.EMAIL_PASSWORD_SIGN_IN_METHOD="password",km.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Tm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Cm extends Tm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Im extends Cm{constructor(){super("facebook.com")}static credential(e){return wm._fromParams({providerId:Im.PROVIDER_ID,signInMethod:Im.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Im.credentialFromTaggedObject(e)}static credentialFromError(e){return Im.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Im.credential(t.oauthAccessToken)}catch(n){return null}}}Im.FACEBOOK_SIGN_IN_METHOD="facebook.com",Im.PROVIDER_ID="facebook.com";class Am extends Cm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wm._fromParams({providerId:Am.PROVIDER_ID,signInMethod:Am.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Am.credentialFromTaggedObject(e)}static credentialFromError(e){return Am.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Am.credential(n,i)}catch(r){return null}}}Am.GOOGLE_SIGN_IN_METHOD="google.com",Am.PROVIDER_ID="google.com";class Nm extends Cm{constructor(){super("github.com")}static credential(e){return wm._fromParams({providerId:Nm.PROVIDER_ID,signInMethod:Nm.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nm.credentialFromTaggedObject(e)}static credentialFromError(e){return Nm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Nm.credential(t.oauthAccessToken)}catch(n){return null}}}Nm.GITHUB_SIGN_IN_METHOD="github.com",Nm.PROVIDER_ID="github.com";class Om extends Cm{constructor(){super("twitter.com")}static credential(e,t){return wm._fromParams({providerId:Om.PROVIDER_ID,signInMethod:Om.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Om.credentialFromTaggedObject(e)}static credentialFromError(e){return Om.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Om.credential(n,i)}catch(r){return null}}}async function Rm(e,t){return yg(e,"POST","/v1/accounts:signUp",pg(e,t))}Om.TWITTER_SIGN_IN_METHOD="twitter.com",Om.PROVIDER_ID="twitter.com";class Pm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await jg._fromIdTokenResponse(e,n,i),s=Dm(n);return new Pm({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Dm(n);return new Pm({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Dm(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Mm extends ai{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Mm.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Mm(e,t,n,i)}}function Lm(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Mm._fromErrorAndOperation(e,n,t,i);throw n}))}async function jm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await Ng(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Pm._forOperation(e,"link",i)}async function Fm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if(Ar(i.app))return Promise.reject(eg(i));const r="reauthenticate";try{const s=await Ng(e,Lm(i,r,t,e),n);ng(s.idToken,i,"internal-error");const o=Ig(s.idToken);ng(o,i,"internal-error");const{sub:a}=o;return ng(e.uid===a,i,"user-mismatch"),Pm._forOperation(e,r,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&$p(i,"user-mismatch"),s}}async function zm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ar(e.app))return Promise.reject(eg(e));const i="signIn",r=await Lm(e,i,t),s=await Pm._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function Um(e,t){return zm(sm(e),t)}async function Vm(e){const t=sm(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const Bm="__sak";class Hm{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bm,"1"),this.storage.removeItem(Bm),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class qm extends Hm{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=em(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);Zg()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}qm.type="LOCAL";const Wm=qm;class Km extends Hm{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Km.type="SESSION";const Gm=Km;class Qm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Qm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async e=>e(t.origin,r))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ym(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}Qm.receivers=[];class Xm{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const l=Ym("",20);i.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function $m(){return window}function Jm(){return"undefined"!==typeof $m().WorkerGlobalScope&&"function"===typeof $m().importScripts}const Zm="firebaseLocalStorageDb",ey="firebaseLocalStorage",ty="fbase_key";class ny{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function iy(e,t){return e.transaction([ey],t?"readwrite":"readonly").objectStore(ey)}function ry(){const e=indexedDB.open(Zm,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ey,{keyPath:ty})}catch(i){n(i)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ey)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Zm);return new ny(e).toPromise()}(),t(await ry()))}))}))}async function sy(e,t,n){const i=iy(e,!0).put({[ty]:t,value:n});return new ny(i).toPromise()}function oy(e,t){const n=iy(e,!0).delete(t);return new ny(n).toPromise()}class ay{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await ry()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qm._getInstance(Jm()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Xm(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ry();return await sy(e,Bm,"1"),await oy(e,Bm),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>sy(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=iy(e,!1).get(t),i=await new ny(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>oy(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=iy(e,!1).getAll();return new ny(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ay.type="LOCAL";const ly=ay;cm("rcb"),new cg(3e4,6e4);const cy="recaptcha";async function uy(e,t,n){var i;const r=await n.verify();try{let s;if(ng("string"===typeof r,e,"argument-error"),ng(n.type===cy,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ng("enroll"===t.type,e,"internal-error");const n=await function(e,t){return gg(e,"POST","/v2/accounts/mfaEnrollment:start",pg(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{ng("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;ng(n,e,"missing-multi-factor-info");const o=await function(e,t){return gg(e,"POST","/v2/accounts/mfaSignIn:start",pg(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return gg(e,"POST","/v1/accounts:sendVerificationCode",pg(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}class hy{constructor(e){this.providerId=hy.PROVIDER_ID,this.auth=sm(e)}verifyPhoneNumber(e,t){return uy(this.auth,e,yi(t))}static credential(e,t){return Sm._fromVerification(e,t)}static credentialFromResult(e){const t=e;return hy.credentialFromTaggedObject(t)}static credentialFromError(e){return hy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:i}=t;return n&&i?Sm._fromTokenResponse(n,i):null}}function dy(e,t){return t?zg(t):(ng(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}hy.PROVIDER_ID="phone",hy.PHONE_SIGN_IN_METHOD="phone";class fy extends mm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _m(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _m(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _m(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function py(e){return zm(e.auth,new fy(e),e.bypassAuthState)}function gy(e){const{auth:t,user:n}=e;return ng(n,t,"internal-error"),Fm(n,new fy(e),e.bypassAuthState)}async function my(e){const{auth:t,user:n}=e;return ng(n,t,"internal-error"),jm(n,new fy(e),e.bypassAuthState)}class yy{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return py;case"linkViaPopup":case"linkViaRedirect":return my;case"reauthViaPopup":case"reauthViaRedirect":return gy;default:$p(this.auth,"internal-error")}}resolve(e){rg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vy=new cg(2e3,1e4);class by extends yy{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,by.currentPopupAction&&by.currentPopupAction.cancel(),by.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ng(e,this.auth,"internal-error"),e}async onExecution(){rg(1===this.filter.length,"Popup operations only handle one event");const e=Ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Jp(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Jp(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,by.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Jp(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,vy.get())};e()}}by.currentPopupAction=null;const _y=new Map;class wy extends yy{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=_y.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ey(t),i=Sy(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}_y.set(this.auth._key(),e)}return this.bypassAuthState||_y.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function xy(e,t){_y.set(e._key(),t)}function Sy(e){return zg(e._redirectPersistence)}function Ey(e){return Bg("pendingRedirect",e.config.apiKey,e.name)}async function ky(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ar(e.app))return Promise.reject(eg(e));const i=sm(e),r=dy(i,t),s=new wy(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class Ty{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Iy(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Iy(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Jp(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cy(e))}saveEventToCache(e){this.cachedEventUids.add(Cy(e)),this.lastProcessedEventTime=Date.now()}}function Cy(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Iy(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Ay=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ny=/^https?/;async function Oy(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return gg(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const i of t)try{if(Ry(i))return}catch(n){}$p(e,"unauthorized-domain")}function Ry(e){const t=sg(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Ny.test(n))return!1;if(Ay.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Py=new cg(3e4,6e4);function Dy(){const e=$m().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function My(e){return new Promise(((t,n)=>{var i,r,s;function o(){Dy(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Dy(),n(Jp(e,"network-request-failed"))},timeout:Py.get()})}if(null===(r=null===(i=$m().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=$m().gapi)||void 0===s?void 0:s.load)){const t=cm("iframefcb");return $m()[t]=()=>{gapi.load?o():n(Jp(e,"network-request-failed"))},lm("".concat(am.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Ly=null,e}))}let Ly=null;const jy=new cg(5e3,15e3),Fy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uy(e){const t=e.config;ng(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ug(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),i={apiKey:t.apiKey,appName:e.name,v:Rr},r=zy.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat(di(i).slice(1))}async function Vy(e){const t=await function(e){return Ly=Ly||My(e),Ly}(e),n=$m().gapi;return ng(n,e,"internal-error"),t.open({where:document.body,url:Uy(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fy,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=Jp(e,"network-request-failed"),s=$m().setTimeout((()=>{i(r)}),jy.get());function o(){$m().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{i(r)}))}))))}const By={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Hy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function qy(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},By),{width:i.toString(),height:r.toString(),top:s,left:o}),c=ri().toLowerCase();n&&(a=Gg(c)?"_blank":n),Wg(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,i]=t;return"".concat(e).concat(n,"=").concat(i,",")}),"");if(function(){var e;return Jg(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ri())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new Hy(null);const h=window.open(t||"",a,u);ng(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Hy(h)}const Wy="__/auth/handler",Ky="emulator/auth/handler",Gy=encodeURIComponent("fac");async function Qy(e,t,n,i,r,s){ng(e.config.authDomain,e,"auth-domain-config-required"),ng(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Rr,eventId:r};if(t instanceof Tm){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Cm){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Gy,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Wy);return ug(t,Ky)}(e),"?").concat(di(a).slice(1)).concat(c)}const Yy="webStorageSupport";const Xy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gm,this._completeRedirectFn=ky,this._overrideRedirectResult=xy}async _openPopup(e,t,n,i){var r;rg(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return qy(e,await Qy(e,t,n,sg(),i),Ym())}async _openRedirect(e,t,n,i){await this._originValidation(e);return function(e){$m().location.href=e}(await Qy(e,t,n,sg(),i)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(rg(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Vy(e),n=new Ty(e);return t.register("authEvent",(t=>{ng(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Yy,{type:Yy},(n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[Yy];void 0!==r&&t(!!r),$p(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Oy(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return em()||Kg()||Jg()}};var $y="@firebase/auth",Jy="1.7.9";class Zy{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ng(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ev=ti("authIdTokenMaxAge")||300;let tv=null;function nv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr();const t=Ir(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Ir(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(ui(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;$p(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Xy,persistence:[ly,Wm,Gm]}),i=ti("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=(r=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ev)return;const i=null===t||void 0===t?void 0:t.token;tv!==i&&(tv=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))});!function(e,t,n){yi(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,i){yi(e).onIdTokenChanged(t,n,i)}(n,(e=>t(e)))}}var r;const s=Jn("auth");return s&&fm(n,"http://".concat(s)),n}var iv,rv;iv={loadJS:e=>new Promise(((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=Jp("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},am=iv,rv="Browser",Cr(new vi("auth",((e,t)=>{let{options:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ng(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:rv,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tm(rv)},c=new rm(i,r,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(zg);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Cr(new vi("auth-internal",(e=>(e=>new Zy(e))(sm(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Mr($y,Jy,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(rv)),Mr($y,Jy,"esm2017");const sv={apiKey:"AIzaSyC_3HCvaCSsLDvO0IJNmjXNvtNffalUl8Y",authDomain:"my-app-71530.firebaseapp.com",projectId:"my-app-71530",storageBucket:"my-app-71530.firebasestorage.app",messagingSenderId:"29159149861",appId:"1:29159149861:web:5ca6583d1f45efcb6e0acc",measurementId:"G-CZNHMSMK8P"};if(!sv.apiKey)throw new Error("Firebase configuration is missing. Please check your environment variables.");const ov=Pr(sv),av=(nv(ov),kd(ov));const lv=new class{constructor(){this.auth=nv(ov)}async register(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user";const i=await async function(e,t,n){if(Ar(e.app))return Promise.reject(eg(e));const i=sm(e),r=dm(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Rm),s=await r.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Vm(e),t})),o=await Pm._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(o.user),o}(this.auth,e,t);return await this.createUserProfile(i.user.uid,{email:e,role:n,weakTopics:{},strongTopics:[],lastAnalysis:void 0,createdAt:(new Date).toISOString(),lastLogin:(new Date).toISOString()}),i.user}async login(e,t){return await function(e,t,n){return Ar(e.app)?Promise.reject(eg(e)):Um(yi(e),km.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Vm(e),t}))}(this.auth,e,t)}async logout(){return await function(e){return yi(e).signOut()}(this.auth)}onAuthStateChange(e){return function(e,t,n,i){return yi(e).onAuthStateChanged(t,n,i)}(this.auth,e)}async createUserProfile(e,t){const n=xd(av,"users",e);await Ef(n,t)}async getUserProfile(e){const t=xd(av,"users",e),n=await wf(t);return n.exists()?n.data():null}getCurrentUser(){return this.auth.currentUser}async updateUserWeakTopics(e,t){const n=xd(av,"users",e),i=await wf(n);if(i.exists()){const e=h(h({},i.data().weakTopics||{}),t);await kf(n,{weakTopics:e})}else await kf(n,{weakTopics:t})}async updateUserStrongTopics(e,t){const n=xd(av,"users",e),i=await wf(n);if(i.exists()){const e=i.data().strongTopics||[],r=Array.from(new Set([...e,...t]));await kf(n,{strongTopics:r})}else await kf(n,{strongTopics:t})}async updateUserAnalysisResult(e,t){const n=xd(av,"users",e);await kf(n,{lastAnalysis:t})}async getUserWeakTopics(e){const t=await this.getUserProfile(e);return(null===t||void 0===t?void 0:t.weakTopics)||{}}async getUserStrongTopics(e){const t=await this.getUserProfile(e);return(null===t||void 0===t?void 0:t.strongTopics)||[]}async getUserLastAnalysisResult(e){const t=await this.getUserProfile(e);return(null===t||void 0===t?void 0:t.lastAnalysis)||null}};const cv=new class{async addCourse(e,t){try{const n=xd(wd(av,"courses")),i={id:n.id,name:e,userId:t,createdAt:(new Date).toISOString()};return await Ef(n,i),i}catch(n){if(n instanceof Error&&n.message.includes("permission"))throw new Error("Ders ekleme izniniz yok. L\xfctfen oturum a\xe7\u0131n.");throw new Error("Ders eklenirken bir hata olu\u015ftu. L\xfctfen tekrar deneyin.")}}async getUserCourses(e){try{const t=af(wd(av,"courses"),cf("userId","==",e)),n=await Sf(t);return n.docs.map((e=>({id:e.id,name:e.data().name,userId:e.data().userId,createdAt:e.data().createdAt})))}catch(t){if(t instanceof Error&&t.message.includes("permission"))throw new Error("Dersleri g\xf6r\xfcnt\xfcleme izniniz yok. L\xfctfen oturum a\xe7\u0131n.");throw new Error("Dersler y\xfcklenirken bir hata olu\u015ftu. L\xfctfen tekrar deneyin.")}}async getCourseQuizzes(e,t){try{const n=af(wd(av,"quizzes"),cf("courseId","==",e),cf("userId","==",t)),i=(await Sf(n)).docs.map((e=>{const t=e.data();return h(h({},t),{},{id:e.id,course:t.courseId,elapsedTime:t.formattedTime||t.elapsedTime.toString(),userLevel:t.userLevel||"beginner"})}));return i}catch(n){throw new Error("Ders s\u0131navlar\u0131 y\xfcklenirken bir hata olu\u015ftu")}}async getQuizCourse(e){try{const t=xd(av,"quizzes",e),n=await wf(t);if(!n.exists())throw new Error("S\u0131nav bulunamad\u0131");const i=n.data();if(!i.courseId)return null;const r=xd(av,"courses",i.courseId),s=await wf(r);if(!s.exists())return null;const o=s.data();return{id:s.id,name:o.name,userId:o.userId,createdAt:o.createdAt}}catch(t){throw new Error("S\u0131nava ait ders bilgisi al\u0131n\u0131rken bir hata olu\u015ftu")}}async getCourseName(e){try{const t=await wf(xd(av,"courses",e));return t.exists()&&t.data().name||"Bilinmeyen Ders"}catch(t){return"Bilinmeyen Ders"}}};var uv,hv,dv;!function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"}(uv||(uv={})),function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"}(hv||(hv={})),function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"}(dv||(dv={}));const fv=["user","model","function","system"];var pv,gv,mv,yv,vv,bv,_v,wv;!function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"}(pv||(pv={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(gv||(gv={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(mv||(mv={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"}(yv||(yv={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER"}(vv||(vv={})),function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"}(bv||(bv={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"}(_v||(_v={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(wv||(wv={}));class xv extends Error{constructor(e){super("[GoogleGenerativeAI Error]: ".concat(e))}}class Sv extends xv{constructor(e,t){super(e),this.response=t}}class Ev extends xv{constructor(e,t,n,i){super(e),this.status=t,this.statusText=n,this.errorDetails=i}}class kv extends xv{}var Tv;!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(Tv||(Tv={}));class Cv{constructor(e,t,n,i,r){this.model=e,this.task=t,this.apiKey=n,this.stream=i,this.requestOptions=r}toString(){var e,t;const n=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta",i=(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com";let r="".concat(i,"/").concat(n,"/").concat(this.model,":").concat(this.task);return this.stream&&(r+="?alt=sse"),r}}async function Iv(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",function(e){const t=[];return(null===e||void 0===e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("".concat("genai-js","/").concat("0.21.0")),t.join(" ")}(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let i=null===(t=e.requestOptions)||void 0===t?void 0:t.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(r){throw new kv("unable to convert customHeaders value ".concat(JSON.stringify(i)," to Headers: ").concat(r.message))}for(const[e,t]of i.entries()){if("x-goog-api-key"===e)throw new kv("Cannot set reserved header name ".concat(e));if("x-goog-api-client"===e)throw new kv("Header name ".concat(e," can only be set using the apiClient field"));n.append(e,t)}}return n}async function Av(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:fetch;const{url:a,fetchOptions:l}=await async function(e,t,n,i,r,s){const o=new Cv(e,t,n,i,s);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},Nv(s)),{method:"POST",headers:await Iv(o),body:r})}}(e,t,n,i,r,s);return async function(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fetch;try{n=await i(e,t)}catch(r){!function(e,t){let n=e;e instanceof Ev||e instanceof kv||(n=new xv("Error fetching from ".concat(t.toString(),": ").concat(e.message)),n.stack=e.stack);throw n}(r,e)}n.ok||await async function(e,t){let n,i="";try{const t=await e.json();i=t.error.message,t.error.details&&(i+=" ".concat(JSON.stringify(t.error.details)),n=t.error.details)}catch(r){}throw new Ev("Error fetching from ".concat(t.toString(),": [").concat(e.status," ").concat(e.statusText,"] ").concat(i),e.status,e.statusText,n)}(n,e);return n}(a,l,o)}function Nv(e){const t={};if(void 0!==(null===e||void 0===e?void 0:e.signal)||(null===e||void 0===e?void 0:e.timeout)>=0){const n=new AbortController;(null===e||void 0===e?void 0:e.timeout)>=0&&setTimeout((()=>n.abort()),e.timeout),(null===e||void 0===e?void 0:e.signal)&&e.signal.addEventListener("abort",(()=>{n.abort()})),t.signal=n.signal}return t}function Ov(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn("This response had ".concat(e.candidates.length," ")+"candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates."),Dv(e.candidates[0]))throw new Sv("".concat(Mv(e)),e);return function(e){var t,n,i,r;const s=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const o of null===(r=null===(i=e.candidates)||void 0===i?void 0:i[0].content)||void 0===r?void 0:r.parts)o.text&&s.push(o.text),o.executableCode&&s.push("\n```"+o.executableCode.language+"\n"+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&s.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}(e)}if(e.promptFeedback)throw new Sv("Text not available. ".concat(Mv(e)),e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn("This response had ".concat(e.candidates.length," ")+"candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates."),Dv(e.candidates[0]))throw new Sv("".concat(Mv(e)),e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Rv(e)[0]}if(e.promptFeedback)throw new Sv("Function call not available. ".concat(Mv(e)),e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn("This response had ".concat(e.candidates.length," ")+"candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates."),Dv(e.candidates[0]))throw new Sv("".concat(Mv(e)),e);return Rv(e)}if(e.promptFeedback)throw new Sv("Function call not available. ".concat(Mv(e)),e)},e}function Rv(e){var t,n,i,r;const s=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const o of null===(r=null===(i=e.candidates)||void 0===i?void 0:i[0].content)||void 0===r?void 0:r.parts)o.functionCall&&s.push(o.functionCall);return s.length>0?s:void 0}const Pv=[vv.RECITATION,vv.SAFETY,vv.LANGUAGE];function Dv(e){return!!e.finishReason&&Pv.includes(e.finishReason)}function Mv(e){var t,n,i;let r="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null===(i=e.candidates)||void 0===i?void 0:i[0]){const t=e.candidates[0];Dv(t)&&(r+="Candidate was blocked due to ".concat(t.finishReason),t.finishMessage&&(r+=": ".concat(t.finishMessage)))}}else r+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(r+=" due to ".concat(e.promptFeedback.blockReason)),(null===(n=e.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(r+=": ".concat(e.promptFeedback.blockReasonMessage));return r}function Lv(e){return this instanceof Lv?(this.v=e,this):new Lv(e)}function jv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){s.push([e,t,n,i])>1||a(e,t)}))})}function a(e,t){try{(n=r[e](t)).value instanceof Lv?Promise.resolve(n.value.v).then(l,c):u(s[0][2],n)}catch(i){u(s[0][3],i)}var n}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}"function"===typeof SuppressedError&&SuppressedError;const Fv=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function zv(e){const t=function(e){const t=e.getReader();return new ReadableStream({start(e){let n="";return i();function i(){return t.read().then((t=>{let{value:r,done:s}=t;if(s)return n.trim()?void e.error(new xv("Failed to parse stream")):void e.close();n+=r;let o,a=n.match(Fv);for(;a;){try{o=JSON.parse(a[1])}catch(l){return void e.error(new xv('Error parsing JSON response: "'.concat(a[1],'"')))}e.enqueue(o),n=n.substring(a[0].length),a=n.match(Fv)}return i()}))}}})}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[n,i]=t.tee();return{stream:Vv(n),response:Uv(i)}}async function Uv(e){const t=[],n=e.getReader();for(;;){const{done:e,value:i}=await n.read();if(e)return Ov(Bv(t));t.push(i)}}function Vv(e){return jv(this,arguments,(function*(){const t=e.getReader();for(;;){const{value:e,done:n}=yield Lv(t.read());if(n)break;yield yield Lv(Ov(e))}}))}function Bv(e){const t=e[e.length-1],n={promptFeedback:null===t||void 0===t?void 0:t.promptFeedback};for(const i of e){if(i.candidates)for(const e of i.candidates){const t=e.index;if(n.candidates||(n.candidates=[]),n.candidates[t]||(n.candidates[t]={index:e.index}),n.candidates[t].citationMetadata=e.citationMetadata,n.candidates[t].groundingMetadata=e.groundingMetadata,n.candidates[t].finishReason=e.finishReason,n.candidates[t].finishMessage=e.finishMessage,n.candidates[t].safetyRatings=e.safetyRatings,e.content&&e.content.parts){n.candidates[t].content||(n.candidates[t].content={role:e.content.role||"user",parts:[]});const i={};for(const r of e.content.parts)r.text&&(i.text=r.text),r.functionCall&&(i.functionCall=r.functionCall),r.executableCode&&(i.executableCode=r.executableCode),r.codeExecutionResult&&(i.codeExecutionResult=r.codeExecutionResult),0===Object.keys(i).length&&(i.text=""),n.candidates[t].content.parts.push(i)}}i.usageMetadata&&(n.usageMetadata=i.usageMetadata)}return n}async function Hv(e,t,n,i){return zv(await Av(t,Tv.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),i))}async function qv(e,t,n,i){const r=await Av(t,Tv.GENERATE_CONTENT,e,!1,JSON.stringify(n),i);return{response:Ov(await r.json())}}function Wv(e){if(null!=e)return"string"===typeof e?{role:"system",parts:[{text:e}]}:e.text?{role:"system",parts:[e]}:e.parts?e.role?e:{role:"system",parts:e.parts}:void 0}function Kv(e){let t=[];if("string"===typeof e)t=[{text:e}];else for(const n of e)"string"===typeof n?t.push({text:n}):t.push(n);return function(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let i=!1,r=!1;for(const s of e)"functionResponse"in s?(n.parts.push(s),r=!0):(t.parts.push(s),i=!0);if(i&&r)throw new xv("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!r)throw new xv("No content is provided for sending chat message.");if(i)return t;return n}(t)}function Gv(e){let t;if(e.contents)t=e;else{t={contents:[Kv(e)]}}return e.systemInstruction&&(t.systemInstruction=Wv(e.systemInstruction)),t}const Qv=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Yv={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};const Xv="SILENT_ERROR";class $v{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.model=t,this.params=n,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null===n||void 0===n?void 0:n.history)&&(!function(e){let t=!1;for(const n of e){const{role:e,parts:i}=n;if(!t&&"user"!==e)throw new xv("First content should be with role 'user', got ".concat(e));if(!fv.includes(e))throw new xv("Each item should include role field. Got ".concat(e," but valid roles are: ").concat(JSON.stringify(fv)));if(!Array.isArray(i))throw new xv("Content should have 'parts' property with an array of Parts");if(0===i.length)throw new xv("Each Content should have at least one part");const r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const t of i)for(const e of Qv)e in t&&(r[e]+=1);const s=Yv[e];for(const t of Qv)if(!s.includes(t)&&r[t]>0)throw new xv("Content with role '".concat(e,"' can't contain '").concat(t,"' part"));t=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,i,r,s,o,a;await this._sendPromise;const l=Kv(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(i=this.params)||void 0===i?void 0:i.generationConfig,tools:null===(r=this.params)||void 0===r?void 0:r.tools,toolConfig:null===(s=this.params)||void 0===s?void 0:s.toolConfig,systemInstruction:null===(o=this.params)||void 0===o?void 0:o.systemInstruction,cachedContent:null===(a=this.params)||void 0===a?void 0:a.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),t);let h;return this._sendPromise=this._sendPromise.then((()=>qv(this._apiKey,this.model,c,u))).then((e=>{var t;if(e.response.candidates&&e.response.candidates.length>0){this._history.push(l);const n=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(n)}else{const t=Mv(e.response);t&&console.warn("sendMessage() was unsuccessful. ".concat(t,". Inspect response object for details."))}h=e})),await this._sendPromise,h}async sendMessageStream(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,i,r,s,o,a;await this._sendPromise;const l=Kv(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(i=this.params)||void 0===i?void 0:i.generationConfig,tools:null===(r=this.params)||void 0===r?void 0:r.tools,toolConfig:null===(s=this.params)||void 0===s?void 0:s.toolConfig,systemInstruction:null===(o=this.params)||void 0===o?void 0:o.systemInstruction,cachedContent:null===(a=this.params)||void 0===a?void 0:a.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),t),h=Hv(this._apiKey,this.model,c,u);return this._sendPromise=this._sendPromise.then((()=>h)).catch((e=>{throw new Error(Xv)})).then((e=>e.response)).then((e=>{if(e.candidates&&e.candidates.length>0){this._history.push(l);const t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{const t=Mv(e);t&&console.warn("sendMessageStream() was unsuccessful. ".concat(t,". Inspect response object for details."))}})).catch((e=>{e.message!==Xv&&console.error(e)})),h}}class Jv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model="models/".concat(t.model),this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=Wv(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const i=Gv(e),r=Object.assign(Object.assign({},this._requestOptions),t);return qv(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},i),r)}async generateContentStream(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const i=Gv(e),r=Object.assign(Object.assign({},this._requestOptions),t);return Hv(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},i),r)}startChat(e){var t;return new $v(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},e),this._requestOptions)}async countTokens(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e,t){var n;let i={model:null===t||void 0===t?void 0:t.model,generationConfig:null===t||void 0===t?void 0:t.generationConfig,safetySettings:null===t||void 0===t?void 0:t.safetySettings,tools:null===t||void 0===t?void 0:t.tools,toolConfig:null===t||void 0===t?void 0:t.toolConfig,systemInstruction:null===t||void 0===t?void 0:t.systemInstruction,cachedContent:null===(n=null===t||void 0===t?void 0:t.cachedContent)||void 0===n?void 0:n.name,contents:[]};const r=null!=e.generateContentRequest;if(e.contents){if(r)throw new kv("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=e.contents}else if(r)i=Object.assign(Object.assign({},i),e.generateContentRequest);else{const t=Kv(e);i.contents=[t]}return{generateContentRequest:i}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,i){return(await Av(t,Tv.COUNT_TOKENS,e,!1,JSON.stringify(n),i)).json()}(this.apiKey,this.model,n,i)}async embedContent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e){if("string"===typeof e||Array.isArray(e))return{content:Kv(e)};return e}(e),i=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,i){return(await Av(t,Tv.EMBED_CONTENT,e,!1,JSON.stringify(n),i)).json()}(this.apiKey,this.model,n,i)}async batchEmbedContents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,i){const r=n.requests.map((e=>Object.assign(Object.assign({},e),{model:t})));return(await Av(t,Tv.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:r}),i)).json()}(this.apiKey,this.model,e,n)}}const Zv=10485760,eb="rate limit exceeded",tb={general:50},nb="AIzaSyAAiJQENHEYsMPaklH2K_Ufl59EwdS5_Ao",ib=nb?new class{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new xv("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Jv(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new kv("Cached content must contain a `name` field.");if(!e.model)throw new kv("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const s of i)if((null===t||void 0===t?void 0:t[s])&&e[s]&&(null===t||void 0===t?void 0:t[s])!==e[s]){if("model"===s){if((t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue}throw new kv('Different value for "'.concat(s,'" specified in modelParams')+" (".concat(t[s],") and cachedContent (").concat(e[s],")"))}const r=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Jv(this.apiKey,r,n)}}(nb):void 0,rb=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;try{return await e()}catch(s){var i;if(0===t)throw s;if(null!==(i=s.message)&&void 0!==i&&i.includes(eb))return await(r=n,new Promise((e=>setTimeout(e,r)))),rb(e,t-1,2*n);throw s}var r},sb=async(e,t,n,i,r,s,o)=>{if(!ib)throw console.error("API key bulunamad\u0131."),new Error("API key bulunamad\u0131.");try{const n=ib.getGenerativeModel({model:"gemini-2.0-flash-exp"}),a=t.optionCount||4,l=(e.split(/\s+/).length,t.typeCount.multipleChoice),c=Math.max(3,Math.min(20,l)),u=function(e,t){let n={easy:.4,medium:.4,hard:.2};switch(e){case"beginner":n={easy:.6,medium:.3,hard:.1};break;case"intermediate":n={easy:.3,medium:.5,hard:.2};break;case"advanced":n={easy:.2,medium:.4,hard:.4}}return{easy:Math.round(t*n.easy),medium:Math.round(t*n.medium),hard:Math.round(t*n.hard)}}(i,c),d="\n    Verilen metinden ".concat(c," adet \xe7oktan se\xe7meli soru olu\u015ftur.\n    Her soruda tam olarak ").concat(a," se\xe7enek olmal\u0131.\n    \n    Metin: ").concat(e,"\n    \n    Kullan\u0131c\u0131 Seviyesi: ").concat(i,"\n    \n    Soru Da\u011f\u0131l\u0131m\u0131:\n    - Kolay sorular: ").concat(u.easy," soru\n    - Orta zorlukta sorular: ").concat(u.medium," soru\n    - Zor sorular: ").concat(u.hard," soru\n    \n    ").concat(o?"Zay\u0131f Konular: ".concat(Object.keys(r).join(", ")):"","\n    ").concat(s.length>0?"Ba\u015far\u0131l\u0131 Olunan Konular (bu konulardan soru getirme): ".concat(s.join(", ")):"","\n    \n    Her soru i\xe7in:\n    1. Tam olarak ").concat(a," se\xe7enek olmal\u0131\n    2. Se\xe7enekler A, B, C, D \u015feklinde olmal\u0131\n    3. Her sorunun zorluk seviyesi belirtilmeli (easy, medium, hard)\n    4. Do\u011fru cevap se\xe7eneklerden biri olmal\u0131\n    5. Ba\u015far\u0131l\u0131 olunan konulardan soru getirme\n    ").concat(o?"6. Zay\u0131f konulara \xf6ncelik ver":"",'\n    \n    Yan\u0131t\u0131 a\u015fa\u011f\u0131daki JSON format\u0131nda ver:\n    {\n      "questions": [\n        {\n          "id": 1,\n          "type": "multiple-choice",\n          "difficulty": "easy|medium|hard",\n          "question": "Soru metni",\n          "options": ["A) Se\xe7enek 1", "B) Se\xe7enek 2", "C) Se\xe7enek 3", "D) Se\xe7enek 4"],\n          "correctAnswer": "A) Se\xe7enek 1",\n          "topic": "Konu"\n        }\n      ]\n    }'),f=async()=>{let e=(await n.generateContent(d)).response.text().replace(/```json\n?|\n?```/g,"").trim();if(!e.startsWith("{"))throw new Error("AI yan\u0131t\u0131 JSON format\u0131nda de\u011fil");try{e=e.replace(/[\u201C\u201D\u2018\u2019]/g,'"');const t=JSON.parse(e);if(!t.questions||!Array.isArray(t.questions))throw new Error("Ge\xe7erli soru listesi olu\u015fturulamad\u0131");return t.questions.map(((e,t)=>{if(!e.question||"string"!==typeof e.question)throw new Error("Soru ".concat(t+1,": Soru metni eksik veya hatal\u0131"));if(!e.options||!Array.isArray(e.options))throw new Error("Soru ".concat(t+1,": Se\xe7enekler hatal\u0131 formatta"));if(e.options.length!==a){const t=Array(a).fill("").map(((t,n)=>e.options[n]||"".concat(String.fromCharCode(65+n),") Ge\xe7ersiz se\xe7enek")));e.options=t}return e.correctAnswer&&e.options.includes(e.correctAnswer)||(e.correctAnswer=e.options[0]),["easy","medium","hard"].includes(e.difficulty)||(e.difficulty="medium"),h(h({},e),{},{id:t+1,type:"multiple-choice"})}))}catch(t){throw new Error("JSON ayr\u0131\u015ft\u0131rma hatas\u0131: ".concat(t))}};return await rb(f)}catch(l){var a;if(console.error("Soru \xfcretme hatas\u0131:",l),null!==(a=l.message)&&void 0!==a&&a.includes(eb))throw new Error("\xc7ok fazla istek yap\u0131ld\u0131. L\xfctfen bir s\xfcre bekleyip tekrar deneyin.");throw new Error("Bir hata olu\u015ftu. L\xfctfen tekrar deneyin.")}};const ob=new class{constructor(){this.userLevel="beginner",this.defaultTopics=tb}async createQuiz(e,t){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];try{if(!e||e.length<10)throw new Error("Metin \xe7ok k\u0131sa");let i={},r=[];const s=await lv.getCurrentUser();if(s){const e=await lv.getUserProfile(s.uid);e&&(i=e.weakTopics||{},r=e.strongTopics||[])}const o=Object.entries(i).sort(((e,t)=>t[1].failCount-e[1].failCount)).slice(0,5).map((e=>e[0])),a=await sb(e,t,0,this.userLevel,o.reduce(((e,t)=>(e[t]=i[t].failCount,e)),{}),r,n);if(!a||0===a.length)throw new Error("Sorular olu\u015fturulamad\u0131");return a}catch(i){throw console.error("Error in createQuiz:",i),i}}setUserLevel(e){this.userLevel=e}calculateScore(e,t){let n=0;return Object.entries(t).forEach((t=>{let[i,r]=t;const s=e.find((e=>e.id===i));s&&s.correctAnswer===r&&n++})),n/e.length*100}assessUserLevel(e){return e<50?"beginner":e<70?"intermediate":"advanced"}calculateAnalysisResult(e,t){const n={},i={easy:{correct:0,total:0},medium:{correct:0,total:0},hard:{correct:0,total:0}};e.forEach(((e,r)=>{const s=e.id||r.toString(),o=t[s]===e.correctAnswer;n[e.topic]||(n[e.topic]={correct:0,total:0,percentage:0}),n[e.topic].total++,o&&n[e.topic].correct++,i[e.difficulty].total++,o&&i[e.difficulty].correct++})),Object.keys(n).forEach((e=>{const t=n[e];t.percentage=t.correct/t.total*100}));const r=[],s=[],o=[];Object.entries(n).forEach((e=>{let[t,n]=e;n.percentage<60?(r.push(t),o.push("".concat(t," konusunu tekrar \xe7al\u0131\u015fman\u0131z\u0131 \xf6neririz."))):n.percentage>=80&&s.push(t)}));const a={easy:i.easy.correct/(i.easy.total||1)*100,medium:i.medium.correct/(i.medium.total||1)*100,hard:i.hard.correct/(i.hard.total||1)*100},l=Object.values(n).reduce(((e,t)=>e+t.correct),0),c=Object.values(n).reduce(((e,t)=>e+t.total),0),u=l/c*100;return{masteredTopics:s,weakTopics:r,learnedTopics:s,gapTopics:r,overallPerformance:u,confidenceScore:(a.hard+u)/2,recommendations:o,topicPerformance:n,recommendedFocus:r,performanceByDifficulty:a}}async saveQuiz(e,t,n,i,r,s,o){try{let a=0;t.forEach((e=>{n[e.id]===e.correctAnswer&&a++}));const l=a/t.length*100,c=this.assessUserLevel(l),u=this.calculateAnalysisResult(t,n),d={questions:t,userAnswers:n,preferences:{questionTypes:{multipleChoice:!0},typeCount:{multipleChoice:t.length}},fileName:i,userId:o,timestamp:(new Date).toISOString(),score:Math.round(l),elapsedTime:r,formattedTime:s,userLevel:c,courseId:e,analysisResult:u},f=await(async e=>{const t=xd(wd(av,"quizzes"));return await Ef(t,e),t.id})(d),p=u.weakTopics.reduce(((e,t)=>(e[t]={failCount:1,lastAttempt:(new Date).toISOString(),status:"active"},e)),{});return await lv.updateUserWeakTopics(o,p),await lv.updateUserAnalysisResult(o,u),{success:!0,data:h(h({},d),{},{id:f})}}catch(a){return console.error("Error saving quiz:",a),{success:!1,error:"Quiz kaydedilirken bir hata olu\u015ftu"}}}async getQuiz(e){try{const n=xd(av,"quizzes",e),i=await wf(n);if(i.exists()){var t;const e=i.data(),n={questionTypes:{multipleChoice:!0},typeCount:{multipleChoice:10}};let r;r=null!==(t=e.timestamp)&&void 0!==t&&t.toDate?e.timestamp.toDate().toISOString():"string"===typeof e.timestamp?e.timestamp:(new Date).toISOString();return{id:i.id,questions:e.questions||[],userAnswers:e.userAnswers||{},preferences:e.preferences||n,fileName:e.fileName||"Unnamed Quiz",results:e.results||null,timestamp:r,userId:e.userId,formattedTime:e.formattedTime,course:e.courseId||"Genel",score:e.score,elapsedTime:e.elapsedTime,userLevel:e.userLevel}}return null}catch(n){throw console.error("getQuiz hatas\u0131:",n),n}}async getAllQuizzes(){try{const e=wd(av,"quizzes"),t=await Sf(e),n={questionTypes:{multipleChoice:!0},typeCount:{multipleChoice:10}},i=t.docs.map((e=>{var t;const i=e.data();let r;r=null!==(t=i.timestamp)&&void 0!==t&&t.toDate?i.timestamp.toDate().toISOString():"string"===typeof i.timestamp?i.timestamp:(new Date).toISOString();return{id:e.id,questions:i.questions||[],userAnswers:i.userAnswers||{},preferences:i.preferences||n,fileName:i.fileName||"Unnamed Quiz",results:i.results||null,timestamp:r,userId:i.userId,formattedTime:i.formattedTime,course:i.courseId||"Genel",score:i.score,elapsedTime:i.elapsedTime,userLevel:i.userLevel}}));return i}catch(e){throw console.error("getAllQuizzes hatas\u0131:",e),e}}async updateQuiz(e,t){const n=xd(av,"quizzes",e);await kf(n,t)}async deleteQuiz(e){const t=xd(av,"quizzes",e);var n;await(n=t,Tf(gd(n.firestore,Ed),[new Tl(n._key,fl.none())]))}async createQuizInFirestore(e,t){const n=xd(wd(av,"quizzes")),i=(new Date).toISOString(),r=h(h({},e),{},{id:n.id,userId:t,timestamp:i,courseId:e.courseId||null});return await Ef(n,r),n.id}};kd(ov);class ab{getCurrentUser(){return lv.getCurrentUser()}constructor(){this.storage=void 0,this.db=void 0,this.storage=Hp(ov),this.db=kd(ov)}static getInstance(){if(!ab.instance)try{ab.instance=new ab}catch(e){throw console.error("Failed to initialize Firebase Service:",e),e}return ab.instance}get auth(){return lv}get course(){return cv}get quiz(){return ob}async getQuiz(e){return this.quiz.getQuiz(e)}async getAllQuizzes(){return this.quiz.getAllQuizzes()}async updateQuiz(e,t){return this.quiz.updateQuiz(e,t)}async deleteQuiz(e){return this.quiz.deleteQuiz(e)}async getUserQuizzesWithCourses(){try{const e=this.auth.getCurrentUser();if(!e)throw new Error("Oturum a\xe7man\u0131z gerekiyor");const t=af(wd(this.db,"quizzes"),cf("userId","==",e.uid)),n=await Sf(t);return await Promise.all(n.docs.map((async e=>{var t;const n=h({id:e.id},e.data());let i=null;try{if(n.courseId){const e=xd(this.db,"courses",n.courseId),t=await wf(e);t.exists()&&(i={id:t.id,name:t.data().name,userId:t.data().userId,createdAt:t.data().createdAt})}}catch(r){}return{quiz:h(h({},n),{},{course:(null===(t=i)||void 0===t?void 0:t.name)||"Genel"}),course:i}})))}catch(e){throw new Error("S\u0131nav ve ders bilgileri y\xfcklenirken bir hata olu\u015ftu")}}async getAllQuizzesWithCourseNames(){try{const e=await Sf(wd(this.db,"quizzes")),t=[];return await Promise.all(e.docs.map((async e=>{const n=e.data(),i=n.timestamp?new Date(n.timestamp).toLocaleString():(new Date).toLocaleString(),r=await this.course.getCourseName(n.courseId),s={id:e.id,questions:n.questions||[],userAnswers:n.userAnswers||{},preferences:n.preferences||{},fileName:n.fileName||"Unnamed Quiz",results:n.results||null,timestamp:i,userId:n.userId,formattedTime:n.formattedTime,course:r,score:n.score,elapsedTime:n.elapsedTime,userLevel:n.userLevel};t.push(s)}))),t}catch(e){throw e}}async getQuizByIdWithCourseName(e){try{const t=await wf(xd(this.db,"quizzes",e));if(!t.exists())return null;const n=t.data(),i=n.timestamp?new Date(n.timestamp).toLocaleString():(new Date).toLocaleString(),r=await this.course.getCourseName(n.courseId);return{id:t.id,questions:n.questions||[],userAnswers:n.userAnswers||{},preferences:n.preferences||{},fileName:n.fileName||"Unnamed Quiz",results:n.results||null,timestamp:i,userId:n.userId,formattedTime:n.formattedTime,course:r,score:n.score,elapsedTime:n.elapsedTime,userLevel:n.userLevel}}catch(t){throw t}}async createQuiz(e){try{const t=this.auth.getCurrentUser();if(!t)throw new Error("Oturum a\xe7man\u0131z gerekiyor");const n=wd(this.db,"quizzes"),i=h(h({},e),{},{userId:t.uid,timestamp:(new Date).toISOString()});return(await function(e,t){const n=gd(e.firestore,Ed),i=xd(e),r=gf(e.converter,t);return Tf(n,[Ud(zd(e.firestore),"addDoc",i._key,r,null!==e.converter,{}).toMutation(i._key,fl.exists(!1))]).then((()=>i))}(n,i)).id}catch(t){throw new Error("S\u0131nav olu\u015fturulurken bir hata olu\u015ftu")}}async saveQuizResults(e,t){const n=xd(this.db,"quizzes",e);await kf(n,{analysisResult:t})}async getUserWeakTopics(e){const t=xd(this.db,"users",e),n=await wf(t);return n.exists()&&n.data().weakTopics||{}}async updateUserWeakTopics(e,t){const n=xd(this.db,"users",e),i=await wf(n);if(i.exists()){const e=h(h({},i.data().weakTopics||{}),t);await kf(n,{weakTopics:e})}else await kf(n,{weakTopics:t})}async cleanAllTopics(e){const t=xd(this.db,"users",e);await kf(t,{weakTopics:{},strongTopics:[],lastAnalysis:null})}async getAllUsers(){try{const e=wd(this.db,"users");return(await Sf(e)).docs.map((e=>h({id:e.id},e.data())))}catch(e){throw console.error("Error getting users:",e),e}}async updateUserProfile(e,t){try{const n=xd(this.db,"users",e);await kf(n,t)}catch(n){throw console.error("Error updating user profile:",n),n}}async getAdminStats(){try{const e={totalUsers:0,totalQuizzes:0,totalCourses:0},t=await Sf(wd(this.db,"users"));e.totalUsers=t.size;const n=await Sf(wd(this.db,"quizzes"));e.totalQuizzes=n.size;const i=await Sf(wd(this.db,"courses"));return e.totalCourses=i.size,e}catch(e){throw console.error("Error getting admin stats:",e),e}}async uploadFile(e,t){const n=(i=this.storage,r=e,jp(i=yi(i),r));var i,r;const s=await function(e,t,n){return Pp(e=yi(e),t,n)}(n,t);return await function(e){return Dp(e=yi(e))}(s.ref)}}ab.instance=void 0;const lb=ab.getInstance(),cb=(0,r.createContext)(null),ub=()=>{const e=(0,r.useContext)(cb);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},hb=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)(!0);(0,r.useEffect)((()=>lb.auth.onAuthStateChange((e=>{i(e),o(!1)}))),[]);const a={currentUser:n,loading:s,login:async(e,t)=>{try{const{user:n}=await lb.auth.login(e,t);n&&await lb.auth.createUserProfile(n.uid,{lastLogin:(new Date).toISOString()})}catch(n){throw n}},register:async function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];try{const s=await lb.auth.register(e,t);await lb.auth.createUserProfile(s.uid,{email:e,firstName:n,lastName:i,displayName:"".concat(n," ").concat(i),createdAt:(new Date).toISOString(),lastLogin:(new Date).toISOString(),role:r?"admin":"user"})}catch(s){throw s}},logout:()=>lb.auth.logout().then((()=>{})).catch((e=>{throw e})),isAdmin:async e=>{const t=await lb.auth.getUserProfile(e);return"admin"===(null===t||void 0===t?void 0:t.role)}};return(0,Un.jsx)(cb.Provider,{value:a,children:!s&&t})},db=e=>{let{questions:t,currentAnswers:n,onAnswerSelect:i,onClose:s,onShowResults:o,showResults:a}=e;const{getFormattedTime:l}=qn(),{currentUser:c}=ub(),[u,h]=(0,r.useState)([]);if((0,r.useEffect)((()=>{(async()=>{if(c){const e=await lv.getUserProfile(c.uid);e&&e.weakTopics&&h(Object.keys(e.weakTopics))}})()}),[c]),!t||0===t.length)return null;const d=e=>u.includes(e);return(0,Un.jsx)("div",{className:"quiz-output-overlay",onClick:e=>e.target===e.currentTarget&&s(),children:(0,Un.jsxs)("div",{className:"quiz-container",children:[(0,Un.jsx)("button",{className:"close-button",onClick:s,children:"\xd7"}),(0,Un.jsxs)("div",{className:"timer-display",children:[(0,Un.jsx)("span",{className:"timer-icon",children:"\u23f1"}),l()]}),(0,Un.jsxs)("div",{className:"questions-section",children:[t.map((e=>(0,Un.jsxs)("div",{className:"question-box ".concat(d(e.topic)?"weak-topic":""),children:[(0,Un.jsxs)("div",{className:"question-header",children:[(0,Un.jsx)("div",{className:"difficulty-indicator difficulty-".concat(e.difficulty||"medium"),children:"easy"===e.difficulty?"K":"hard"===e.difficulty?"Z":"O"}),(0,Un.jsxs)("div",{className:"question-title",children:[(0,Un.jsxs)("h3",{children:["Soru ",e.id]}),d(e.topic)&&(0,Un.jsx)("span",{className:"weak-topic-badge",title:"Zay\u0131f konu",children:"\u26a0\ufe0f"})]}),(0,Un.jsx)("p",{className:"question-text",children:e.question})]}),(0,Un.jsx)("div",{className:"options",children:e.options.map((t=>(0,Un.jsxs)("label",{className:"option-label",children:[(0,Un.jsx)("input",{type:"radio",name:"question-".concat(e.id),value:t,checked:n[e.id]===t,onChange:()=>i(e.id,t)}),t]},t)))})]},e.id))),(0,Un.jsx)("button",{className:"submit-button",onClick:()=>{Object.keys(n).length===t.length&&o(n,t)},disabled:Object.keys(n).length!==t.length,children:"S\u0131nav\u0131 Bitir"})]})]})})},fb=e=>{let{analysisResult:t}=e;if(!t)return null;const{weakTopics:n=[],masteredTopics:i=[],recommendations:r=[],topicPerformance:s={}}=t;return(0,Un.jsxs)("div",{className:"analysis-results",children:[(0,Un.jsx)("h2",{children:"Analiz Sonu\xe7lar\u0131"}),i.length>0&&(0,Un.jsxs)("div",{className:"result-section",children:[(0,Un.jsx)("h3",{children:"Ba\u015far\u0131l\u0131 Oldu\u011funuz Konular"}),(0,Un.jsx)("ul",{children:i.map(((e,t)=>(0,Un.jsx)("li",{children:e},t)))})]}),n.length>0&&(0,Un.jsxs)("div",{className:"result-section",children:[(0,Un.jsx)("h3",{children:"Geli\u015ftirilmesi Gereken Konular"}),(0,Un.jsx)("ul",{children:n.map(((e,t)=>(0,Un.jsx)("li",{children:e},t)))})]}),r.length>0&&(0,Un.jsxs)("div",{className:"result-section",children:[(0,Un.jsx)("h3",{children:"\xd6neriler"}),(0,Un.jsx)("ul",{children:r.map(((e,t)=>(0,Un.jsx)("li",{children:e},t)))})]}),Object.keys(s).length>0&&(0,Un.jsxs)("div",{className:"result-section",children:[(0,Un.jsx)("h3",{children:"Konu Bazl\u0131 Performans"}),Object.entries(s).map((e=>{let[t,n]=e;return(0,Un.jsxs)("div",{className:"topic-performance",children:[(0,Un.jsx)("h4",{children:t}),(0,Un.jsxs)("p",{children:["Do\u011fru: ",n.correct,"/",n.total,"(",(n.correct/n.total*100).toFixed(1),"%)"]})]},t)}))]})]})};const pb=new class{calculateResults(e,t){let n=0;const i={};e.forEach((e=>{t[e.id]===e.correctAnswer&&n++,i[e.topic]||(i[e.topic]={correct:0,total:0}),i[e.topic].total++,t[e.id]===e.correctAnswer&&i[e.topic].correct++}));const r=[],s=[],o=[];Object.entries(i).forEach((e=>{let[t,n]=e;const i=n.correct/n.total*100;i<60?(r.push(t),o.push("".concat(t," konusunu tekrar \xe7al\u0131\u015fman\u0131z\u0131 \xf6neririz."))):i>=80&&s.push(t)}));const a={masteredTopics:s,weakTopics:r,learnedTopics:s,gapTopics:r,overallPerformance:n/e.length*100,confidenceScore:n/e.length*100,recommendations:o,topicPerformance:Object.fromEntries(Object.entries(i).map((e=>{let[t,n]=e;return[t,{correct:n.correct,total:n.total,percentage:n.correct/n.total*100}]}))),recommendedFocus:r,performanceByDifficulty:{easy:0,medium:0,hard:0}};return{correct:n,total:e.length,wrong:e.length-n,percentage:(n/e.length*100).toFixed(2),analysisResult:a}}};const gb=e=>{let{formattedTime:t,questions:n,userAnswers:i,onRestartQuiz:s,preferences:o,fileName:a,course:l}=e;const{getFormattedTime:c}=qn(),[u,h]=(0,r.useState)({correct:0,wrong:0,total:0,percentage:0}),d=c()||"0 saniye",[f,p]=(0,r.useState)(null),[g,m]=(0,r.useState)(null);if((0,r.useEffect)((()=>{(()=>{if(n&&i)try{const e=pb.calculateResults(n,i);h({correct:e.correct,wrong:e.wrong,total:e.total,percentage:Number(e.percentage)})}catch(e){const t=e instanceof Error?e.message:"Sonu\xe7lar hesaplan\u0131rken bir hata olu\u015ftu";p(t)}})()}),[n,i]),(0,r.useEffect)((()=>{(async()=>{if(n&&i)try{const e=await(async(e,t)=>{const n={},i={easy:{correct:0,total:0},medium:{correct:0,total:0},hard:{correct:0,total:0}};e.forEach((e=>{const r=t[e.id]===e.correctAnswer,s=e.topic||"genel",o=e.difficulty||"medium";n[s]||(n[s]={correct:0,total:0}),n[s].total++,r&&n[s].correct++,i[o].total++,r&&i[o].correct++}));const r=[],s=[];Object.entries(n).forEach((e=>{let[t,n]=e;const i=n.correct/n.total*100;i<60?r.push(t):i>=80&&s.push(t)}));const o={easy:i.easy.correct/(i.easy.total||1)*100,medium:i.medium.correct/(i.medium.total||1)*100,hard:i.hard.correct/(i.hard.total||1)*100};return{weakTopics:r,masteredTopics:s,performance:o}})(n,i);m(e)}catch(e){const t=e instanceof Error?e.message:"Analiz olu\u015fturulurken bir hata olu\u015ftu";p(t)}})()}),[n,i]),!n||!i)return(0,Un.jsx)("div",{className:"error-message",children:"S\u0131nav verileri y\xfcklenemedi"});return(0,Un.jsxs)("div",{className:"quiz-results",children:[(0,Un.jsx)("h2",{children:"S\u0131nav Sonu\xe7lar\u0131"}),(0,Un.jsxs)("div",{className:"results-summary",children:[(0,Un.jsxs)("div",{className:"score-section",children:[(0,Un.jsx)("h3",{children:"Puan \xd6zeti"}),(0,Un.jsxs)("p",{children:["Toplam Soru: ",u.total]}),(0,Un.jsxs)("p",{children:["Do\u011fru Cevap: ",u.correct]}),(0,Un.jsxs)("p",{children:["Yanl\u0131\u015f Cevap: ",u.wrong]}),(0,Un.jsxs)("p",{children:["Ba\u015far\u0131 Y\xfczdesi: %",u.percentage]})]}),(0,Un.jsxs)("div",{className:"time-section",children:[(0,Un.jsx)("h3",{children:"S\xfcre Bilgisi"}),(0,Un.jsxs)("p",{children:["Toplam S\xfcre: ",d]})]}),(0,Un.jsxs)("div",{children:[(0,Un.jsx)("h3",{children:"ders"}),(0,Un.jsxs)("p",{children:["ders ismi: ",l]})]})]}),f&&(0,Un.jsx)("div",{className:"error-message",children:f}),g&&(0,Un.jsxs)("div",{className:"analysis-section",children:[(0,Un.jsx)("h3",{children:"Detayl\u0131 Analiz"}),(0,Un.jsx)(fb,{analysisResult:g})]}),(0,Un.jsxs)("div",{className:"questions-review",children:[(0,Un.jsx)("h3",{children:"Soru Detaylar\u0131"}),n.map((e=>{const t=i[e.id]===e.correctAnswer,n=e.difficulty||"medium";return(0,Un.jsxs)("div",{className:"question-review ".concat(t?"correct":"incorrect"),children:[(0,Un.jsx)("div",{className:"difficulty-badge difficulty-".concat(n),children:"easy"===n?"Kolay":"medium"===n?"Orta":"Zor"}),(0,Un.jsxs)("p",{children:[(0,Un.jsxs)("strong",{children:["Soru ",e.id,":"]})," ",e.question]}),(0,Un.jsxs)("p",{children:["Sizin Cevab\u0131n\u0131z: ",i[e.id]]}),(0,Un.jsxs)("p",{children:["Do\u011fru Cevap: ",e.correctAnswer]}),(0,Un.jsx)("p",{children:(0,Un.jsx)("small",{style:{color:t?"#48bb78":"#f56565"},children:t?"\u2713 Do\u011fru cevaplad\u0131n\u0131z":"\u2717 Yanl\u0131\u015f cevaplad\u0131n\u0131z"})})]},e.id)}))]}),(0,Un.jsx)("div",{className:"action-buttons",children:(0,Un.jsx)("button",{onClick:s,className:"restart-button",children:"Yeni S\u0131nav Ba\u015flat"})})]})},mb=()=>{const{currentUser:e,logout:t,isAdmin:n}=ub(),{isQuizActive:i,getFormattedTime:s}=qn(),o=se(),[a,l]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{if(e){const t=await n(e.uid);l(t)}else l(!1)})()}),[e,n]);return(0,Un.jsx)("header",{className:"App-header",children:(0,Un.jsxs)("div",{className:"header-container",children:[(0,Un.jsxs)("div",{className:"logo",children:[(0,Un.jsx)("h1",{children:"Quiz "}),i&&(0,Un.jsxs)("div",{className:"timer",children:["Ge\xe7en S\xfcre: ",s()]})]}),(0,Un.jsx)("nav",{className:"nav-menu",children:(0,Un.jsxs)("ul",{children:[(0,Un.jsx)("li",{children:(0,Un.jsx)("a",{href:"/",className:"nav-link",children:"Ana Sayfa"})}),e&&(0,Un.jsxs)(Un.Fragment,{children:[(0,Un.jsx)("li",{children:(0,Un.jsx)("a",{href:"/learning-progress",className:"nav-link",children:"\xd6\u011frenme Takibi"})}),a&&(0,Un.jsx)("li",{children:(0,Un.jsx)("a",{href:"/admin/dashboard",className:"nav-link admin-link",children:"Admin Panel"})})]}),(0,Un.jsx)("li",{className:"auth-item",children:(0,Un.jsx)("button",{onClick:async()=>{if(e)try{await t(),o("/")}catch(n){console.error("\xc7\u0131k\u0131\u015f yap\u0131l\u0131rken hata olu\u015ftu:",n)}else o("/login")},className:"auth-button ".concat(e?"logout":"login"),children:e?"\xc7\u0131k\u0131\u015f Yap":"Giri\u015f Yap"})})]})})]})})},yb=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(!1),c=se(),{login:u}=ub();return(0,Un.jsx)("div",{className:"auth-container",children:(0,Un.jsxs)("div",{className:"auth-card",children:[(0,Un.jsx)("h2",{children:"Giri\u015f Yap"}),s&&(0,Un.jsx)("div",{className:"error-message",children:s}),(0,Un.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{o(""),l(!0),await u(e,n),c("/")}catch(i){o("Giri\u015f yap\u0131l\u0131rken bir hata olu\u015ftu")}finally{l(!1)}},children:[(0,Un.jsxs)("div",{className:"form-group",children:[(0,Un.jsx)("label",{children:"E-posta"}),(0,Un.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,Un.jsxs)("div",{className:"form-group",children:[(0,Un.jsx)("label",{children:"\u015eifre"}),(0,Un.jsx)("input",{type:"password",value:n,onChange:e=>i(e.target.value),required:!0})]}),(0,Un.jsx)("button",{type:"submit",className:"auth-button",disabled:a,children:a?"Giri\u015f yap\u0131l\u0131yor...":"Giri\u015f Yap"})]}),(0,Un.jsxs)("p",{className:"auth-link",children:["Hesab\u0131n\u0131z yok mu? ",(0,Un.jsx)("a",{href:"/register",children:"Kay\u0131t Ol"})]})]})})},vb=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[h,d]=(0,r.useState)(""),[f,p]=(0,r.useState)(!1),g=se(),{register:m}=ub();return(0,Un.jsx)("div",{className:"auth-container",children:(0,Un.jsxs)("div",{className:"auth-card",children:[(0,Un.jsx)("h2",{children:"Kay\u0131t Ol"}),h&&(0,Un.jsx)("div",{className:"error-message",children:h}),(0,Un.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),n!==s)return d("\u015eifreler e\u015fle\u015fmiyor");if(!a.trim()||!c.trim())return d("\u0130sim ve soyisim alanlar\u0131 zorunludur");try{d(""),p(!0),await m(e,n,a,c,!1),g("/")}catch(i){d("Hesap olu\u015fturulurken bir hata olu\u015ftu")}finally{p(!1)}},children:[(0,Un.jsxs)("div",{className:"form-group",children:[(0,Un.jsx)("label",{children:"\u0130sim"}),(0,Un.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),required:!0})]}),(0,Un.jsxs)("div",{className:"form-group",children:[(0,Un.jsx)("label",{children:"Soyisim"}),(0,Un.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),required:!0})]}),(0,Un.jsxs)("div",{className:"form-group",children:[(0,Un.jsx)("label",{children:"E-posta"}),(0,Un.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,Un.jsxs)("div",{className:"form-group",children:[(0,Un.jsx)("label",{children:"\u015eifre"}),(0,Un.jsx)("input",{type:"password",value:n,onChange:e=>i(e.target.value),required:!0})]}),(0,Un.jsxs)("div",{className:"form-group",children:[(0,Un.jsx)("label",{children:"\u015eifre Tekrar"}),(0,Un.jsx)("input",{type:"password",value:s,onChange:e=>o(e.target.value),required:!0})]}),(0,Un.jsx)("button",{type:"submit",className:"auth-button",disabled:f,children:f?"Hesap olu\u015fturuluyor...":"Kay\u0131t Ol"})]}),(0,Un.jsxs)("p",{className:"auth-link",children:["Zaten hesab\u0131n\u0131z var m\u0131? ",(0,Un.jsx)("a",{href:"/login",children:"Giri\u015f Yap"})]})]})})},bb=()=>{const{currentUser:e,logout:t}=ub(),n=se(),[i,s]=(0,r.useState)(!1),[o,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)({optionCount:4,questionTypes:{multipleChoice:!0},questionCounts:{multipleChoice:5}});return(0,Un.jsxs)("div",{className:"admin-dashboard",children:[(0,Un.jsx)("nav",{className:"admin-nav",children:(0,Un.jsx)("div",{className:"nav-container",children:(0,Un.jsxs)("div",{className:"flex justify-between h-16",children:[(0,Un.jsx)("div",{className:"flex items-center",children:(0,Un.jsx)("h1",{className:"nav-title",children:"Admin Paneli"})}),(0,Un.jsxs)("div",{className:"flex items-center",children:[(0,Un.jsx)("span",{className:"user-email",children:null===e||void 0===e?void 0:e.email}),(0,Un.jsx)("button",{onClick:async()=>{try{await t(),n("/login")}catch(e){console.error("\xc7\u0131k\u0131\u015f yap\u0131l\u0131rken hata olu\u015ftu:",e)}},className:"logout-btn",children:"\xc7\u0131k\u0131\u015f Yap"})]})]})})}),(0,Un.jsxs)("div",{className:"dashboard-content",children:[(0,Un.jsxs)("div",{className:"cards-grid",children:[(0,Un.jsx)("div",{className:"dashboard-card",children:(0,Un.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,Un.jsx)("h3",{className:"card-title",children:"S\u0131nav Y\xf6netimi"}),(0,Un.jsx)("p",{className:"card-description",children:"S\u0131navlar\u0131 olu\u015ftur, d\xfczenle ve y\xf6net"}),(0,Un.jsxs)("div",{className:"card-actions",children:[(0,Un.jsx)("button",{onClick:()=>a(!0),className:"card-button",children:"S\u0131nav Ayarlar\u0131"}),(0,Un.jsx)("button",{onClick:()=>n("/admin/exams"),className:"card-button",children:"S\u0131navlar\u0131 Y\xf6net"})]})]})}),(0,Un.jsx)("div",{className:"dashboard-card",children:(0,Un.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,Un.jsx)("h3",{className:"card-title",children:"Kullan\u0131c\u0131 Y\xf6netimi"}),(0,Un.jsx)("p",{className:"card-description",children:"Kullan\u0131c\u0131lar\u0131 g\xf6r\xfcnt\xfcle ve y\xf6net"}),(0,Un.jsx)("button",{onClick:()=>n("/admin/users"),className:"card-button",children:"Kullan\u0131c\u0131lar\u0131 Y\xf6net"})]})}),(0,Un.jsx)("div",{className:"dashboard-card",children:(0,Un.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,Un.jsx)("h3",{className:"card-title",children:"Raporlar"}),(0,Un.jsx)("p",{className:"card-description",children:"S\u0131nav ve kullan\u0131c\u0131 istatistiklerini g\xf6r\xfcnt\xfcle"}),(0,Un.jsx)("button",{onClick:()=>n("/admin/reports"),className:"card-button",children:"Raporlar\u0131 G\xf6r\xfcnt\xfcle"})]})})]}),o&&(0,Un.jsx)("div",{className:"modal-overlay",children:(0,Un.jsxs)("div",{className:"modal-content",children:[(0,Un.jsx)("h2",{className:"modal-title",children:"S\u0131nav Ayarlar\u0131"}),(0,Un.jsx)("div",{className:"settings-section",children:(0,Un.jsxs)("label",{className:"setting-label",children:["Se\xe7enek Say\u0131s\u0131 (2-6):",(0,Un.jsx)("input",{type:"number",min:"2",max:"6",value:l.optionCount,onChange:e=>(e=>{if(e>=2&&e<=6){c((t=>h(h({},t),{},{optionCount:e})));const t={questionTypes:l.questionTypes,difficultyLevels:{easy:!0,medium:!0,hard:!1},typeCount:{multipleChoice:l.questionCounts.multipleChoice},optionCount:e};localStorage.setItem("quizPreferences",JSON.stringify(t))}})(parseInt(e.target.value)),className:"setting-input"})]})}),(0,Un.jsxs)("div",{className:"settings-section",children:[(0,Un.jsx)("h3",{className:"section-title",children:"Soru Tipleri"}),(0,Un.jsxs)("div",{className:"question-type",children:[(0,Un.jsxs)("label",{className:"checkbox-label",children:[(0,Un.jsx)("input",{type:"checkbox",checked:l.questionTypes.multipleChoice,onChange:e=>{return t="multipleChoice",n=e.target.checked,void c((e=>h(h({},e),{},{questionTypes:h(h({},e.questionTypes),{},{[t]:n})})));var t,n}}),"\xc7oktan Se\xe7meli"]}),l.questionTypes.multipleChoice&&(0,Un.jsx)("input",{type:"number",min:"0",max:"20",value:l.questionCounts.multipleChoice,onChange:e=>{return t="multipleChoice",void((n=parseInt(e.target.value))>=0&&n<=20&&c((e=>h(h({},e),{},{questionCounts:h(h({},e.questionCounts),{},{[t]:n})}))));var t,n},className:"count-input"})]})]}),(0,Un.jsxs)("div",{className:"modal-actions",children:[(0,Un.jsx)("button",{onClick:async()=>{try{s(!0);const e={questionTypes:l.questionTypes,difficultyLevels:{easy:!0,medium:!0,hard:!1},typeCount:{multipleChoice:l.questionCounts.multipleChoice},optionCount:l.optionCount};localStorage.setItem("quizPreferences",JSON.stringify(e)),a(!1)}catch(e){}finally{s(!1)}},className:"save-button",disabled:i,children:i?"Kaydediliyor...":"Kaydet"}),(0,Un.jsx)("button",{onClick:()=>a(!1),className:"cancel-button",children:"\u0130ptal"})]})]})})]})]})},_b=e=>{let{children:t}=e;const{currentUser:n,isAdmin:i}=ub(),[s,o]=(0,r.useState)(!0),[a,l]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{if(n){const e=await i(n.uid);l(e)}o(!1)})()}),[n,i]),s?(0,Un.jsx)("div",{children:"Y\xfckleniyor..."}):n&&a?(0,Un.jsx)(Un.Fragment,{children:t}):(0,Un.jsx)(we,{to:"/admin/login"})},wb=()=>(0,Un.jsx)("div",{className:"loading-screen",children:(0,Un.jsxs)("div",{className:"loading-content",children:[(0,Un.jsx)("div",{className:"loading-spinner"}),(0,Un.jsx)("h2",{children:"S\u0131nav Olu\u015fturuluyor..."}),(0,Un.jsx)("p",{children:"L\xfctfen bekleyin, sorular\u0131n\u0131z haz\u0131rlan\u0131yor."})]})}),xb=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[s,o]=(0,r.useState)(null),[a,l]=(0,r.useState)(null),{currentUser:c}=ub(),[u,h]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{if(!c)return console.log("Kullan\u0131c\u0131 giri\u015f yapmam\u0131\u015f"),t([]),void i(!1);console.log("Giri\u015f yapan kullan\u0131c\u0131 ID:",c.uid);try{i(!0),console.log("S\u0131navlar getiriliyor...");const e=await lb.getAllQuizzes();console.log("T\xfcm s\u0131navlar:",e);const n=e.filter((e=>e.userId===c.uid));console.log("Kullan\u0131c\u0131n\u0131n s\u0131navlar\u0131:",n);const r=n.map((e=>{const t={id:e.id,createdAt:new Date(e.timestamp||(new Date).toISOString()),successRate:e.score||0,name:e.fileName||"Unnamed Quiz"};return console.log("\u0130\u015flenen s\u0131nav:",t),t})).sort(((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()));console.log("S\u0131ralanm\u0131\u015f s\u0131nav listesi:",r),t(r)}catch(e){console.error("S\u0131nav getirme hatas\u0131:",e)}finally{i(!1)}})()}),[c]);return(0,Un.jsxs)("div",{className:"exam-list-container",children:[(0,Un.jsxs)("div",{className:"exam-list",children:[(0,Un.jsx)("h2",{children:"S\u0131nav Listesi"}),(0,Un.jsx)("div",{className:"exam-list-content",children:n?(0,Un.jsx)("p",{children:"Y\xfckleniyor..."}):0===e.length?(0,Un.jsx)("p",{children:"Hen\xfcz s\u0131nav bulunmuyor."}):(0,Un.jsx)("div",{className:"exam-items",children:e.map((e=>{const t=parseFloat(e.successRate.toString())>=50,n=e.createdAt.toLocaleString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,Un.jsxs)("div",{className:"exam-item ".concat(a===e.id?"selected":""),onClick:()=>{l(e.id),(async e=>{try{console.log("S\u0131nav se\xe7ildi, ID:",e);const t=await lb.getQuizByIdWithCourseName(e);if(t){console.log("Se\xe7ilen s\u0131nav verileri:",t);const n={questionTypes:{multipleChoice:!0},typeCount:{multipleChoice:10}},i=t.preferences||n;if(t.questions&&t.userAnswers){const n={questions:t.questions,userAnswers:t.userAnswers,preferences:i,fileName:t.fileName||"Unnamed Quiz",results:t.results,formattedTime:t.formattedTime,course:t.course,score:t.score,elapsedTime:t.elapsedTime,userLevel:t.userLevel,timestamp:t.timestamp||new Date("2024-12-26T04:55:50+03:00").toISOString()};console.log("\u0130\u015flenmi\u015f s\u0131nav verileri:",n),o(n),l(e)}else console.error("Eksik s\u0131nav verileri:",{hasQuestions:!!t.questions,hasUserAnswers:!!t.userAnswers})}else console.error("S\u0131nav bulunamad\u0131")}catch(t){console.error("S\u0131nav se\xe7me hatas\u0131:",t)}})(e.id)},children:[(0,Un.jsx)("div",{className:"exam-item-buttons",children:a===e.id&&(0,Un.jsx)("button",{className:"delete-button",onClick:e=>{e.stopPropagation(),h(!0)},children:"Sil"})}),(0,Un.jsxs)("div",{className:"exam-item-info",children:[(0,Un.jsx)("h3",{title:e.name,children:e.name}),(0,Un.jsx)("p",{className:"exam-date",children:n}),(0,Un.jsxs)("p",{className:"success-rate ".concat(t?"success":"fail"),children:["Ba\u015far\u0131: ",e.successRate,"%"]})]})]},e.id)}))})})]}),s&&s.userAnswers&&(0,Un.jsx)("div",{className:"selected-quiz-details",children:(0,Un.jsx)(gb,{formattedTime:s.formattedTime||"0 saniye",questions:s.questions,userAnswers:s.userAnswers,preferences:s.preferences,fileName:s.fileName,onRestartQuiz:()=>o(null),course:s.course})}),u&&(0,Un.jsx)("div",{className:"delete-confirm-overlay",children:(0,Un.jsxs)("div",{className:"delete-confirm-modal",children:[(0,Un.jsx)("h3",{children:"S\u0131nav\u0131 Sil"}),(0,Un.jsx)("p",{children:"Bu s\u0131nav\u0131 silmek istedi\u011finizden emin misiniz?"}),(0,Un.jsxs)("div",{className:"delete-confirm-buttons",children:[(0,Un.jsx)("button",{className:"cancel-button",onClick:()=>h(!1),children:"\u0130ptal"}),(0,Un.jsx)("button",{className:"confirm-button",onClick:()=>(async e=>{try{await lb.quiz.deleteQuiz(e),t((t=>t.filter((t=>t.id!==e)))),h(!1),o(null),l(null)}catch(n){console.error("S\u0131nav silme hatas\u0131:",n)}})(a),children:"Sil"})]})]})})]})},Sb=e=>{let{onAssessmentComplete:t}=e;const[n,i]=(0,r.useState)("beginner");return(0,Un.jsxs)("div",{className:"pre-quiz-assessment",children:[(0,Un.jsx)("h2",{children:"Bilgi Seviyesi Se\xe7imi"}),(0,Un.jsxs)("div",{className:"level-selection",children:[(0,Un.jsx)("h3",{children:"Bilgi Seviyeniz"}),(0,Un.jsxs)("div",{className:"level-buttons",children:[(0,Un.jsxs)("button",{className:"beginner"===n?"active":"",onClick:()=>i("beginner"),children:["Ba\u015flang\u0131\xe7",(0,Un.jsx)("span",{className:"level-description",children:"Konuya yeni ba\u015flad\u0131m veya temel bilgilerim var"})]}),(0,Un.jsxs)("button",{className:"intermediate"===n?"active":"",onClick:()=>i("intermediate"),children:["Orta",(0,Un.jsx)("span",{className:"level-description",children:"Konuyu biliyorum ama daha \xf6\u011frenecek \xe7ok \u015fey var"})]}),(0,Un.jsxs)("button",{className:"advanced"===n?"active":"",onClick:()=>i("advanced"),children:["\u0130leri",(0,Un.jsx)("span",{className:"level-description",children:"Konuya hakimim ve detayl\u0131 bilgiye sahibim"})]})]})]}),(0,Un.jsx)("div",{className:"navigation-buttons",children:(0,Un.jsx)("button",{className:"submit-button",onClick:()=>{t(n)},children:"S\u0131nava Ba\u015fla"})})]})};function Eb(e){return e+.5|0}const kb=(e,t,n)=>Math.max(Math.min(e,n),t);function Tb(e){return kb(Eb(2.55*e),0,255)}function Cb(e){return kb(Eb(255*e),0,255)}function Ib(e){return kb(Eb(e/2.55)/100,0,1)}function Ab(e){return kb(Eb(100*e),0,100)}const Nb={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ob=[..."0123456789ABCDEF"],Rb=e=>Ob[15&e],Pb=e=>Ob[(240&e)>>4]+Ob[15&e],Db=e=>(240&e)>>4===(15&e);function Mb(e){var t=(e=>Db(e.r)&&Db(e.g)&&Db(e.b)&&Db(e.a))(e)?Rb:Pb;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Lb=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function jb(e,t,n){const i=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function Fb(e,t,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function zb(e,t,n){const i=jb(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function Ub(e){const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),s=Math.min(t,n,i),o=(r+s)/2;let a,l,c;return r!==s&&(c=r-s,l=o>.5?c/(2-r-s):c/(r+s),a=function(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}(t,n,i,c,r),a=60*a+.5),[0|a,l||0,o]}function Vb(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(Cb)}function Bb(e,t,n){return Vb(jb,e,t,n)}function Hb(e){return(e%360+360)%360}function qb(e){const t=Lb.exec(e);let n,i=255;if(!t)return;t[5]!==n&&(i=t[6]?Tb(+t[5]):Cb(+t[5]));const r=Hb(+t[2]),s=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return Vb(zb,e,t,n)}(r,s,o):"hsv"===t[1]?function(e,t,n){return Vb(Fb,e,t,n)}(r,s,o):Bb(r,s,o),{r:n[0],g:n[1],b:n[2],a:i}}const Wb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Kb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Gb;function Qb(e){Gb||(Gb=function(){const e={},t=Object.keys(Kb),n=Object.keys(Wb);let i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,Wb[s]);s=parseInt(Kb[o],16),e[a]=[s>>16&255,s>>8&255,255&s]}return e}(),Gb.transparent=[0,0,0,0]);const t=Gb[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Yb=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Xb=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,$b=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Jb(e,t,n){if(e){let i=Ub(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=Bb(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Zb(e,t){return e?Object.assign(t||{},e):e}function e_(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Cb(e[3]))):(t=Zb(e,{r:0,g:0,b:0,a:1})).a=Cb(t.a),t}function t_(e){return"r"===e.charAt(0)?function(e){const t=Yb.exec(e);let n,i,r,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?Tb(e):kb(255*e,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?Tb(n):kb(n,0,255)),i=255&(t[4]?Tb(i):kb(i,0,255)),r=255&(t[6]?Tb(r):kb(r,0,255)),{r:n,g:i,b:r,a:s}}}(e):qb(e)}class n_{constructor(e){if(e instanceof n_)return e;const t=typeof e;let n;"object"===t?n=e_(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*Nb[e[1]],g:255&17*Nb[e[2]],b:255&17*Nb[e[3]],a:5===n?17*Nb[e[4]]:255}:7!==n&&9!==n||(t={r:Nb[e[1]]<<4|Nb[e[2]],g:Nb[e[3]]<<4|Nb[e[4]],b:Nb[e[5]]<<4|Nb[e[6]],a:9===n?Nb[e[7]]<<4|Nb[e[8]]:255})),t}(e)||Qb(e)||t_(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Zb(this._rgb);return e&&(e.a=Ib(e.a)),e}set rgb(e){this._rgb=e_(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(Ib(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?Mb(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Ub(e),n=t[0],i=Ab(t[1]),r=Ab(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(Ib(e.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let r;const s=t===r?.5:t,o=2*s-1,a=n.a-i.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const i=$b(Ib(e.r)),r=$b(Ib(e.g)),s=$b(Ib(e.b));return{r:Cb(Xb(i+n*($b(Ib(t.r))-i))),g:Cb(Xb(r+n*($b(Ib(t.g))-r))),b:Cb(Xb(s+n*($b(Ib(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new n_(this.rgb)}alpha(e){return this._rgb.a=Cb(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Eb(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Jb(this._rgb,2,e),this}darken(e){return Jb(this._rgb,2,-e),this}saturate(e){return Jb(this._rgb,1,e),this}desaturate(e){return Jb(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=Ub(e);n[0]=Hb(n[0]+t),n=Bb(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function i_(){}const r_=(()=>{let e=0;return()=>e++})();function s_(e){return null===e||void 0===e}function o_(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function a_(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function l_(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function c_(e,t){return l_(e)?e:t}function u_(e,t){return"undefined"===typeof e?t:e}const h_=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function d_(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function f_(e,t,n,i){let r,s,o;if(o_(e))if(s=e.length,i)for(r=s-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<s;r++)t.call(n,e[r],r);else if(a_(e))for(o=Object.keys(e),s=o.length,r=0;r<s;r++)t.call(n,e[o[r]],o[r])}function p_(e,t){let n,i,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function g_(e){if(o_(e))return e.map(g_);if(a_(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=g_(e[n[r]]);return t}return e}function m_(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function y_(e,t,n,i){if(!m_(e))return;const r=t[e],s=n[e];a_(r)&&a_(s)?v_(r,s,i):t[e]=g_(s)}function v_(e,t,n){const i=o_(t)?t:[t],r=i.length;if(!a_(e))return e;const s=(n=n||{}).merger||y_;let o;for(let a=0;a<r;++a){if(o=i[a],!a_(o))continue;const t=Object.keys(o);for(let i=0,r=t.length;i<r;++i)s(t[i],e,o,n)}return e}function b_(e,t){return v_(e,t,{merger:__})}function __(e,t,n){if(!m_(e))return;const i=t[e],r=n[e];a_(i)&&a_(r)?b_(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=g_(r))}const w_={"":e=>e,x:e=>e.x,y:e=>e.y};function x_(e,t){const n=w_[t]||(w_[t]=function(e){const t=function(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function S_(e){return e.charAt(0).toUpperCase()+e.slice(1)}const E_=e=>"undefined"!==typeof e,k_=e=>"function"===typeof e,T_=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const C_=Math.PI,I_=2*C_,A_=I_+C_,N_=Number.POSITIVE_INFINITY,O_=C_/180,R_=C_/2,P_=C_/4,D_=2*C_/3,M_=Math.log10,L_=Math.sign;function j_(e,t,n){return Math.abs(e-t)<n}function F_(e){const t=Math.round(e);e=j_(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(M_(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function z_(e){return!isNaN(parseFloat(e))&&isFinite(e)}function U_(e,t,n){let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function V_(e){return e*(C_/180)}function B_(e){return e*(180/C_)}function H_(e){if(!l_(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function q_(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*C_&&(s+=I_),{angle:s,distance:r}}function W_(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function K_(e,t){return(e-t+A_)%I_-C_}function G_(e){return(e%I_+I_)%I_}function Q_(e,t,n,i){const r=G_(e),s=G_(t),o=G_(n),a=G_(s-r),l=G_(o-r),c=G_(r-s),u=G_(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function Y_(e,t,n){return Math.max(t,Math.min(n,e))}function X_(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function $_(e,t,n){n=n||(n=>e[n]<t);let i,r=e.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const J_=(e,t,n,i)=>$_(e,n,i?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),Z_=(e,t,n)=>$_(e,n,(i=>e[i][t]>=n));const ew=["push","pop","shift","splice","unshift"];function tw(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(ew.forEach((t=>{delete e[t]})),delete e._chartjs)}function nw(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const iw="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function rw(e,t){let n=[],i=!1;return function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];n=s,i||(i=!0,iw.call(window,(()=>{i=!1,e.apply(t,n)})))}}const sw=e=>"start"===e?"left":"end"===e?"right":"center",ow=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function aw(e,t,n){const i=t.length;let r=0,s=i;if(e._sorted){const{iScale:o,_parsed:a}=e,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(r=Y_(Math.min(J_(a,l,c).lo,n?i:J_(t,l,o.getPixelForValue(c)).lo),0,i-1)),s=d?Y_(Math.max(J_(a,o.axis,u,!0).hi+1,n?0:J_(t,l,o.getPixelForValue(u),!0).hi+1),r,i)-r:i-r}return{start:r,count:s}}function lw(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const cw=e=>0===e||1===e,uw=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*I_/n),hw=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*I_/n)+1,dw={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*R_),easeOutSine:e=>Math.sin(e*R_),easeInOutSine:e=>-.5*(Math.cos(C_*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>cw(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>cw(e)?e:uw(e,.075,.3),easeOutElastic:e=>cw(e)?e:hw(e,.075,.3),easeInOutElastic(e){const t=.1125;return cw(e)?e:e<.5?.5*uw(2*e,t,.45):.5+.5*hw(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-dw.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*dw.easeInBounce(2*e):.5*dw.easeOutBounce(2*e-1)+.5};function fw(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function pw(e){return fw(e)?e:new n_(e)}function gw(e){return fw(e)?e:new n_(e).saturate(.5).darken(.1).hexString()}const mw=["x","y","borderWidth","radius","tension"],yw=["color","borderColor","backgroundColor"];const vw=new Map;function bw(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let i=vw.get(n);return i||(i=new Intl.NumberFormat(e,t),vw.set(n,i)),i}(t,n).format(e)}const _w={values:e=>o_(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const i=this.chart.options.locale;let r,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const o=M_(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),bw(e,i,l)},logarithmic(e,t,n){if(0===e)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(M_(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?_w.numeric.call(this,e,t,n):""}};var ww={formatters:_w};const xw=Object.create(null),Sw=Object.create(null);function Ew(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const t=n[i];e=e[t]||(e[t]=Object.create(null))}return e}function kw(e,t,n){return"string"===typeof t?v_(Ew(e,t),n):v_(Ew(e,""),t)}class Tw{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>gw(t.backgroundColor),this.hoverBorderColor=(e,t)=>gw(t.borderColor),this.hoverColor=(e,t)=>gw(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return kw(this,e,t)}get(e){return Ew(this,e)}describe(e,t){return kw(Sw,e,t)}override(e,t){return kw(xw,e,t)}route(e,t,n,i){const r=Ew(this,e),s=Ew(this,n),o="_"+t;Object.defineProperties(r,{[o]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=s[i];return a_(e)?Object.assign({},t,e):u_(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach((e=>e(this)))}}var Cw=new Tw({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:yw},numbers:{type:"number",properties:mw}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ww.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Iw(e,t,n,i,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>i&&(i=s),i}function Aw(e,t,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],void 0===h||null===h||o_(h)){if(o_(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||o_(d)||(o=Iw(e,r,s,o,d))}else o=Iw(e,r,s,o,h);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function Nw(e,t,n){const i=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function Ow(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Rw(e,t,n,i){Pw(e,t,n,i,null)}function Pw(e,t,n,i,r){let s,o,a,l,c,u,h,d;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*O_;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,i),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:r?e.ellipse(n,i,r/2,g,0,0,I_):e.arc(n,i,g,0,I_),e.closePath();break;case"triangle":u=r?r/2:g,e.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=D_,e.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=D_,e.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,o=Math.cos(m+P_)*l,h=Math.cos(m+P_)*(r?r/2-c:l),a=Math.sin(m+P_)*l,d=Math.sin(m+P_)*(r?r/2-c:l),e.arc(n-h,i-a,c,m-C_,m-R_),e.arc(n+d,i-o,c,m-R_,m),e.arc(n+h,i+a,c,m,m+R_),e.arc(n-d,i+o,c,m+R_,m+C_),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=r?r/2:l,e.rect(n-u,i-l,2*u,2*l);break}m+=P_;case"rectRot":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-a),e.lineTo(n+d,i-o),e.lineTo(n+h,i+a),e.lineTo(n-d,i+o),e.closePath();break;case"crossRot":m+=P_;case"cross":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o);break;case"star":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o),m+=P_,h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o);break;case"line":o=r?r/2:Math.cos(m)*g,a=Math.sin(m)*g,e.moveTo(n-o,i-a),e.lineTo(n+o,i+a);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(m)*(r?r/2:g),i+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Dw(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Mw(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Lw(e){e.restore()}function jw(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===r!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Fw(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function zw(e,t,n,i,r){if(r.strikethrough||r.underline){const s=e.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function Uw(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Vw(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=o_(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),s_(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Uw(e,s.backdrop),a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),s_(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,i,s.maxWidth)),e.fillText(c,n,i,s.maxWidth),zw(e,n,i,c,s),i+=Number(r.lineHeight);e.restore()}function Bw(e,t){const{x:n,y:i,w:r,h:s,radius:o}=t;e.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*C_,C_,!0),e.lineTo(n,i+s-o.bottomLeft),e.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,C_,R_,!0),e.lineTo(n+r-o.bottomRight,i+s),e.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,R_,0,!0),e.lineTo(n+r,i+o.topRight),e.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-R_,!0),e.lineTo(n+o.topLeft,i)}const Hw=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,qw=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ww(e,t){const n=(""+e).match(Hw);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const Kw=e=>+e||0;function Gw(e,t){const n={},i=a_(t),r=i?Object.keys(t):t,s=a_(e)?i?n=>u_(e[n],e[t[n]]):t=>e[t]:()=>e;for(const o of r)n[o]=Kw(s(o));return n}function Qw(e){return Gw(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Yw(e){return Gw(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Xw(e){const t=Qw(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function $w(e,t){e=e||{},t=t||Cw.font;let n=u_(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let i=u_(e.style,t.style);i&&!(""+i).match(qw)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:u_(e.family,t.family),lineHeight:Ww(u_(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:u_(e.weight,t.weight),string:""};return r.string=function(e){return!e||s_(e.size)||s_(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function Jw(e,t,n,i){let r,s,o,a=!0;for(r=0,s=e.length;r<s;++r)if(o=e[r],void 0!==o&&(void 0!==t&&"function"===typeof o&&(o=o(t),a=!1),void 0!==n&&o_(o)&&(o=o[n%o.length],a=!1),void 0!==o))return i&&!a&&(i.cacheable=!1),o}function Zw(e,t){return Object.assign(Object.create(e),t)}function ex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const r=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=hx("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>ex([i,...e],t,r,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,i)=>sx(n,i,(()=>function(e,t,n,i){let r;for(const s of t)if(r=hx(ix(s,e),n),"undefined"!==typeof r)return rx(e,r)?cx(n,i,e,r):r}(i,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>dx(e).includes(t),ownKeys:e=>dx(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function tx(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:nx(e,i),setContext:t=>tx(e,t,n,i),override:r=>tx(e.override(r),t,n,i)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>sx(e,t,(()=>function(e,t,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=e;let a=i[t];k_(a)&&o.isScriptable(t)&&(a=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(s,o||i);a.delete(e),rx(e,l)&&(l=cx(r._scopes,r,e,l));return l}(t,a,e,n));o_(a)&&a.length&&(a=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if("undefined"!==typeof s.index&&i(e))return t[s.index%t.length];if(a_(t[0])){const n=t,i=r._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=cx(i,r,e,l);t.push(tx(n,s,o&&o[e],a))}}return t}(t,a,e,o.isIndexable));rx(t,a)&&(a=tx(a,r,s&&s[t],o));return a}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,i)=>(e[n]=i,delete t[n],!0)})}function nx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:k_(n)?n:()=>n,isIndexable:k_(i)?i:()=>i}}const ix=(e,t)=>e?e+S_(t):t,rx=(e,t)=>a_(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function sx(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const i=n();return e[t]=i,i}function ox(e,t,n){return k_(e)?e(t,n):e}const ax=(e,t)=>!0===e?t:"string"===typeof e?x_(t,e):void 0;function lx(e,t,n,i,r){for(const s of t){const t=ax(n,s);if(t){e.add(t);const s=ox(t._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==i)return s}else if(!1===t&&"undefined"!==typeof i&&n!==i)return null}return!1}function cx(e,t,n,i){const r=t._rootScopes,s=ox(t._fallback,n,i),o=[...e,...r],a=new Set;a.add(i);let l=ux(a,o,n,s||n,i);return null!==l&&(("undefined"===typeof s||s===n||(l=ux(a,o,s,l,i),null!==l))&&ex(Array.from(a),[""],r,s,(()=>function(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];if(o_(r)&&a_(n))return n;return r||{}}(t,n,i))))}function ux(e,t,n,i,r){for(;n;)n=lx(e,t,n,i,r);return n}function hx(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function dx(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function fx(e,t,n,i){const{iScale:r}=e,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=t[c],o[a]={r:r.parse(x_(u,s),c)};return o}const px=Number.EPSILON||1e-14,gx=(e,t)=>t<e.length&&!e[t].skip&&e[t],mx=e=>"x"===e?"y":"x";function yx(e,t,n,i){const r=e.skip?t:e,s=t,o=n.skip?t:n,a=W_(s,r),l=W_(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function vx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=mx(t),i=e.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=gx(e,0);for(o=0;o<i;++o)if(a=l,l=c,c=gx(e,o+1),l){if(c){const e=c[t]-l[t];r[o]=0!==e?(c[n]-l[n])/e:0}s[o]=a?c?L_(r[o-1])!==L_(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}!function(e,t,n){const i=e.length;let r,s,o,a,l,c=gx(e,0);for(let u=0;u<i-1;++u)l=c,c=gx(e,u+1),l&&c&&(j_(t[u],0,px)?n[u]=n[u+1]=0:(r=n[u]/t[u],s=n[u+1]/t[u],a=Math.pow(r,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=r*o*t[u],n[u+1]=s*o*t[u])))}(e,r,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=mx(n),r=e.length;let s,o,a,l=gx(e,0);for(let c=0;c<r;++c){if(o=a,a=l,l=gx(e,c+1),!a)continue;const r=a[n],u=a[i];o&&(s=(r-o[n])/3,a["cp1".concat(n)]=r-s,a["cp1".concat(i)]=u-s*t[c]),l&&(s=(l[n]-r)/3,a["cp2".concat(n)]=r+s,a["cp2".concat(i)]=u+s*t[c])}}(e,s,t)}function bx(e,t,n){return Math.max(Math.min(e,n),t)}function _x(e,t,n,i,r){let s,o,a,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)vx(e,r);else{let n=i?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)a=e[s],l=yx(n,a,e[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}t.capBezierPoints&&function(e,t){let n,i,r,s,o,a=Dw(e[0],t);for(n=0,i=e.length;n<i;++n)o=s,s=a,a=n<i-1&&Dw(e[n+1],t),s&&(r=e[n],o&&(r.cp1x=bx(r.cp1x,t.left,t.right),r.cp1y=bx(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=bx(r.cp2x,t.left,t.right),r.cp2y=bx(r.cp2y,t.top,t.bottom)))}(e,n)}function wx(){return"undefined"!==typeof window&&"undefined"!==typeof document}function xx(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Sx(e,t,n){let i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}const Ex=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const kx=["top","right","bottom","left"];function Tx(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=kx[r];i[s]=parseFloat(e[t+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Cx(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=Ex(n),s="border-box"===r.boxSizing,o=Tx(r,"padding"),a=Tx(r,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=i;let o,a,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(r,s,e.target))o=r,a=s;else{const e=t.getBoundingClientRect();o=i.clientX-e.left,a=i.clientY-e.top,l=!0}return{x:o,y:a,box:l}}(e,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=t;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}const Ix=e=>Math.round(10*e)/10;function Ax(e,t,n,i){const r=Ex(e),s=Tx(r,"margin"),o=Sx(r.maxWidth,e,"clientWidth")||N_,a=Sx(r.maxHeight,e,"clientHeight")||N_,l=function(e,t,n){let i,r;if(void 0===t||void 0===n){const s=e&&xx(e);if(s){const e=s.getBoundingClientRect(),o=Ex(s),a=Tx(o,"border","width"),l=Tx(o,"padding");t=e.width-l.width-a.width,n=e.height-l.height-a.height,i=Sx(o.maxWidth,s,"clientWidth"),r=Sx(o.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||N_,maxHeight:r||N_}}(e,t,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const e=Tx(r,"border","width"),t=Tx(r,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=Ix(Math.min(c,o,l.maxWidth)),u=Ix(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Ix(c/2));return(void 0!==t||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=Ix(Math.floor(u*i))),{width:c,height:u}}function Nx(e,t,n){const i=t||1,r=Math.floor(e.height*i),s=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(e.currentDevicePixelRatio=i,o.height=r,o.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0)}const Ox=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};wx()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function Rx(e,t){const n=function(e,t){return Ex(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Px(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Dx(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function Mx(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},o=Px(e,r,n),a=Px(r,s,n),l=Px(s,t,n),c=Px(o,a,n),u=Px(a,l,n);return Px(c,u,n)}function Lx(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function jx(e,t){let n,i;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function Fx(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function zx(e){return"angle"===e?{between:Q_,compare:K_,normalize:G_}:{between:X_,compare:(e,t)=>e-t,normalize:e=>e}}function Ux(e){let{start:t,end:n,count:i,loop:r,style:s}=e;return{start:t%i,end:n%i,loop:r&&(n-t+1)%i===0,style:s}}function Vx(e,t,n){if(!n)return[e];const{property:i,start:r,end:s}=n,o=t.length,{compare:a,between:l,normalize:c}=zx(i),{start:u,end:h,loop:d,style:f}=function(e,t,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=zx(i),l=t.length;let c,u,{start:h,end:d,loop:f}=e;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&o(a(t[h%l][i]),r,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:e.style}}(e,t,n),p=[];let g,m,y,v=!1,b=null;const _=()=>v||l(r,y,g)&&0!==a(r,y),w=()=>!v||0===a(s,g)||l(s,y,g);for(let x=u,S=u;x<=h;++x)m=t[x%o],m.skip||(g=c(m[i]),g!==y&&(v=l(g,r,s),null===b&&_()&&(b=0===a(g,r)?x:S),null!==b&&w()&&(p.push(Ux({start:b,end:x,loop:d,count:o,style:f})),b=null),S=x,y=g));return null!==b&&p.push(Ux({start:b,end:h,loop:d,count:o,style:f})),p}function Bx(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const s=Vx(i[r],e.points,t);s.length&&n.push(...s)}return n}function Hx(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){const r=e._chart.getContext(),s=qx(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=s,h=t[0].start,d=h;function f(e,t,i,r){const s=a?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:i,style:r}),u=r,h=t%l)}}for(const p of t){h=a?h:p.start;let e,t=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];e=qx(i.setContext(Zw(r,{type:"segment",p0:t,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),Wx(e,u)&&f(h,d-1,p.loop,u),t=s,u=e}h<d-1&&f(h,d-1,p.loop,u)}return c}(e,t,n,i):t}function qx(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Wx(e,t){if(!t)return!1;const n=[],i=function(e,t){return fw(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,i)!==JSON.stringify(t,i)}class Kx{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const r=t.listeners[i],s=t.duration;r.forEach((i=>i({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=iw.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,o=r.length-1,a=!1;for(;o>=0;--o)s=r[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=r.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Gx=new Kx;const Qx="transparent",Yx={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const i=pw(e||Qx),r=i.valid&&pw(t||Qx);return r&&r.valid?r.mix(i,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class Xx{constructor(e,t,n,i){const r=t[n];i=Jw([e.to,i,r,e.from]);const s=Jw([e.from,r,i]);this._active=!0,this._fn=e.fn||Yx[e.type||typeof s],this._easing=dw[e.easing]||dw.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Jw([e.to,t,i,e.from]),this._from=Jw([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,o=this._to;let a;if(this._active=r!==o&&(s||t<n),!this._active)return this._target[i]=o,void this._notify(!0);t<0?this._target[i]=r:(a=t/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(r,o,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class $x{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!a_(e))return;const t=Object.keys(Cw.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((i=>{const r=e[i];if(!a_(r))return;const s={};for(const e of t)s[e]=r[e];(o_(r.properties)&&r.properties||[i]).forEach((e=>{e!==i&&n.has(e)||n.set(e,s)}))}))}_animateOptions(e,t){const n=t.options,i=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const t=e[i[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),r}_createAnimations(e,t){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),s=Object.keys(t),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(e,t));continue}const c=t[l];let u=r[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,o);continue}u.cancel()}h&&h.duration?(r[l]=u=new Xx(h,e,l,c),i.push(u)):e[l]=c}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(Gx.add(this._chart,n),!0):void 0}}function Jx(e,t){const n=e&&e.options||{},i=n.reverse,r=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:i?s:r,end:i?r:s}}function Zx(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function eS(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,s="single"===i.mode;let o,a,l,c;if(null===t)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,i.all)continue;break}c=e.values[l],l_(c)&&(s||0===t||L_(t)===L_(c))&&(t+=c)}return u||i.all?t:0}function tS(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function nS(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function iS(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function rS(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,o,i),h=t.length;let d;for(let f=0;f<h;++f){const e=t[f],{[l]:n,[c]:s}=e;d=(e._stacks||(e._stacks={}))[c]=nS(r,u,n),d[a]=s,d._top=iS(d,o,!0,i.type),d._bottom=iS(d,o,!1,i.type);(d._visualValues||(d._visualValues={}))[a]=s}}function sS(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function oS(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[i]||void 0===t[i][n])return;delete t[i][n],void 0!==t[i]._visualValues&&void 0!==t[i]._visualValues[n]&&delete t[i]._visualValues[n]}}}const aS=e=>"reset"===e||"none"===e,lS=(e,t)=>t?e:Object.assign({},e);class cS{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=tS(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&oS(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(e,t,n,i)=>"x"===e?t:"r"===e?i:n,r=t.xAxisID=u_(n.xAxisID,sS(e,"x")),s=t.yAxisID=u_(n.yAxisID,sS(e,"y")),o=t.rAxisID=u_(n.rAxisID,sS(e,"r")),a=t.indexAxis,l=t.iAxisID=i(a,r,s,o),c=t.vAxisID=i(a,s,r,o);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&tw(this._data,this),e._stacked&&oS(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(a_(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:i}=t,r="x"===n.axis?"x":"y",s="x"===i.axis?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:e[u]};return a}(t,e)}else if(n!==t){if(n){tw(n,this);const e=this._cachedMeta;oS(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ew.forEach((t=>{const n="_onData"+S_(t),i=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];const o=i.apply(this,r);return e._chartjs.listeners.forEach((e=>{"function"===typeof e[n]&&e[n](...r)})),o}})})))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=tS(t.vScale,t),t.stack!==n.stack&&(i=!0,oS(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&(rS(this,t._parsed),t._stacked=tS(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,o=r.axis;let a,l,c,u=0===e&&t===i.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=o_(i[e])?this.parseArrayData(n,i,e,t):a_(i[e])?this.parseObjectData(n,i,e,t):this.parsePrimitiveData(n,i,e,t);const r=()=>null===l[o]||h&&l[o]<h[o];for(a=0;a<t;++a)n._parsed[a+e]=l=c[a],u&&(r()&&(u=!1),h=l);n._sorted=u}s&&rS(this,c)}parsePrimitiveData(e,t,n,i){const{iScale:r,vScale:s}=e,o=r.axis,a=s.axis,l=r.getLabels(),c=r===s,u=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,u[h]={[o]:c||r.parse(l[f],f),[a]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,i){const{xScale:r,yScale:s}=e,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=t[c],o[a]={x:r.parse(u[0],c),y:s.parse(u[1],c)};return o}parseObjectData(e,t,n,i){const{xScale:r,yScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(i);let c,u,h,d;for(c=0,u=i;c<u;++c)h=c+n,d=t[h],l[c]={x:r.parse(x_(d,o),h),y:s.parse(x_(d,a),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,r=this._cachedMeta,s=t[e.axis];return eS({keys:Zx(i,!0),values:t._stacks[e.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const r=n[t.axis];let s=null===r?NaN:r;const o=i&&n._stacks[t.axis];i&&o&&(i.values=o,s=eS(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,s=i.length,o=this._getOtherScale(e),a=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Zx(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(o);let h,d;function f(){d=i[h];const t=d[o.axis];return!l_(d[e.axis])||c>t||u<t}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,e,d,a),!r));++h);if(r)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,e,d,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i][e.axis],l_(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,i,r;return a_(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:!1===e}}(u_(this.options.clip,function(e,t,n){if(!1===n)return!1;const i=Jx(e,n),r=Jx(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],r=t.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||i.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,o,a),c=o;c<o+a;++c){const t=i[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,r))}for(c=0;c<s.length;++c)s[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return Zw(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return Zw(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===t,r=this._cachedDataOpts,s=e+"-"+t,o=r[s],a=this.enableOptionSharing&&E_(n);if(o)return lS(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=i?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(Cw.elements[e]),f=l.resolveNamedOptions(h,d,(()=>this.getContext(n,i,t)),u);return f.$shared&&(f.$shared=a,r[s]=Object.freeze(lS(f,a))),f}_resolveAnimations(e,t,n){const i=this.chart,r=this._cachedDataOpts,s="animation-".concat(t),o=r[s];if(o)return o;let a;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,t),s=i.getOptionScopes(this.getDataset(),r);a=i.createResolver(s,this.getContext(e,n,t))}const l=new $x(i,a&&a.animations);return a&&a._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||aS(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:s}}updateElement(e,t,n,i){aS(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!aS(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[o,a,l]of this._syncList)this[o](a,l);this._syncList=[];const i=n.length,r=t.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,s=e+t;let o;const a=e=>{for(e.length+=t,o=e.length-1;o>=s;o--)e[o]=e[o-t]};for(a(r),o=e;o<s;++o)r[o]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&oS(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function uS(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let t=0,r=n.length;t<r;t++)i=i.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=nw(i.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let i,r,s,o,a=t._length;const l=()=>{32767!==s&&-32768!==s&&(E_(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(i=0,r=n.length;i<r;++i)s=t.getPixelForValue(n[i]),l();for(o=void 0,i=0,r=t.ticks.length;i<r;++i)s=t.getPixelForTick(i),l();return a}function hS(e,t,n,i){return o_(e)?function(e,t,n,i){const r=n.parse(e[0],i),s=n.parse(e[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}(e,t,n,i):t[n.axis]=n.parse(e,i),t}function dS(e,t,n,i){const r=e.iScale,s=e.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=t[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(hS(d,h,s,c));return l}function fS(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function pS(e,t,n,i){let r=t.borderSkipped;const s={};if(!r)return void(e.borderSkipped=s);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function(e){let t,n,i,r,s;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:t,top:r,bottom:s}}(e);"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[gS(u,o,a,l)]=!0,r=c)),s[gS(r,o,a,l)]=!0,e.borderSkipped=s}function gS(e,t,n,i){var r,s,o;return i?(o=n,e=mS(e=(r=e)===(s=t)?o:r===o?s:r,n,t)):e=mS(e,t,n),e}function mS(e,t,n){return"start"===e?t:"end"===e?n:e}function yS(e,t,n){let{inflateAmount:i}=t;e.inflateAmount="auto"===i?1===n?.33:0:i}c(cS,"defaults",{}),c(cS,"datasetElementType",null),c(cS,"dataElementType",null);class vS extends cS{parsePrimitiveData(e,t,n,i){return dS(e,t,n,i)}parseArrayData(e,t,n,i){return dS(e,t,n,i)}parseObjectData(e,t,n,i){const{iScale:r,vScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l="x"===r.axis?o:a,c="x"===s.axis?o:a,u=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=t[h],f={},f[r.axis]=r.parse(x_(p,l),h),u.push(hS(x_(p,c),f,s,h));return u}updateRangeFromParsed(e,t,n,i){super.updateRangeFromParsed(e,t,n,i);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:i}=t,r=this.getParsed(e),s=r._custom,o=fS(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,i);for(let d=t;d<t+n;d++){const t=this.getParsed(d),n=r||s_(t[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(t._stacks||{})[o.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||fS(t._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,e[d].active?"active":i));const m=g.options||e[d].options;pS(g,m,p,s),yS(g,m,c.ratio),this.updateElement(e[d],d,g,i)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),r=n.options.stacked,s=[],o=this._cachedMeta.controller.getParsed(t),a=o&&o[n.axis],l=e=>{const t=e._parsed.find((e=>e[n.axis]===a)),i=t&&t[e.vScale.axis];if(s_(i)||isNaN(i))return!0};for(const c of i)if((void 0===t||!l(c))&&((!1===r||-1===s.indexOf(c.stack)||void 0===r&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const i=this._getStacks(e,n),r=void 0!==t?i.indexOf(t):-1;return-1===r?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,i=[];let r,s;for(r=0,s=t.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const o=e.barThickness;return{min:o||uS(t),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:i},options:{base:r,minBarLength:s}}=this,o=r||0,a=this.getParsed(e),l=a._custom,c=fS(l);let u,h,d=a[t.axis],f=0,p=n?this.applyStack(t,a,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&L_(d)!==L_(l.barEnd)&&(f=0),f+=d);const g=s_(r)||c?f:r;let m=t.getPixelForValue(g);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<s){h=function(e,t,n){return 0!==e?L_(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(h,t,o)*s,d===o&&(m-=h/2);const e=t.getPixelForDecimal(0),r=t.getPixelForDecimal(1),l=Math.min(e,r),f=Math.max(e,r);m=Math.max(Math.min(m,f),l),u=m+h,n&&!c&&(a._stacks[t.axis]._visualValues[i]=t.getValueForPixel(u)-t.getValueForPixel(m))}if(m===t.getPixelForValue(o)){const e=L_(h)*t.getLineWidthForValue(o)/2;m+=e,h-=e}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const n=t.scale,i=this.options,r=i.skipNull,s=u_(i.maxBarThickness,1/0);let o,a;if(t.grouped){const n=r?this._getStackCount(e):t.stackCount,l="flex"===i.barThickness?function(e,t,n,i){const r=t.pixels,s=r[e];let o=e>0?r[e-1]:null,a=e<r.length-1?r[e+1]:null;const l=n.categoryPercentage;null===o&&(o=s-(null===a?t.end-t.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}(e,t,i,n):function(e,t,n,i){const r=n.barThickness;let s,o;return s_(r)?(s=t.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[e]-s/2}}(e,t,i,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);o=l.start+l.chunk*c+l.chunk/2,a=Math.min(s,l.chunk*l.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),a=Math.min(s,t.min*t.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length;let r=0;for(;r<i;++r)null===this.getParsed(r)[t.axis]||n[r].hidden||n[r].draw(this._ctx)}}c(vS,"id","bar"),c(vS,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),c(vS,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class bS extends cS{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,i){const r=super.parsePrimitiveData(e,t,n,i);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(e,t,n,i){const r=super.parseArrayData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=u_(e[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(e,t,n,i){const r=super.parseObjectData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=u_(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+o+", "+a+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(t,i),c=s.axis,u=o.axis;for(let h=t;h<t+n;h++){const t=e[h],n=!r&&this.getParsed(h),d={},f=d[c]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=r?o.getBasePixel():o.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=a||this.resolveDataElementOptions(h,t.active?"active":i),r&&(d.options.radius=0)),this.updateElement(t,h,d,i)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==t&&(i.radius=0),i.radius+=u_(n&&n._custom,r),i}}c(bS,"id","bubble"),c(bS,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),c(bS,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class _S extends cS{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,o=e=>+n[e];if(a_(n[e])){const{key:e="value"}=this._parsing;o=t=>+x_(n[t],e)}for(r=e,s=e+t;r<s;++r)i._parsed[r]=o(r)}}_getRotation(){return V_(this.options.rotation-90)}_getCircumference(){return V_(this.options.circumference)}_getRotationExtents(){let e=I_,t=-I_;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min((l=this.options.cutout,c=o,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(e,t,n){let i=1,r=1,s=0,o=0;if(t<I_){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(e,t,i)=>Q_(e,a,l,!0)?1:Math.max(t,t*n,i,i*n),p=(e,t,i)=>Q_(e,a,l,!0)?-1:Math.min(t,t*n,i,i*n),g=f(0,c,h),m=f(R_,u,d),y=p(C_,c,h),v=p(C_+R_,u,d);i=(g-y)/2,r=(m-v)/2,s=-(g+y)/2,o=-(m+v)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}(d,h,a),y=(n.width-s)/f,v=(n.height-s)/p,b=Math.max(Math.min(y,v)/2,0),_=h_(this.options.radius,b),w=(_-Math.max(_*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*_,this.offsetY=m*_,i.total=this.calculateTotal(),this.outerRadius=_-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/I_)}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,o=s.chartArea,a=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,u=r&&a.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,i);let g,m=this._getRotation();for(g=0;g<t;++g)m+=this._circumference(g,r);for(g=t;g<t+n;++g){const t=this._circumference(g,r),n=e[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(g,n.active?"active":i)),m+=t,this.updateElement(n,g,s,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,i=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?I_*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=bw(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,r,s,o,a;if(!e)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),e=s.data,o=s.controller;break}if(!e)return 0;for(i=0,r=e.length;i<r;++i)a=o.resolveDataElementOptions(i),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(u_(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}c(_S,"id","doughnut"),c(_S,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),c(_S,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),c(_S,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map(((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class wS extends cS{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=t,s=this.chart._animationsDisabled;let{start:o,count:a}=aw(t,i,s);this._drawStart=o,this._drawCount=a,lw(t)&&(o=0,a=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(i,o,a,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,i),h=s.axis,d=o.axis,{spanGaps:f,segment:p}=this.options,g=z_(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||r||"none"===i,y=t+n,v=e.length;let b=t>0&&this.getParsed(t-1);for(let _=0;_<v;++_){const n=e[_],f=m?n:{};if(_<t||_>=y){f.skip=!0;continue}const v=this.getParsed(_),w=s_(v[d]),x=f[h]=s.getPixelForValue(v[h],_),S=f[d]=r||w?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,v,a):v[d],_);f.skip=isNaN(x)||isNaN(S)||w,f.stop=_>0&&Math.abs(v[h]-b[h])>g,p&&(f.parsed=v,f.raw=l.data[_]),u&&(f.options=c||this.resolveDataElementOptions(_,n.active?"active":i)),m||this.updateElement(n,_,f,i),b=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}c(wS,"id","line"),c(wS,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),c(wS,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class xS extends cS{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=bw(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,n,i){return fx.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,o=s.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,u=a.getIndexAngle(0)-.5*C_;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<t;++h)d+=this._computeAngle(h,i,f);for(h=t;h<t+n;h++){const t=e[h];let n=d,p=d+this._computeAngle(h,i,f),g=s.getDataVisibility(h)?a.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,r&&(o.animateScale&&(g=0),o.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,t.active?"active":i)};this.updateElement(t,h,m,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?V_(this.resolveDataElementOptions(e,t).angle||n):0}}c(xS,"id","polarArea"),c(xS,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),c(xS,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map(((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class SS extends _S{}c(SS,"id","pie"),c(SS,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class ES extends cS{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,i){return fx.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta,n=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(n.points=i,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let o=t;o<t+n;o++){const t=e[o],n=this.resolveDataElementOptions(o,t.active?"active":i),a=r.getPointPositionForValue(o,this.getParsed(o).r),l=s?r.xCenter:a.x,c=s?r.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,o,u,i)}}}c(ES,"id","radar"),c(ES,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),c(ES,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class kS extends cS{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y);return{label:n[e]||"",value:"("+o+", "+a+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:s}=aw(t,n,i);if(this._drawStart=r,this._drawCount=s,lw(t)&&(r=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:s}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const o=this.resolveDatasetElementOptions(e);o.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:o},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,r,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,i),u=this.getSharedOptions(c),h=this.includeOptions(i,u),d=s.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=z_(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||"none"===i;let v=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=y?t:{},p=s_(n[f]),_=c[d]=s.getPixelForValue(n[d],b),w=c[f]=r||p?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[f],b);c.skip=isNaN(_)||isNaN(w)||p,c.stop=b>0&&Math.abs(n[d]-v[d])>m,g&&(c.parsed=n,c.raw=l.data[b]),h&&(c.options=u||this.resolveDataElementOptions(b,t.active?"active":i)),y||this.updateElement(t,b,c,i),v=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,s)/2}}c(kS,"id","scatter"),c(kS,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),c(kS,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function TS(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class CS{static override(e){Object.assign(CS.prototype,e)}constructor(e){c(this,"options",void 0),this.options=e||{}}init(){}formats(){return TS()}parse(){return TS()}format(){return TS()}add(){return TS()}diff(){return TS()}startOf(){return TS()}endOf(){return TS()}}var IS=CS;function AS(e,t,n,i){const{controller:r,data:s,_sorted:o}=e,a=r._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&o&&s.length){const e=a._reversePixels?Z_:J_;if(!i)return e(s,t,n);if(r._sharedOptions){const i=s[0],r="function"===typeof i.getRange&&i.getRange(t);if(r){const i=e(s,t,n-r),o=e(s,t,n+r);return{lo:i.lo,hi:o.hi}}}}return{lo:0,hi:s.length-1}}function NS(e,t,n,i,r){const s=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=s.length;a<l;++a){const{index:e,data:n}=s[a],{lo:l,hi:c}=AS(s[a],t,o,r);for(let t=l;t<=c;++t){const r=n[t];r.skip||i(r,e,t)}}}function OS(e,t,n,i,r){const s=[];if(!r&&!e.isPointInArea(t))return s;return NS(e,n,t,(function(n,o,a){(r||Dw(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&s.push({element:n,datasetIndex:o,index:a})}),!0),s}function RS(e,t,n,i,r,s){let o=[];const a=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){const r=t?Math.abs(e.x-i.x):0,s=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return NS(e,n,t,(function(n,c,u){const h=n.inRange(t.x,t.y,r);if(i&&!h)return;const d=n.getCenterPoint(r);if(!(!!s||e.isPointInArea(d))&&!h)return;const f=a(t,d);f<l?(o=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&o.push({element:n,datasetIndex:c,index:u})})),o}function PS(e,t,n,i,r,s){return s||e.isPointInArea(t)?"r"!==n||i?RS(e,t,n,i,r,s):function(e,t,n,i){let r=[];return NS(e,n,t,(function(e,n,s){const{startAngle:o,endAngle:a}=e.getProps(["startAngle","endAngle"],i),{angle:l}=q_(e,{x:t.x,y:t.y});Q_(l,o,a)&&r.push({element:e,datasetIndex:n,index:s})})),r}(e,t,n,r):[]}function DS(e,t,n,i,r){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return NS(e,n,t,((e,i,l)=>{e[o]&&e[o](t[n],r)&&(s.push({element:e,datasetIndex:i,index:l}),a=a||e.inRange(t.x,t.y,r))})),i&&!a?[]:s}var MS={evaluateInteractionItems:NS,modes:{index(e,t,n,i){const r=Cx(t,e),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?OS(e,r,s,i,o):PS(e,r,s,!1,i,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=a[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,i){const r=Cx(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?OS(e,r,s,i,o):PS(e,r,s,!1,i,o);if(a.length>0){const t=a[0].datasetIndex,n=e.getDatasetMeta(t).data;a=[];for(let e=0;e<n.length;++e)a.push({element:n[e],datasetIndex:t,index:e})}return a},point:(e,t,n,i)=>OS(e,Cx(t,e),n.axis||"xy",i,n.includeInvisible||!1),nearest(e,t,n,i){const r=Cx(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return PS(e,r,s,n.intersect,i,o)},x:(e,t,n,i)=>DS(e,Cx(t,e),"x",n.intersect,i),y:(e,t,n,i)=>DS(e,Cx(t,e),"y",n.intersect,i)}};const LS=["left","top","right","bottom"];function jS(e,t){return e.filter((e=>e.pos===t))}function FS(e,t){return e.filter((e=>-1===LS.indexOf(e.pos)&&e.box.axis===t))}function zS(e,t){return e.sort(((e,n)=>{const i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function US(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:i,stackWeight:r}=n;if(!e||!LS.includes(i))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return t}(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=e.length;s<o;++s){a=e[s];const{fullSize:o}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*i:o&&t.availableWidth,a.height=r):(a.width=i,a.height=c?c*r:o&&t.availableHeight)}return n}function VS(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function BS(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function HS(e,t,n,i){const{pos:r,box:s}=n,o=e.maxPadding;if(!a_(r)){n.size&&(e[r]-=n.size);const t=i[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[r]+=n.size}s.getPadding&&BS(o,s.getPadding());const a=Math.max(0,t.outerWidth-VS(o,e,"left","right")),l=Math.max(0,t.outerHeight-VS(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function qS(e,t){const n=t.maxPadding;function i(e){const i={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{i[e]=Math.max(t[e],n[e])})),i}return i(e?["left","right"]:["top","bottom"])}function WS(e,t,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=e.length,c=0;s<o;++s){a=e[s],l=a.box,l.update(a.width||t.w,a.height||t.h,qS(a.horizontal,t));const{same:o,other:h}=HS(t,n,a,i);c|=o&&r.length,u=u||h,l.fullSize||r.push(a)}return c&&WS(r,t,n,i)||u}function KS(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function GS(e,t,n,i){const r=n.padding;let{x:s,y:o}=t;for(const a of e){const e=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const i=t.w*c,s=l.size||e.height;E_(l.start)&&(o=l.start),e.fullSize?KS(e,r.left,o,n.outerWidth-r.right-r.left,s):KS(e,t.left+l.placed,o,i,s),l.start=o,l.placed+=i,o=e.bottom}else{const i=t.h*c,o=l.size||e.width;E_(l.start)&&(s=l.start),e.fullSize?KS(e,s,r.top,o,n.outerHeight-r.bottom-r.top):KS(e,s,t.top+l.placed,o,i),l.start=s,l.placed+=i,s=e.right}}t.x=s,t.y=o}var QS={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=Xw(e.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(n-r.height,0),a=function(e){const t=function(e){const t=[];let n,i,r,s,o,a;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],({position:s,options:{stack:o,stackWeight:a=1}}=r),t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}(e),n=zS(t.filter((e=>e.box.fullSize)),!0),i=zS(jS(t,"left"),!0),r=zS(jS(t,"right")),s=zS(jS(t,"top"),!0),o=zS(jS(t,"bottom")),a=FS(t,"x"),l=FS(t,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:jS(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;f_(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);BS(d,Xw(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),p=US(l.concat(c),h);WS(a.fullSize,f,h,p),WS(l,f,h,p),WS(c,f,h,p)&&WS(l,f,h,p),function(e){const t=e.maxPadding;function n(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),GS(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,GS(a.rightAndBottom,f,h,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},f_(a.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class YS{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class XS extends YS{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const $S="$chartjs",JS={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ZS=e=>null===e||""===e;const eE=!!Ox&&{passive:!0};function tE(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,eE)}function nE(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function iE(e,t,n){const i=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||nE(n.addedNodes,i),t=t&&!nE(n.removedNodes,i);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function rE(e,t,n){const i=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||nE(n.removedNodes,i),t=t&&!nE(n.addedNodes,i);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const sE=new Map;let oE=0;function aE(){const e=window.devicePixelRatio;e!==oE&&(oE=e,sE.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function lE(e,t,n){const i=e.canvas,r=i&&xx(i);if(!r)return;const s=rw(((e,t)=>{const i=r.clientWidth;n(e,t),i<r.clientWidth&&n()}),window),o=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||s(n,i)}));return o.observe(r),function(e,t){sE.size||window.addEventListener("resize",aE),sE.set(e,t)}(e,s),o}function cE(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){sE.delete(e),sE.size||window.removeEventListener("resize",aE)}(e)}function uE(e,t,n){const i=e.canvas,r=rw((t=>{null!==e.ctx&&n(function(e,t){const n=JS[e.type]||e.type,{x:i,y:r}=Cx(e,t);return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==r?r:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,eE)}(i,t,r),r}class hE extends YS{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[$S]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ZS(r)){const t=Rx(e,"width");void 0!==t&&(e.width=t)}if(ZS(i))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Rx(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[$S])return!1;const n=t[$S].initial;["height","width"].forEach((e=>{const i=n[e];s_(i)?t.removeAttribute(e):t.setAttribute(e,i)}));const i=n.style||{};return Object.keys(i).forEach((e=>{t.style[e]=i[e]})),t.width=t.width,delete t[$S],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),r={attach:iE,detach:rE,resize:lE}[t]||uE;i[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:cE,detach:cE,resize:cE}[t]||tE)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return Ax(e,t,n,i)}isAttached(e){const t=e&&xx(e);return!(!t||!t.isConnected)}}class dE{constructor(){c(this,"x",void 0),c(this,"y",void 0),c(this,"active",!1),c(this,"options",void 0),c(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return z_(this.x)&&z_(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach((e=>{i[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),i}}function fE(e,t){const n=e.options.ticks,i=function(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}(e),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return function(e,t,n,i){let r,s=0,o=n[0];for(i=Math.ceil(i),r=0;r<e.length;r++)r===o&&(t.push(e[r]),s++,o=n[s*i])}(t,c,s,o/r),c;const u=function(e,t,n){const i=function(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}(e),r=t.length/n;if(!i)return Math.max(r,1);const s=function(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(i);for(let o=0,a=s.length-1;o<a;o++){const e=s[o];if(e>r)return e}return Math.max(r,1)}(s,t,r);if(o>0){let e,n;const i=o>1?Math.round((l-a)/(o-1)):null;for(pE(t,c,u,s_(i)?0:a-i,a),e=0,n=o-1;e<n;e++)pE(t,c,u,s[e],s[e+1]);return pE(t,c,u,l,s_(i)?t.length:l+i),c}return pE(t,c,u),c}function pE(e,t,n,i,r){const s=u_(i,0),o=Math.min(u_(r,e.length),e.length);let a,l,c,u=0;for(n=Math.ceil(n),r&&(a=r-i,n=a/Math.floor(a/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<o;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}c(dE,"defaults",{}),c(dE,"defaultRoutes",void 0);const gE=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,mE=(e,t)=>Math.min(t||e,e);function yE(e,t){const n=[],i=e.length/t,r=e.length;let s=0;for(;s<r;s+=i)n.push(e[Math.floor(s)]);return n}function vE(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),s=e._startPixel,o=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-s,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<s-a||c>o+a)))return c}function bE(e){return e.drawTicks?e.tickLength:0}function _E(e,t){if(!e.display)return 0;const n=$w(e.font,t),i=Xw(e.padding);return(o_(e.text)?e.text.length:1)*n.lineHeight+i.height}function wE(e,t,n){let i=sw(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=(e=>"left"===e?"right":"right"===e?"left":e)(i)),i}class xE extends dE{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=c_(e,Number.POSITIVE_INFINITY),t=c_(t,Number.NEGATIVE_INFINITY),n=c_(n,Number.POSITIVE_INFINITY),i=c_(i,Number.NEGATIVE_INFINITY),{min:c_(e,n),max:c_(t,i),minDefined:l_(e),maxDefined:l_(t)}}getMinMax(e){let t,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)t=o[a].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),s||(i=Math.max(i,t.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:c_(n,c_(i,n)),max:c_(i,c_(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){d_(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:i,max:r}=e,s=h_(t,(r-i)/2),o=(e,t)=>n&&0===e?0:e+t;return{min:o(i,-Math.abs(s)),max:o(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?yE(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=fE(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){d_(this.options.afterUpdate,[this])}beforeSetDimensions(){d_(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){d_(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),d_(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){d_(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=d_(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){d_(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){d_(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=mE(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let s,o,a,l=i;if(!this._isVisible()||!t.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=Y_(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(e.offset?.5:1)),o=this.maxHeight-bE(e.grid)-t.padding-_E(e.title,this.chart.options.font),a=Math.sqrt(u*u+h*h),l=B_(Math.min(Math.asin(Y_((c.highest.height+6)/s,-1,1)),Math.asin(Y_(o/a,-1,1))-Math.asin(Y_(h/a,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){d_(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){d_(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=_E(i,t.options.font);if(o?(e.width=this.maxWidth,e.height=bE(r)+s):(e.height=this.maxHeight,e.width=bE(r)+s),n.display&&this.ticks.length){const{first:t,last:i,widest:r,highest:s}=this._getLabelSizes(),a=2*n.padding,l=V_(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(o){const t=n.mirror?0:u*r.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=n.mirror?0:c*r.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,i,u,c)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:r,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;a?l?(u=i*e.width,h=n*t.height):(u=n*e.height,h=i*t.width):"start"===r?h=t.width:"end"===r?u=e.width:"inner"!==r&&(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,i=e.height/2;"start"===r?(n=0,i=e.height):"end"===r&&(n=t.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){d_(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)s_(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=yE(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:r}=this,s=[],o=[],a=Math.floor(t/mE(t,n));let l,c,u,h,d,f,p,g,m,y,v,b=0,_=0;for(l=0;l<t;l+=a){if(h=e[l].label,d=this._resolveTickFontOptions(l),i.font=f=d.string,p=r[f]=r[f]||{data:{},gc:[]},g=d.lineHeight,m=y=0,s_(h)||o_(h)){if(o_(h))for(c=0,u=h.length;c<u;++c)v=h[c],s_(v)||o_(v)||(m=Iw(i,p.data,p.gc,m,v),y+=g)}else m=Iw(i,p.data,p.gc,m,h),y=g;s.push(m),o.push(y),b=Math.max(m,b),_=Math.max(y,_)}!function(e,t){f_(e,(e=>{const n=e.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[n[r]];n.splice(0,i)}}))}(r,t);const w=s.indexOf(b),x=o.indexOf(_),S=e=>({width:s[e]||0,height:o[e]||0});return{first:S(0),last:S(t-1),widest:S(w),highest:S(x),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Y_(this._alignToPixels?Nw(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return Zw(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=Zw(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=V_(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),s=e.autoSkipPadding||0,o=r?r.widest.width+s:0,a=r?r.highest.height+s:0;return this.isHorizontal()?a*n>o*i?o/n:a/i:a*i<o*n?a/n:o/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:o}=i,a=r.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=bE(r),h=[],d=o.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(e){return Nw(n,e,f)};let m,y,v,b,_,w,x,S,E,k,T,C;if("top"===s)m=g(this.bottom),w=this.bottom-u,S=m-p,k=g(e.top)+p,C=e.bottom;else if("bottom"===s)m=g(this.top),k=e.top,C=g(e.bottom)-p,w=m+p,S=this.top+u;else if("left"===s)m=g(this.right),_=this.right-u,x=m-p,E=g(e.left)+p,T=e.right;else if("right"===s)m=g(this.left),E=e.left,T=g(e.right)-p,_=m+p,x=this.left+u;else if("x"===t){if("center"===s)m=g((e.top+e.bottom)/2+.5);else if(a_(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}k=e.top,C=e.bottom,w=m+p,S=w+u}else if("y"===t){if("center"===s)m=g((e.left+e.right)/2);else if(a_(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}_=m-p,x=_-u,E=e.left,T=e.right}const I=u_(i.ticks.maxTicksLimit,c),A=Math.max(1,Math.ceil(c/I));for(y=0;y<c;y+=A){const e=this.getContext(y),t=r.setContext(e),i=o.setContext(e),s=t.lineWidth,c=t.color,u=i.dash||[],d=i.dashOffset,f=t.tickWidth,p=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;v=vE(this,y,a),void 0!==v&&(b=Nw(n,v,s),l?_=x=E=T=b:w=S=k=C=b,h.push({tx1:_,ty1:w,tx2:x,ty2:S,x1:E,y1:k,x2:T,y2:C,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=r,h=bE(n.grid),d=h+c,f=u?-c:d,p=-V_(this.labelRotation),g=[];let m,y,v,b,_,w,x,S,E,k,T,C,I="middle";if("top"===i)w=this.bottom-f,x=this._getXAxisLabelAlignment();else if("bottom"===i)w=this.top+f,x=this._getXAxisLabelAlignment();else if("left"===i){const e=this._getYAxisLabelAlignment(h);x=e.textAlign,_=e.x}else if("right"===i){const e=this._getYAxisLabelAlignment(h);x=e.textAlign,_=e.x}else if("x"===t){if("center"===i)w=(e.top+e.bottom)/2+d;else if(a_(i)){const e=Object.keys(i)[0],t=i[e];w=this.chart.scales[e].getPixelForValue(t)+d}x=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)_=(e.left+e.right)/2-d;else if(a_(i)){const e=Object.keys(i)[0],t=i[e];_=this.chart.scales[e].getPixelForValue(t)}x=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===a?I="top":"end"===a&&(I="bottom"));const A=this._getLabelSizes();for(m=0,y=o.length;m<y;++m){v=o[m],b=v.label;const e=r.setContext(this.getContext(m));S=this.getPixelForTick(m)+r.labelOffset,E=this._resolveTickFontOptions(m),k=E.lineHeight,T=o_(b)?b.length:1;const t=T/2,n=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let h,d=x;if(s?(_=S,"inner"===x&&(d=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),C="top"===i?"near"===l||0!==p?-T*k+k/2:"center"===l?-A.highest.height/2-t*k+k:-A.highest.height+k/2:"near"===l||0!==p?k/2:"center"===l?A.highest.height/2-t*k:A.highest.height-T*k,u&&(C*=-1),0===p||e.showLabelBackdrop||(_+=k/2*Math.sin(p))):(w=S,C=(1-T)*k/2),e.showLabelBackdrop){const t=Xw(e.backdropPadding),n=A.heights[m],i=A.widths[m];let r=C-t.top,s=0-t.left;switch(I){case"middle":r-=n/2;break;case"bottom":r-=n}switch(x){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":m===y-1?s-=i:m>0&&(s-=i/2)}h={left:s,top:r,width:i+t.width,height:n+t.height,color:e.backdropColor}}g.push({label:b,font:E,textOffset:C,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:d,textBaseline:I,translation:[_,w],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-V_(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=e+r,o=this._getLabelSizes().widest.width;let a,l;return"left"===t?i?(l=this.right+r,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l=this.left)):"right"===t?i?(l=this.left+r,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:r,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,s;const o=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,s=i.length;r<s;++r){const e=i[r];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=Nw(e,this.left,s)-s/2,c=Nw(e,this.right,o)+o/2,u=h=a):(u=Nw(e,this.top,s)-s/2,h=Nw(e,this.bottom,o)+o/2,l=c=a),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&Mw(t,n);const i=this.getLabelItems(e);for(const r of i){const e=r.options,n=r.font;Vw(t,r.label,0,r.textOffset,n,e)}n&&Lw(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const r=$w(n.font),s=Xw(n.padding),o=n.align;let a=r.lineHeight/2;"bottom"===t||"center"===t||a_(t)?(a+=s.bottom,o_(n.text)&&(a+=r.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,f,p=0;const g=o-r,m=a-s;if(e.isHorizontal()){if(d=ow(i,s,a),a_(n)){const e=Object.keys(n)[0],i=n[e];f=u[e].getPixelForValue(i)+g-t}else f="center"===n?(c.bottom+c.top)/2+g-t:gE(e,n,t);h=a-s}else{if(a_(n)){const e=Object.keys(n)[0],i=n[e];d=u[e].getPixelForValue(i)-m+t}else d="center"===n?(c.left+c.right)/2-m+t:gE(e,n,t);f=ow(i,o,r),p="left"===n?-R_:R_}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,a,t,o);Vw(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:h,textAlign:wE(o,t,i),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=u_(e.grid&&e.grid.z,-1),i=u_(e.border&&e.border.z,0);return this._isVisible()&&this.draw===xE.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];s[n]!==this.id||e&&s.type!==e||i.push(s)}return i}_resolveTickFontOptions(e){return $w(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class SE{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const i=this.items,r=e.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,function(e,t,n){const i=v_(Object.create(null),[n?Cw.get(n):{},Cw.get(t),e.defaults]);Cw.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const i=n.split("."),r=i.pop(),s=[e].concat(i).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");Cw.route(s,r,l,a)}))}(t,e.defaultRoutes);e.descriptors&&Cw.describe(t,e.descriptors)}(e,s,n),this.override&&Cw.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in Cw[i]&&(delete Cw[i][n],this.override&&delete xw[n])}}class EE{constructor(){this.controllers=new SE(cS,"datasets",!0),this.elements=new SE(dE,"elements"),this.plugins=new SE(Object,"plugins"),this.scales=new SE(xE,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const i=n||this._getRegistryForType(t);n||i.isForType(t)||i===this.plugins&&t.id?this._exec(e,i,t):f_(t,(t=>{const i=n||this._getRegistryForType(t);this._exec(e,i,t)}))}))}_exec(e,t,n){const i=S_(e);d_(n["before"+i],[],n),t[e](n),d_(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var kE=new EE;class TE{constructor(){this._init=[]}notify(e,t,n,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,i){i=i||{};for(const r of e){const e=r.plugin;if(!1===d_(e[n],[t,i,r.options],e)&&i.cancelable)return!1}return!0}invalidate(){s_(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=u_(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],i=Object.keys(kE.plugins.items);for(let s=0;s<i.length;s++)n.push(kE.getPlugin(i[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const e=r[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){let{plugins:r,localIds:s}=t;const o=[],a=e.getContext();for(const l of r){const t=l.id,r=CE(n[t],i);null!==r&&o.push({plugin:l,options:IE(e.config,{plugin:l,local:s[t]},r,a)})}return o}(e,r,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function CE(e,t){return t||!1!==e?!0===e?{}:e:null}function IE(e,t,n,i){let{plugin:r,local:s}=t;const o=e.pluginScopeKeys(r),a=e.getOptionScopes(n,o);return s&&r.defaults&&a.push(r.defaults),e.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function AE(e,t){const n=Cw.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function NE(e){if("x"===e||"y"===e||"r"===e)return e}function OE(e){if(NE(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const s of n){const t=s.axis||("top"===(r=s.position)||"bottom"===r?"x":"left"===r||"right"===r?"y":void 0)||e.length>1&&NE(e[0].toLowerCase());if(t)return t}var r;throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function RE(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function PE(e,t){const n=xw[e.type]||{scales:{}},i=t.scales||{},r=AE(e.type,t),s=Object.create(null);return Object.keys(i).forEach((t=>{const o=i[t];if(!a_(o))return console.error("Invalid scale configuration for scale: ".concat(t));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const a=OE(t,o,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return RE(e,"x",n[0])||RE(e,"y",n[0])}return{}}(t,e),Cw.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(a,r),c=n.scales||{};s[t]=b_(Object.create(null),[{axis:a},o,c[a],c[l]])})),e.data.datasets.forEach((n=>{const r=n.type||e.type,o=n.indexAxis||AE(r,t),a=(xw[r]||{}).scales||{};Object.keys(a).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),r=n[t+"AxisID"]||t;s[r]=s[r]||Object.create(null),b_(s[r],[{axis:t},i[r],a[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];b_(t,[Cw.scales[t.type],Cw.scale])})),s}function DE(e){const t=e.options||(e.options={});t.plugins=u_(t.plugins,{}),t.scales=PE(e,t)}function ME(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const LE=new Map,jE=new Set;function FE(e,t){let n=LE.get(e);return n||(n=t(),LE.set(e,n),jE.add(n)),n}const zE=(e,t,n)=>{const i=x_(t,n);void 0!==i&&e.add(i)};class UE{constructor(e){this._config=function(e){return(e=e||{}).data=ME(e.data),DE(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ME(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),DE(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return FE(e,(()=>[["datasets.".concat(e),""]]))}datasetAnimationScopeKeys(e,t){return FE("".concat(e,".transition.").concat(t),(()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]))}datasetElementScopeKeys(e,t){return FE("".concat(e,"-").concat(t),(()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]))}pluginScopeKeys(e){const t=e.id,n=this.type;return FE("".concat(n,"-plugin-").concat(t),(()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:r}=this,s=this._cachedScopes(e,n),o=s.get(t);if(o)return o;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>zE(a,e,t)))),t.forEach((e=>zE(a,i,e))),t.forEach((e=>zE(a,xw[r]||{},e))),t.forEach((e=>zE(a,Cw,e))),t.forEach((e=>zE(a,Sw,e)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),jE.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,xw[t]||{},Cw.datasets[t]||{},{type:t},Cw,Sw]}resolveNamedOptions(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:o}=VE(this._resolverCache,e,i);let a=s;if(function(e,t){const{isScriptable:n,isIndexable:i}=nx(e);for(const r of t){const t=n(r),s=i(r),o=(s||t)&&e[r];if(t&&(k_(o)||BE(o))||s&&o_(o))return!0}return!1}(s,t)){r.$shared=!1;a=tx(s,n=k_(n)?n():n,this.createResolver(e,n,o))}for(const l of t)r[l]=a[l];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=VE(this._resolverCache,e,n);return a_(t)?tx(r,t,void 0,i):r}}function VE(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:ex(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},i.set(r,s)}return s}const BE=e=>a_(e)&&Object.getOwnPropertyNames(e).some((t=>k_(e[t])));const HE=["top","bottom","left","right","chartArea"];function qE(e,t){return"top"===e||"bottom"===e||-1===HE.indexOf(e)&&"x"===t}function WE(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function KE(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),d_(n&&n.onComplete,[e],t)}function GE(e){const t=e.chart,n=t.options.animation;d_(n&&n.onProgress,[e],t)}function QE(e){return wx()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const YE={},XE=e=>{const t=QE(e);return Object.values(YE).filter((e=>e.canvas===t)).pop()};function $E(e,t,n){const i=Object.keys(e);for(const r of i){const i=+r;if(i>=t){const s=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=s)}}}function JE(e,t,n){return e.options.clip?e[n]:t[n]}class ZE{static register(){kE.add(...arguments),ek()}static unregister(){kE.remove(...arguments),ek()}constructor(e,t){const n=this.config=new UE(t),i=QE(e),r=XE(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!wx()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?XS:hE}(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=r_(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new TE,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],YE[this.id]=this,o&&a?(Gx.listen(this,"complete",KE),Gx.listen(this,"progress",GE),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:r}=this;return s_(e)?t&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return kE}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Nx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ow(this.canvas,this.ctx),this}stop(){return Gx.stop(this),this}resize(e,t){Gx.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,t,r),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Nx(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),d_(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){f_(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let r=[];t&&(r=r.concat(Object.keys(t).map((e=>{const n=t[e],i=OE(e,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}})))),f_(r,(t=>{const r=t.options,s=r.id,o=OE(s,r),a=u_(r.type,t.dtype);void 0!==r.position&&qE(r.position,o)===qE(t.dposition)||(r.position=t.dposition),i[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(kE.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)})),f_(i,((e,t)=>{e||delete n[t]})),f_(n,(e=>{QS.configure(this,e,e.options),QS.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(WE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const i=t[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||AE(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=kE.getController(s),{datasetElementType:i,dataElementType:o}=Cw.datasets[s];Object.assign(t,{dataElementType:kE.getElement(o),datasetElementType:i&&kE.getElement(i)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){f_(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||f_(r,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(WE("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){f_(this.scales,(e=>{QS.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);T_(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of t){$E(e,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),i=n(0);for(let r=1;r<t;r++)if(!T_(i,n(r)))return;return Array.from(i).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;QS.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],f_(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,k_(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Gx.has(this)?this.attached&&!Gx.running(this)&&Gx.start(this):(this.draw(),KE({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,r;for(i=0,r=t.length;i<r;++i){const r=t[i];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,i=!n.disabled,r=function(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:JE(n,t,"left"),right:JE(n,t,"right"),top:JE(i,t,"top"),bottom:JE(i,t,"bottom")}:t}(e,this.chartArea),s={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(i&&Mw(t,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),e.controller.draw(),i&&Lw(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Dw(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const r=MS.modes[t];return"function"===typeof r?r(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter((e=>e&&e._dataset===t)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Zw(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),s=r.controller._resolveAnimations(void 0,i);E_(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(r,{visible:n}),this.update((t=>t.datasetIndex===e?i:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Gx.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ow(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete YE[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};f_(this.options.events,(e=>n(e,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(n,i)=>{e[n]&&(t.removeEventListener(this,n,i),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():s()}unbindEvents(){f_(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},f_(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let r,s,o,a;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),o=0,a=e.length;o<a;++o){s=e[o];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}));!p_(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const i=this.options.hover,r=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),s=r(t,e),o=n?e:r(e,t);s.length&&this.updateHoverStyle(s,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:r}=this,s=t,o=this._getActiveElements(e,i,n,s),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,a);n&&(this._lastEvent=null,d_(r.onHover,[e,o,this],this),a&&d_(r.onClick,[e,o,this],this));const c=!p_(o,i);return(c||t)&&(this._active=o,this._updateHoverStyles(o,i,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}function ek(){return f_(ZE.instances,(e=>e._plugins.invalidate()))}function tk(e,t,n,i){const r=Gw(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,o=Math.min(s,i*t/2),a=e=>{const t=(n-Math.min(s,e))*i/2;return Y_(e,0,Math.min(s,t))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Y_(r.innerStart,0,o),innerEnd:Y_(r.innerEnd,0,o)}}function nk(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function ik(e,t,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const e=((u>0?u-i:0)+(h>0?h-i:0))/2;f=(p-(0!==e?p*e/(e+i):p))/2}const g=(p-Math.max(.001,p*h-n/C_)/h)/2,m=l+g+f,y=r-g-f,{outerStart:v,outerEnd:b,innerStart:_,innerEnd:w}=tk(t,d,h,y-m),x=h-v,S=h-b,E=m+v/x,k=y-b/S,T=d+_,C=d+w,I=m+_/T,A=y-w/C;if(e.beginPath(),s){const t=(E+k)/2;if(e.arc(o,a,h,E,t),e.arc(o,a,h,t,k),b>0){const t=nk(S,k,o,a);e.arc(t.x,t.y,b,k,y+R_)}const n=nk(C,y,o,a);if(e.lineTo(n.x,n.y),w>0){const t=nk(C,A,o,a);e.arc(t.x,t.y,w,y+R_,A+Math.PI)}const i=(y-w/d+(m+_/d))/2;if(e.arc(o,a,d,y-w/d,i,!0),e.arc(o,a,d,i,m+_/d,!0),_>0){const t=nk(T,I,o,a);e.arc(t.x,t.y,_,I+Math.PI,m-R_)}const r=nk(x,m,o,a);if(e.lineTo(r.x,r.y),v>0){const t=nk(x,E,o,a);e.arc(t.x,t.y,v,m-R_,E)}}else{e.moveTo(o,a);const t=Math.cos(E)*h+o,n=Math.sin(E)*h+a;e.lineTo(t,n);const i=Math.cos(k)*h+o,r=Math.sin(k)*h+a;e.lineTo(i,r)}e.closePath()}function rk(e,t,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,f?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(s){ik(e,t,n,i,p,r);for(let t=0;t<s;++t)e.stroke();isNaN(a)||(p=o+(a%I_||I_))}f&&function(e,t,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=r/a;e.beginPath(),e.arc(s,o,a,i-c,n+c),l>r?(c=r/l,e.arc(s,o,l,n+c,i-c,!0)):e.arc(s,o,r,n+R_,i-R_),e.closePath(),e.clip()}(e,t,p),s||(ik(e,t,n,i,p,r),e.stroke())}c(ZE,"defaults",Cw),c(ZE,"instances",YE),c(ZE,"overrides",xw),c(ZE,"registry",kE),c(ZE,"version","4.4.7"),c(ZE,"getChart",XE);class sk extends dE{constructor(e){super(),c(this,"circumference",void 0),c(this,"endAngle",void 0),c(this,"fullCircles",void 0),c(this,"innerRadius",void 0),c(this,"outerRadius",void 0),c(this,"pixelMargin",void 0),c(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=q_(i,{x:e,y:t}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=u_(u,a-o),f=Q_(r,o,a)&&o!==a,p=d>=I_||f,g=X_(s,l+h,c+h);return p&&g}getCenterPoint(e){const{x:t,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,c=(i+r)/2,u=(s+o+l+a)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,i=(t.offset||0)/4,r=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>I_?Math.floor(n/I_):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*i,Math.sin(o)*i);const a=i*(1-Math.sin(Math.min(C_,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){ik(e,t,n,i,l,r);for(let t=0;t<s;++t)e.fill();isNaN(a)||(l=o+(a%I_||I_))}ik(e,t,n,i,l,r),e.fill()}(e,this,a,r,s),rk(e,this,a,r,s),e.restore()}}function ok(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=u_(n.borderCapStyle,t.borderCapStyle),e.setLineDash(u_(n.borderDash,t.borderDash)),e.lineDashOffset=u_(n.borderDashOffset,t.borderDashOffset),e.lineJoin=u_(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=u_(n.borderWidth,t.borderWidth),e.strokeStyle=u_(n.borderColor,t.borderColor)}function ak(e,t,n){e.lineTo(n.x,n.y)}function lk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=t,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function ck(e,t,n,i){const{points:r,options:s}=t,{count:o,start:a,loop:l,ilen:c}=lk(r,n,i),u=function(e){return e.stepped?jw:e.tension||"monotone"===e.cubicInterpolationMode?Fw:ak}(s);let h,d,f,{move:p=!0,reverse:g}=i||{};for(h=0;h<=c;++h)d=r[(a+(g?c-h:h))%o],d.skip||(p?(e.moveTo(d.x,d.y),p=!1):u(e,f,d,g,s.stepped),f=d);return l&&(d=r[(a+(g?c:0))%o],u(e,f,d,g,s.stepped)),!!l}function uk(e,t,n,i){const r=t.points,{count:s,start:o,ilen:a}=lk(r,n,i),{move:l=!0,reverse:c}=i||{};let u,h,d,f,p,g,m=0,y=0;const v=e=>(o+(c?a-e:e))%s,b=()=>{f!==p&&(e.lineTo(m,p),e.lineTo(m,f),e.lineTo(m,g))};for(l&&(h=r[v(0)],e.moveTo(h.x,h.y)),u=0;u<=a;++u){if(h=r[v(u)],h.skip)continue;const t=h.x,n=h.y,i=0|t;i===d?(n<f?f=n:n>p&&(p=n),m=(y*m+t)/++y):(b(),e.lineTo(t,n),d=i,y=0,f=p=n),g=n}b()}function hk(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?uk:ck}c(sk,"id","arc"),c(sk,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),c(sk,"defaultRoutes",{backgroundColor:"backgroundColor"}),c(sk,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const dk="function"===typeof Path2D;function fk(e,t,n,i){dk&&!t.options.segment?function(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),ok(e,t.options),e.stroke(r)}(e,t,n,i):function(e,t,n,i){const{segments:r,options:s}=t,o=hk(t);for(const a of r)ok(e,s,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}(e,t,n,i)}class pk extends dE{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;_x(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const s=!!e._loop,{start:o,end:a}=function(e,t,n,i){let r=0,s=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}(n,r,s,i);return Hx(e,!0===i?[{start:o,end:a,loop:s}]:function(e,t,n,i){const r=e.length,s=[];let o,a=t,l=e[t];for(o=t+1;o<=n;++o){const n=e[o%r];n.skip||n.stop?l.skip||(i=!1,s.push({start:t%r,end:(o-1)%r,loop:i}),t=a=n.stop?o:null):(a=o,l.skip&&(t=o)),l=n}return null!==a&&s.push({start:t%r,end:a%r,loop:i}),s}(n,o,a<o?a+r:a,!!e._fullLoop&&0===o&&a===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],r=this.points,s=Bx(this,{property:t,start:i,end:i});if(!s.length)return;const o=[],a=function(e){return e.stepped?Dx:e.tension||"monotone"===e.cubicInterpolationMode?Mx:Px}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=r[c],d=r[u];if(h===d){o.push(h);continue}const f=a(h,d,Math.abs((i-h[t])/(d[t]-h[t])),n.stepped);f[t]=e[t],o.push(f)}return 1===o.length?o[0]:o}pathSegment(e,t,n){return hk(this)(e,this,t,n)}path(e,t,n){const i=this.segments,r=hk(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const o of i)s&=r(e,this,o,{start:t,end:t+n-1});return!!s}draw(e,t,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),fk(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function gk(e,t,n,i){const r=e.options,{[n]:s}=e.getProps([n],i);return Math.abs(t-s)<r.radius+r.hitRadius}c(pk,"id","line"),c(pk,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),c(pk,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),c(pk,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class mk extends dE{constructor(e){super(),c(this,"parsed",void 0),c(this,"skip",void 0),c(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return gk(this,e,"x",t)}inYRange(e,t){return gk(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!Dw(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Rw(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function yk(e,t){const{x:n,y:i,base:r,width:s,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return e.horizontal?(h=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=s/2,a=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function vk(e,t,n,i){return e?0:Y_(t,n,i)}function bk(e){const t=yk(e),n=t.right-t.left,i=t.bottom-t.top,r=function(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,s=Qw(i);return{t:vk(r.top,s.top,0,n),r:vk(r.right,s.right,0,t),b:vk(r.bottom,s.bottom,0,n),l:vk(r.left,s.left,0,t)}}(e,n/2,i/2),s=function(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=Yw(r),o=Math.min(t,n),a=e.borderSkipped,l=i||a_(r);return{topLeft:vk(!l||a.top||a.left,s.topLeft,0,o),topRight:vk(!l||a.top||a.right,s.topRight,0,o),bottomLeft:vk(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:vk(!l||a.bottom||a.right,s.bottomRight,0,o)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function _k(e,t,n,i){const r=null===t,s=null===n,o=e&&!(r&&s)&&yk(e,i);return o&&(r||X_(t,o.left,o.right))&&(s||X_(n,o.top,o.bottom))}function wk(e,t){e.rect(t.x,t.y,t.w,t.h)}function xk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-i,o=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+s,h:e.h+o,radius:e.radius}}c(mk,"id","point"),c(mk,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),c(mk,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class Sk extends dE{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=bk(this),o=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?Bw:wk;var a;e.save(),s.w===r.w&&s.h===r.h||(e.beginPath(),o(e,xk(s,t,r)),e.clip(),o(e,xk(r,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,xk(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return _k(this,e,t,n)}inXRange(e,t){return _k(this,e,null,t)}inYRange(e,t){return _k(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?n:(n+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}c(Sk,"id","bar"),c(Sk,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),c(Sk,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Ek=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}};class kk extends dE{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=d_(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,i=$w(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=Ek(n,r);let l,c;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,o,a)+10):(c=this.maxHeight,l=this._fitCols(s,i,o,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+o;let u=e;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach(((e,f)=>{const p=n+t/2+r.measureText(e.text).width;(0===f||l[l.length-1]+p+2*o>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),a[f]={left:0,top:d,row:h,width:p,height:i},l[l.length-1]+=p+o})),u}_fitCols(e,t,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=o,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((e,s)=>{const{itemWidth:g,itemHeight:m}=function(e,t,n,i,r){const s=function(e,t,n,i){let r=e.text;r&&"string"!==typeof r&&(r=r.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+i.measureText(r).width}(i,e,t,n),o=function(e,t,n){let i=e;"string"!==typeof t.text&&(i=Tk(t,n));return i}(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}(n,t,r,e,i);s>0&&d+m+2*o>c&&(u+=h+o,l.push({width:h,height:d}),f+=h+o,p++,h=d=0),a[s]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+o})),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:r}}=this,s=Lx(r,this.left,this.width);if(this.isHorizontal()){let r=0,o=ow(n,this.left+i,this.right-this.lineWidths[r]);for(const a of t)r!==a.row&&(r=a.row,o=ow(n,this.left+i,this.right-this.lineWidths[r])),a.top+=this.top+e+i,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+i}else{let r=0,o=ow(n,this.top+e+i,this.bottom-this.columnSizes[r].height);for(const a of t)a.col!==r&&(r=a.col,o=ow(n,this.top+e+i,this.bottom-this.columnSizes[r].height)),a.top=o,a.left+=this.left+i,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Mw(e,this),this._draw(),Lw(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:r,labels:s}=e,o=Cw.color,a=Lx(e.rtl,this.left,this.width),l=$w(s.font),{padding:c}=s,u=l.size,h=u/2;let d;this.drawTitle(),i.textAlign=a.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=Ek(s,u),m=this.isHorizontal(),y=this._computeTitleHeight();d=m?{x:ow(r,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:ow(r,this.top+y+c,this.bottom-t[0].height),line:0},jx(this.ctx,e.textDirection);const v=g+c;this.legendItems.forEach(((b,_)=>{i.strokeStyle=b.fontColor,i.fillStyle=b.fontColor;const w=i.measureText(b.text).width,x=a.textAlign(b.textAlign||(b.textAlign=s.textAlign)),S=f+h+w;let E=d.x,k=d.y;a.setWidth(this.width),m?_>0&&E+S+c>this.right&&(k=d.y+=v,d.line++,E=d.x=ow(r,this.left+c,this.right-n[d.line])):_>0&&k+v>this.bottom&&(E=d.x=E+t[d.line].width+c,d.line++,k=d.y=ow(r,this.top+y+c,this.bottom-t[d.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const r=u_(n.lineWidth,1);if(i.fillStyle=u_(n.fillStyle,o),i.lineCap=u_(n.lineCap,"butt"),i.lineDashOffset=u_(n.lineDashOffset,0),i.lineJoin=u_(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=u_(n.strokeStyle,o),i.setLineDash(u_(n.lineDash,[])),s.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=a.xPlus(e,f/2);Pw(i,o,l,t+h,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-p)/2,0),o=a.leftForLtr(e,f),l=Yw(n.borderRadius);i.beginPath(),Object.values(l).some((e=>0!==e))?Bw(i,{x:o,y:s,w:f,h:p,radius:l}):i.rect(o,s,f,p),i.fill(),0!==r&&i.stroke()}i.restore()}(a.x(E),k,b),E=((e,t,n,i)=>e===(i?"left":"right")?n:"center"===e?(t+n)/2:t)(x,E+f+h,m?E+S:this.right,e.rtl),function(e,t,n){Vw(i,n.text,e,t+g/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(E),k,b),m)d.x+=S+c;else if("string"!==typeof b.text){const e=l.lineHeight;d.y+=Tk(b,e)+c}else d.y+=v})),Fx(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=$w(t.font),i=Xw(t.padding);if(!t.display)return;const r=Lx(e.rtl,this.left,this.width),s=this.ctx,o=t.position,a=n.size/2,l=i.top+a;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=ow(e.align,u,this.right-h);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+ow(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=ow(o,u,u+h);s.textAlign=r.textAlign(sw(o)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,Vw(s,t.text,d,c,n)}_computeTitleHeight(){const e=this.options.title,t=$w(e.font),n=Xw(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,r;if(X_(e,this.left,this.right)&&X_(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],X_(e,i.left,i.left+i.width)&&X_(t,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,r=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(i,n);i&&!r&&d_(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!r&&d_(t.onHover,[e,n,this],this)}else n&&d_(t.onClick,[e,n,this],this)}}function Tk(e,t){return t*(e.text?e.text.length:0)}var Ck={id:"legend",_element:kk,start(e,t,n){const i=e.legend=new kk({ctx:e.ctx,options:n,chart:e});QS.configure(e,i,n),QS.addBox(e,i)},stop(e){QS.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;QS.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=Xw(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Ik extends dE{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=o_(n.text)?n.text.length:1;this._padding=Xw(n.padding);const r=i*$w(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:i,right:r,options:s}=this,o=s.align;let a,l,c,u=0;return this.isHorizontal()?(l=ow(o,n,r),c=t+e,a=r-n):("left"===s.position?(l=n+e,c=ow(o,i,t),u=-.5*C_):(l=r-e,c=ow(o,t,i),u=.5*C_),a=i-t),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=$w(t.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:o,rotation:a}=this._drawArgs(i);Vw(e,t.text,0,0,n,{color:t.color,maxWidth:o,rotation:a,textAlign:sw(t.align),textBaseline:"middle",translation:[r,s]})}}var Ak={id:"title",_element:Ik,start(e,t,n){!function(e,t){const n=new Ik({ctx:e.ctx,options:t,chart:e});QS.configure(e,n,t),QS.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;QS.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;QS.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const Nk={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();i.add(e.x),r+=e.y,++s}}if(0===s||0===i.size)return!1;const o=[...i].reduce(((e,t)=>e+t))/i.size;return{x:o,y:r/s}},nearest(e,t){if(!e.length)return!1;let n,i,r,s=t.x,o=t.y,a=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){const i=e[n].element;if(i&&i.hasValue()){const e=W_(t,i.getCenterPoint());e<a&&(a=e,r=i)}}if(r){const e=r.tooltipPosition();s=e.x,o=e.y}return{x:s,y:o}}};function Ok(e,t){return t&&(o_(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Rk(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Pk(e,t){const{element:n,datasetIndex:i,index:r}=t,s=e.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:e,label:o,parsed:s.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function Dk(e,t){const n=e.chart.ctx,{body:i,footer:r,title:s}=e,{boxWidth:o,boxHeight:a}=t,l=$w(t.bodyFont),c=$w(t.titleFont),u=$w(t.footerFont),h=s.length,d=r.length,f=i.length,p=Xw(t.padding);let g=p.height,m=0,y=i.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(y+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),y){g+=f*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let v=0;const b=function(e){m=Math.max(m,n.measureText(e).width+v)};return n.save(),n.font=c.string,f_(e.title,b),n.font=l.string,f_(e.beforeBody.concat(e.afterBody),b),v=t.displayColors?o+2+t.boxPadding:0,f_(i,(e=>{f_(e.before,b),f_(e.lines,b),f_(e.after,b)})),v=0,n.font=u.string,f_(e.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function Mk(e,t,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return"center"===i?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),function(e,t,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;return"left"===e&&r+s+o>t.width||"right"===e&&r-s-o<0||void 0}(c,e,t,n)&&(c="center"),c}function Lk(e,t,n){const i=n.yAlign||t.yAlign||function(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||Mk(e,t,n,i),yAlign:i}}function jk(e,t,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Yw(o);let p=function(e,t){let{x:n,width:i}=e;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,a);const g=function(e,t,n){let{y:i,height:r}=e;return"top"===t?i+=n:i-="bottom"===t?r+n:r/2,i}(t,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,d)+r:"right"===a&&(p+=Math.max(h,f)+r),{x:Y_(p,0,i.width-t.width),y:Y_(g,0,i.height-t.height)}}function Fk(e,t,n){const i=Xw(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function zk(e){return Ok([],Rk(e))}function Uk(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Vk={beforeTitle:i_,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:i_,beforeBody:i_,beforeLabel:i_,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return s_(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:i_,afterBody:i_,beforeFooter:i_,footer:i_,afterFooter:i_};function Bk(e,t,n,i){const r=e[t].call(n,i);return"undefined"===typeof r?Vk[t].call(n,i):r}class Hk extends dE{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new $x(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,Zw(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,i=Bk(n,"beforeTitle",this,e),r=Bk(n,"title",this,e),s=Bk(n,"afterTitle",this,e);let o=[];return o=Ok(o,Rk(i)),o=Ok(o,Rk(r)),o=Ok(o,Rk(s)),o}getBeforeBody(e,t){return zk(Bk(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return f_(e,(e=>{const t={before:[],lines:[],after:[]},r=Uk(n,e);Ok(t.before,Rk(Bk(r,"beforeLabel",this,e))),Ok(t.lines,Bk(r,"label",this,e)),Ok(t.after,Rk(Bk(r,"afterLabel",this,e))),i.push(t)})),i}getAfterBody(e,t){return zk(Bk(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=Bk(n,"beforeFooter",this,e),r=Bk(n,"footer",this,e),s=Bk(n,"afterFooter",this,e);let o=[];return o=Ok(o,Rk(i)),o=Ok(o,Rk(r)),o=Ok(o,Rk(s)),o}_createItems(e){const t=this._active,n=this.chart.data,i=[],r=[],s=[];let o,a,l=[];for(o=0,a=t.length;o<a;++o)l.push(Pk(this.chart,t[o]));return e.filter&&(l=l.filter(((t,i,r)=>e.filter(t,i,r,n)))),e.itemSort&&(l=l.sort(((t,i)=>e.itemSort(t,i,n)))),f_(l,(t=>{const n=Uk(e.callbacks,t);i.push(Bk(n,"labelColor",this,t)),r.push(Bk(n,"labelPointStyle",this,t)),s.push(Bk(n,"labelTextColor",this,t))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const e=Nk[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=Dk(this,n),o=Object.assign({},e,t),a=Lk(this.chart,n,o),l=jk(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=Yw(o),{x:h,y:d}=e,{width:f,height:p}=t;let g,m,y,v,b,_;return"center"===r?(b=d+p/2,"left"===i?(g=h,m=g-s,v=b+s,_=b-s):(g=h+f,m=g+s,v=b-s,_=b+s),y=g):(m="left"===i?h+Math.max(a,c)+s:"right"===i?h+f-Math.max(l,u)-s:this.caretX,"top"===r?(v=d,b=v-s,g=m-s,y=m+s):(v=d+p,b=v+s,g=m+s,y=m-s),_=v),{x1:g,x2:m,x3:y,y1:v,y2:b,y3:_}}drawTitle(e,t,n){const i=this.title,r=i.length;let s,o,a;if(r){const l=Lx(n.rtl,this.x,this.width);for(e.x=Fk(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=$w(n.titleFont),o=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,a=0;a<r;++a)t.fillText(i[a],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,a+1===r&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,t,n,i,r){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=r,c=$w(r.bodyFont),u=Fk(this,"left",r),h=i.x(u),d=a<c.lineHeight?(c.lineHeight-a)/2:0,f=t.y+d;if(r.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=i.leftForLtr(h,l)+l/2,c=f+a/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Rw(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,Rw(e,t,n,c)}else{e.lineWidth=a_(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=i.leftForLtr(h,l),n=i.leftForLtr(i.xPlus(h,1),l-2),o=Yw(s.borderRadius);Object.values(o).some((e=>0!==e))?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Bw(e,{x:t,y:f,w:l,h:a,radius:o}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),Bw(e,{x:n,y:f+1,w:l-2,h:a-2,radius:o}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,f,l,a),e.strokeRect(t,f,l,a),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,a-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=$w(n.bodyFont);let h=u.lineHeight,d=0;const f=Lx(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+d),e.y+h/2),e.y+=h+r},g=f.textAlign(s);let m,y,v,b,_,w,x;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=Fk(this,g,n),t.fillStyle=n.bodyColor,f_(this.beforeBody,p),d=o&&"right"!==g?"center"===s?l/2+c:l+2+c:0,b=0,w=i.length;b<w;++b){for(m=i[b],y=this.labelTextColors[b],t.fillStyle=y,f_(m.before,p),v=m.lines,o&&v.length&&(this._drawColorBox(t,e,b,f,n),h=Math.max(u.lineHeight,a)),_=0,x=v.length;_<x;++_)p(v[_]),h=u.lineHeight;f_(m.after,p)}d=0,h=u.lineHeight,f_(this.afterBody,p),e.y-=r}drawFooter(e,t,n){const i=this.footer,r=i.length;let s,o;if(r){const a=Lx(n.rtl,this.x,this.width);for(e.x=Fk(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=a.textAlign(n.footerAlign),t.textBaseline="middle",s=$w(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,o=0;o<r;++o)t.fillText(i[o],a.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:r,yAlign:s}=this,{x:o,y:a}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Yw(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(o+u,a),"top"===s&&this.drawCaret(e,t,n,i),t.lineTo(o+l-h,a),t.quadraticCurveTo(o+l,a,o+l,a+h),"center"===s&&"right"===r&&this.drawCaret(e,t,n,i),t.lineTo(o+l,a+c-f),t.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===s&&this.drawCaret(e,t,n,i),t.lineTo(o+d,a+c),t.quadraticCurveTo(o,a+c,o,a+c-d),"center"===s&&"left"===r&&this.drawCaret(e,t,n,i),t.lineTo(o,a+u),t.quadraticCurveTo(o,a,o+u,a),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=Nk[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=Dk(this,e),o=Object.assign({},n,this._size),a=Lk(t,e,o),l=jk(e,o,a,t);i._to===l.x&&r._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=Xw(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),jx(e,t.textDirection),r.y+=s.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),Fx(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map((e=>{let{datasetIndex:t,index:n}=e;const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}})),r=!p_(n,i),s=this._positionChanged(i,t);(r||s)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(e,r,t,n),o=this._positionChanged(s,e),a=t||!p_(s,r)||o;return a&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,n,i){const r=this.options;if("mouseout"===e.type)return[];if(!i)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const s=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:i,options:r}=this,s=Nk[r.position].call(this,e,t);return!1!==s&&(n!==s.x||i!==s.y)}}c(Hk,"positioners",Nk);var qk={id:"tooltip",_element:Hk,positioners:Nk,afterInit(e,t,n){n&&(e.tooltip=new Hk({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",h(h({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Vk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function Wk(e,t,n,i){const r=e.indexOf(t);if(-1===r)return((e,t,n,i)=>("string"===typeof t?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,i);return r!==e.lastIndexOf(t)?n:r}function Kk(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Gk extends xE{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:i}of t)e[n]===i&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(s_(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:Y_(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:Wk(n,e,u_(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)i.push({value:s});return i}getLabelForValue(e){return Kk.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Qk(e,t){const n=[],{bounds:i,step:r,min:s,max:o,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=r||1,f=c-1,{min:p,max:g}=t,m=!s_(s),y=!s_(o),v=!s_(l),b=(g-p)/(u+1);let _,w,x,S,E=F_((g-p)/f/d)*d;if(E<1e-14&&!m&&!y)return[{value:p},{value:g}];S=Math.ceil(g/E)-Math.floor(p/E),S>f&&(E=F_(S*E/f/d)*d),s_(a)||(_=Math.pow(10,a),E=Math.ceil(E*_)/_),"ticks"===i?(w=Math.floor(p/E)*E,x=Math.ceil(g/E)*E):(w=p,x=g),m&&y&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((o-s)/r,E/1e3)?(S=Math.round(Math.min((o-s)/E,c)),E=(o-s)/S,w=s,x=o):v?(w=m?s:w,x=y?o:x,S=l-1,E=(x-w)/S):(S=(x-w)/E,S=j_(S,Math.round(S),E/1e3)?Math.round(S):Math.ceil(S));const k=Math.max(H_(E),H_(w));_=Math.pow(10,s_(a)?k:a),w=Math.round(w*_)/_,x=Math.round(x*_)/_;let T=0;for(m&&(h&&w!==s?(n.push({value:s}),w<s&&T++,j_(Math.round((w+T*E)*_)/_,s,Yk(s,b,e))&&T++):w<s&&T++);T<S;++T){const e=Math.round((w+T*E)*_)/_;if(y&&e>o)break;n.push({value:e})}return y&&h&&x!==o?n.length&&j_(n[n.length-1].value,o,Yk(o,b,e))?n[n.length-1].value=o:n.push({value:o}):y&&x!==o||n.push({value:x}),n}function Yk(e,t,n){let{horizontal:i,minRotation:r}=n;const s=V_(r),o=(i?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/o,a)}c(Gk,"id","category"),c(Gk,"defaults",{ticks:{callback:Kk}});class Xk extends xE{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return s_(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=e=>i=t?i:e,o=e=>r=n?r:e;if(e){const e=L_(i),t=L_(r);e<0&&t<0?o(0):e>0&&t>0&&s(0)}if(i===r){let t=0===r?1:Math.abs(.05*r);o(r+t),e||s(i-t)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:i}=e;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=Qk({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&U_(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return bw(e,this.chart.options.locale,this.options.ticks.format)}}class $k extends Xk{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=l_(e)?e:0,this.max=l_(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=V_(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}c($k,"id","linear"),c($k,"defaults",{ticks:{callback:ww.formatters.numeric}});const Jk=e=>Math.floor(M_(e)),Zk=(e,t)=>Math.pow(10,Jk(e)+t);function eT(e){return 1===e/Math.pow(10,Jk(e))}function tT(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function nT(e,t){let{min:n,max:i}=t;n=c_(e.min,n);const r=[],s=Jk(n);let o=function(e,t){let n=Jk(t-e);for(;tT(e,t,n)>10;)n++;for(;tT(e,t,n)<10;)n--;return Math.min(n,Jk(e))}(n,i),a=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=s>o?Math.pow(10,s):0,u=Math.round((n-c)*a)/a,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,o)),f=c_(e.min,Math.round((c+h+d*Math.pow(10,o))*a)/a);for(;f<i;)r.push({value:f,major:eT(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,a=o>=0?1:a),f=Math.round((c+h+d*Math.pow(10,o))*a)/a;const p=c_(e.max,f);return r.push({value:p,major:eT(p),significand:d}),r}class iT extends xE{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=Xk.prototype.parse.apply(this,[e,t]);if(0!==n)return l_(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=l_(e)?Math.max(0,e):null,this.max=l_(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!l_(this._userMin)&&(this.min=e===Zk(this.min,0)?Zk(this.min,-1):Zk(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,i=this.max;const r=t=>n=e?n:t,s=e=>i=t?i:e;n===i&&(n<=0?(r(1),s(10)):(r(Zk(n,-1)),s(Zk(i,1)))),n<=0&&r(Zk(i,-1)),i<=0&&s(Zk(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,t=nT({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&U_(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":bw(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=M_(e),this._valueRange=M_(this.max)-M_(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(M_(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function rT(e){const t=e.ticks;if(t.display&&e.display){const e=Xw(t.backdropPadding);return u_(t.font&&t.font.size,Cw.font.size)+e.height}return 0}function sT(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function oT(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],s=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?C_/s:0;for(let h=0;h<s;h++){const s=o.setContext(e.getPointLabelContext(h));r[h]=s.padding;const d=e.getPointPosition(h,e.drawingArea+r[h],a),f=$w(s.font),p=(l=e.ctx,c=f,u=o_(u=e._pointLabels[h])?u:[u],{w:Aw(l,c.string,u),h:u.length*c.lineHeight});i[h]=p;const g=G_(e.getIndexAngle(h)+a),m=Math.round(B_(g));aT(n,t,g,sT(m,d.x,p.w,0,180),sT(m,d.y,p.h,90,270))}var l,c,u;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const i=[],r=e._pointLabels.length,s=e.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:rT(s)/2,additionalAngle:o?C_/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=t[u];const r=lT(e,u,l);i.push(r),"auto"===a&&(r.visible=cT(r,c),r.visible&&(c=r))}return i}(e,i,r)}function aT(e,t,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/s,e.l=Math.min(e.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,e.r=Math.max(e.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function lT(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=e.getPointPosition(t,i+r+o,s),c=Math.round(B_(G_(l.angle+R_))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,a.h,c),h=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),d=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function cT(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:s}=e;return!(Dw({x:n,y:i},t)||Dw({x:n,y:s},t)||Dw({x:r,y:i},t)||Dw({x:r,y:s},t))}function uT(e,t,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=t;if(!s_(a)){const n=Yw(t.borderRadius),l=Xw(t.backdropPadding);e.fillStyle=a;const c=i-l.left,u=r-l.top,h=s-i+l.width,d=o-r+l.height;Object.values(n).some((e=>0!==e))?(e.beginPath(),Bw(e,{x:c,y:u,w:h,h:d,radius:n}),e.fill()):e.fillRect(c,u,h,d)}}function hT(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,I_);else{let n=e.getPointPosition(0,t);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=e.getPointPosition(s,t),r.lineTo(n.x,n.y)}}c(iT,"id","logarithmic"),c(iT,"defaults",{ticks:{callback:ww.formatters.logarithmic,major:{enabled:!0}}});class dT extends Xk{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Xw(rT(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=l_(e)&&!isNaN(e)?e:0,this.max=l_(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/rT(this.options))}generateTickLabels(e){Xk.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=d_(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?oT(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}getIndexAngle(e){return G_(e*(I_/(this._pointLabels.length||1))+V_(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(s_(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(s_(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return Zw(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(e)-R_+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),hT(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:i,border:r}=t,s=this._pointLabels.length;let o,a,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const t=e._pointLabelItems[r];if(!t.visible)continue;const s=i.setContext(e.getPointLabelContext(r));uT(n,s,t);const o=$w(s.font),{x:a,y:l,textAlign:c}=t;Vw(n,e._pointLabels[r],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){a=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),o=i.setContext(n),l=r.setContext(n);!function(e,t,n,i,r){const s=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),hT(e,n,o,i),s.closePath(),s.stroke(),s.restore())}(this,o,a,s,l)}})),n.display){for(e.save(),o=s-1;o>=0;o--){const i=n.setContext(this.getPointLabelContext(o)),{color:r,lineWidth:s}=i;s&&r&&(e.lineWidth=s,e.strokeStyle=r,e.setLineDash(i.borderDash),e.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(o,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((i,o)=>{if(0===o&&this.min>=0&&!t.reverse)return;const a=n.setContext(this.getContext(o)),l=$w(a.font);if(r=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){e.font=l.string,s=e.measureText(i.label).width,e.fillStyle=a.backdropColor;const t=Xw(a.backdropPadding);e.fillRect(-s/2-t.left,-r-l.size/2-t.top,s+t.width,l.size+t.height)}Vw(e,i.label,0,-r,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})})),e.restore()}drawTitle(){}}c(dT,"id","radialLinear"),c(dT,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ww.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),c(dT,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),c(dT,"descriptors",{angleLines:{_fallback:"grid"}});const fT={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},pT=Object.keys(fT);function gT(e,t){return e-t}function mT(e,t){if(s_(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:s}=e._parseOpts;let o=t;return"function"===typeof i&&(o=i(o)),l_(o)||(o="string"===typeof i?n.parse(o,i):n.parse(o)),null===o?null:(r&&(o="week"!==r||!z_(s)&&!0!==s?n.startOf(o,r):n.startOf(o,"isoWeek",s)),+o)}function yT(e,t,n,i){const r=pT.length;for(let s=pT.indexOf(e);s<r-1;++s){const e=fT[pT[s]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=i)return pT[s]}return pT[r-1]}function vT(e,t,n){if(n){if(n.length){const{lo:i,hi:r}=$_(n,t);e[n[i]>=t?n[i]:n[r]]=!0}}else e[t]=!0}function bT(e,t,n){const i=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,i){const r=e._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(t[l].major=!0);return t}(e,i,r,n):i}class _T extends xE{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),i=this._adapter=new IS(e.adapters.date);i.init(t),b_(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:mT(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:o}=this.getUserBounds();function a(e){s||isNaN(e.min)||(i=Math.min(i,e.min)),o||isNaN(e.max)||(r=Math.max(r,e.max))}s&&o||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),i=l_(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),r=l_(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}(i,r,this.max);return this._unit=t.unit||(n.autoSkip?yT(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,i,r){for(let s=pT.length-1;s>=pT.indexOf(n);s--){const n=pT[s];if(fT[n].common&&e._adapter.diff(r,i,n)>=t-1)return n}return pT[n?pT.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=pT.indexOf(e)+1,n=pT.length;t<n;++t)if(fT[pT[t]].common)return pT[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&s.reverse(),bT(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),i=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),r=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;i=Y_(i,0,s),r=Y_(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||yT(r.minUnit,t,n,this._getLabelCapacity(t)),o=u_(i.ticks.stepSize,1),a="week"===s&&r.isoWeekday,l=z_(a)||!0===a,c={};let u,h,d=t;if(l&&(d=+e.startOf(d,"isoWeek",a)),d=+e.startOf(d,l?"day":s),e.diff(n,t,s)>1e5*o)throw new Error(t+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+e.add(u,o,s),h++)vT(c,u,f);return u!==n&&"ticks"!==i.bounds&&1!==h||vT(c,u,f),Object.keys(c).sort(gT).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,r=t||n[i];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,i){const r=this.options,s=r.ticks.callback;if(s)return d_(s,[e,t,n],this);const o=r.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],u=l&&o[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,i||(d?u:c))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=V_(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),s=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*r+o*s,h:n*s+o*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,bT(this,[e],this._majorUnit),i),s=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,t=i.length;e<t;++e)n=n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(mT(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return nw(e.sort(gT))}}function wT(e,t,n){let i,r,s,o,a=0,l=e.length-1;n?(t>=e[a].pos&&t<=e[l].pos&&({lo:a,hi:l}=J_(e,"pos",t)),({pos:i,time:s}=e[a]),({pos:r,time:o}=e[l])):(t>=e[a].time&&t<=e[l].time&&({lo:a,hi:l}=J_(e,"time",t)),({time:i,pos:s}=e[a]),({time:r,pos:o}=e[l]));const c=r-i;return c?s+(o-s)*(t-i)/c:s}c(_T,"id","time"),c(_T,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class xT extends _T{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=wT(t,this.min),this._tableRange=wT(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;++s)l=e[s],l>=t&&l<=n&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,o=i.length;s<o;++s)c=i[s+1],a=i[s-1],l=i[s],Math.round((c+a)/2)!==l&&r.push({time:l,pos:s/(o-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(wT(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return wT(this._table,n*this._tableRange+this._minPos,!0)}}c(xT,"id","timeseries"),c(xT,"defaults",_T.defaults);const ST=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],ET="label";function kT(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function TT(e,t){e.labels=t}function CT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ET;const i=[];e.datasets=t.map((t=>{const r=e.datasets.find((e=>e[n]===t[n]));return r&&t.data&&!i.includes(r)?(i.push(r),Object.assign(r,t),r):h({},t)}))}function IT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ET;const n={labels:[],datasets:[]};return TT(n,e.labels),CT(n,e.datasets,t),n}function AT(e,t){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:o,type:a,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:f}=e,p=Ge(e,ST),g=(0,r.useRef)(null),m=(0,r.useRef)(),y=()=>{g.current&&(m.current=new ZE(g.current,{type:a,data:IT(l,o),options:c&&h({},c),plugins:u}),kT(t,m.current))},v=()=>{kT(t,null),m.current&&(m.current.destroy(),m.current=null)};return(0,r.useEffect)((()=>{!s&&m.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(m.current,c)}),[s,c]),(0,r.useEffect)((()=>{!s&&m.current&&TT(m.current.config.data,l.labels)}),[s,l.labels]),(0,r.useEffect)((()=>{!s&&m.current&&l.datasets&&CT(m.current.config.data,l.datasets,o)}),[s,l.datasets]),(0,r.useEffect)((()=>{m.current&&(s?(v(),setTimeout(y)):m.current.update(f))}),[s,c,l.labels,l.datasets,f]),(0,r.useEffect)((()=>{m.current&&(v(),setTimeout(y))}),[a]),(0,r.useEffect)((()=>(y(),()=>v())),[]),r.createElement("canvas",Object.assign({ref:g,role:"img",height:n,width:i},p),d)}const NT=(0,r.forwardRef)(AT);function OT(e,t){return ZE.register(t),(0,r.forwardRef)(((t,n)=>r.createElement(NT,Object.assign({},t,{ref:n,type:e}))))}const RT=OT("line",wS),PT=OT("doughnut",_S);ZE.register(Gk,$k,mk,pk,sk,Ak,qk,Ck);const DT=()=>{const e=He(),{currentUser:t}=ub(),[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)([]),[a,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0),[h,d]=(0,r.useState)(null),[f,p]=(0,r.useState)({labels:[],datasets:[]}),[g,m]=(0,r.useState)({labels:[],datasets:[]}),[y,v]=(0,r.useState)(0),[b,_]=(0,r.useState)("all"),[w,x]=(0,r.useState)("all"),[S,E]=(0,r.useState)([]),[k,T]=(0,r.useState)("all"),[C,I]=(0,r.useState)(!0),[A,N]=(0,r.useState)(!0),O=r.useMemo((()=>[...n].sort(((e,t)=>{const n=e.timestamp?new Date(e.timestamp):new Date(0);return(t.timestamp?new Date(t.timestamp):new Date(0)).getTime()-n.getTime()}))),[n]),R=r.useMemo((()=>Array.from(new Set(O.map((e=>e.course))))),[O]),P=r.useMemo((()=>{let e=[...O];"all"!==b&&(e=e.filter((e=>e.course===b)));const t=new Date;switch(w){case"week":const n=new Date(t.getTime()-6048e5);e=e.filter((e=>!!e.timestamp&&new Date(e.timestamp)>n));break;case"month":const i=new Date(t.getTime()-2592e6);e=e.filter((e=>!!e.timestamp&&new Date(e.timestamp)>i));break;case"year":const r=new Date(t.getTime()-31536e6);e=e.filter((e=>!!e.timestamp&&new Date(e.timestamp)>r))}switch(k){case"1":e=e.slice(0,1);break;case"3":e=e.slice(0,3);break;case"5":e=e.slice(0,5);break;case"10":e=e.slice(0,10)}return C||(e=e.filter((e=>(e.score||0)<50))),A||(e=e.filter((e=>(e.score||0)>=50))),e}),[O,b,w,k,C,A]);(0,r.useEffect)((()=>{(async()=>{if(t)try{u(!0);const e=(await lb.getUserQuizzesWithCourses()).map((e=>e.quiz));i(e);const n=await lv.getUserProfile(t.uid);n&&(o(Object.keys(n.weakTopics||{})),E(n.strongTopics||[]),l(n.lastAnalysis||null)),u(!1)}catch(h){d("Veriler y\xfcklenirken bir hata olu\u015ftu"),u(!1)}})()}),[t]),(0,r.useEffect)((()=>{(()=>{if(P.length>0||s&&s.length>0){const e=P.map((e=>e.timestamp?new Date(e.timestamp).toLocaleDateString("tr-TR"):"Tarih Yok")),t=P.map((e=>e.score||0));p({labels:e,datasets:[{label:"Ba\u015far\u0131 Y\xfczdesi",data:t,borderColor:"rgb(75, 192, 192)",tension:.1}]});const n={};P.forEach((e=>{var t;null===(t=e.questions)||void 0===t||t.forEach((e=>{n[e.topic]=(n[e.topic]||0)+1}))})),m({labels:Object.keys(n),datasets:[{data:Object.values(n),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF"]}]})}})()}),[P,s]),(0,r.useEffect)((()=>{(()=>{if(P.length>0){const e=P.reduce(((e,t)=>e+(t.score||0)),0)/P.length;v(e)}})()}),[P]);const D=r.useMemo((()=>{const e=[];return P.forEach((t=>{var n;null===(n=t.questions)||void 0===n||n.forEach((t=>{if(s.includes(t.topic)){const n=e.find((e=>e.topic===t.topic));n?n.count++:e.push({topic:t.topic,count:1})}}))})),e.sort(((e,t)=>t.count-e.count)).slice(0,5)}),[P,s]),M={responsive:!0,maintainAspectRatio:!1};return c?(0,Un.jsx)("div",{className:"loading",children:"Y\xfckleniyor..."}):h?(0,Un.jsx)("div",{className:"error",children:h}):t?(0,Un.jsxs)("div",{className:"learning-progress",children:[(0,Un.jsx)("section",{className:"filters",children:(0,Un.jsxs)("div",{className:"filter-group",children:[(0,Un.jsxs)("select",{value:b,onChange:e=>_(e.target.value),className:"filter-select",children:[(0,Un.jsx)("option",{value:"all",children:"T\xfcm Dersler"}),R.map((e=>(0,Un.jsx)("option",{value:e,children:e},e)))]}),(0,Un.jsxs)("select",{value:w,onChange:e=>x(e.target.value),className:"filter-select",children:[(0,Un.jsx)("option",{value:"all",children:"T\xfcm Zamanlar"}),(0,Un.jsx)("option",{value:"week",children:"Son 1 Hafta"}),(0,Un.jsx)("option",{value:"month",children:"Son 1 Ay"}),(0,Un.jsx)("option",{value:"year",children:"Son 1 Y\u0131l"})]}),(0,Un.jsxs)("select",{value:k,onChange:e=>T(e.target.value),className:"filter-select",children:[(0,Un.jsx)("option",{value:"all",children:"T\xfcm S\u0131navlar"}),(0,Un.jsx)("option",{value:"1",children:"Son S\u0131nav"}),(0,Un.jsx)("option",{value:"3",children:"Son 3 S\u0131nav"}),(0,Un.jsx)("option",{value:"5",children:"Son 5 S\u0131nav"}),(0,Un.jsx)("option",{value:"10",children:"Son 10 S\u0131nav"})]}),(0,Un.jsx)("button",{className:"filter-button ".concat(C?"active":""),onClick:()=>I(!C),children:"Ba\u015far\u0131l\u0131 S\u0131navlar"}),(0,Un.jsx)("button",{className:"filter-button ".concat(A?"active":""),onClick:()=>N(!A),children:"Ba\u015far\u0131s\u0131z S\u0131navlar"})]})}),(0,Un.jsxs)("section",{className:"overall-progress",children:[(0,Un.jsx)("div",{className:"progress-bar",children:(0,Un.jsx)("div",{className:"progress-bar-fill",style:{width:"".concat(y,"%"),backgroundColor:"hsl(".concat(y,", 70%, 50%)")}})}),(0,Un.jsxs)("div",{className:"progress-label",children:["Genel \u0130lerleme: ",y.toFixed(1),"%"]})]}),(0,Un.jsxs)("section",{className:"statistics",children:[(0,Un.jsx)("h3",{children:"\xd6zet"}),(0,Un.jsxs)("div",{className:"stat-items",children:[(0,Un.jsxs)("div",{className:"stat-item",children:[(0,Un.jsx)("span",{children:"Toplam S\u0131nav"}),(0,Un.jsx)("strong",{children:P.length})]}),(0,Un.jsxs)("div",{className:"stat-item",children:[(0,Un.jsx)("span",{children:"Ortalama Ba\u015far\u0131"}),(0,Un.jsx)("strong",{children:P.length>0?"".concat((P.reduce(((e,t)=>e+(t.score||0)),0)/P.length).toFixed(1),"%"):"0%"})]})]})]}),(0,Un.jsxs)("section",{className:"weak-topics",children:[(0,Un.jsx)("h3",{children:"Geli\u015ftirilmesi Gereken Konular"}),s&&s.length>0?(0,Un.jsx)("ul",{className:"topics-list",children:s.map(((e,t)=>(0,Un.jsxs)("li",{className:"topic-item",children:[(0,Un.jsx)("span",{className:"topic-name",children:e}),(null===a||void 0===a?void 0:a.topicPerformance[e])&&(0,Un.jsxs)("span",{className:"topic-performance",children:[a.topicPerformance[e].percentage.toFixed(1),"%"]})]},t)))}):(0,Un.jsx)("p",{children:"Hen\xfcz eksik konu tespit edilmedi."})]}),(0,Un.jsxs)("section",{className:"strong-topics",children:[(0,Un.jsx)("h3",{children:"Ba\u015far\u0131l\u0131 Konular"}),S&&S.length>0?(0,Un.jsx)("ul",{className:"topics-list",children:S.map(((e,t)=>(0,Un.jsxs)("li",{className:"topic-item",children:[(0,Un.jsx)("span",{className:"topic-name",children:e}),(null===a||void 0===a?void 0:a.topicPerformance[e])&&(0,Un.jsxs)("span",{className:"topic-performance",children:[a.topicPerformance[e].percentage.toFixed(1),"%"]})]},t)))}):(0,Un.jsx)("p",{children:"Hen\xfcz ba\u015far\u0131l\u0131 konu tespit edilmedi."})]}),(0,Un.jsxs)("section",{className:"weak-topics-counters",children:[(0,Un.jsx)("h3",{children:"Zay\u0131f Konular ve Tekrar Say\u0131lar\u0131"}),D.length>0?(0,Un.jsx)("ul",{className:"topic-counter-list",children:D.map(((e,t)=>(0,Un.jsxs)("li",{className:"topic-counter-item ".concat(e.count>=3?"high-count":"low-count"),children:[(0,Un.jsx)("span",{className:"topic-name",children:e.topic}),(0,Un.jsxs)("span",{className:"topic-count",children:[e.count," kez"]})]},t)))}):(0,Un.jsx)("p",{children:"Hen\xfcz zay\u0131f konu tespit edilmedi."})]}),(0,Un.jsxs)("section",{className:"recommendations",children:[(0,Un.jsx)("h3",{children:"Ki\u015fiselle\u015ftirilmi\u015f \xd6neriler"}),(0,Un.jsx)("div",{className:"recommendations-list",children:(()=>{const e=[];return D.forEach((t=>{t.count>=3&&e.push('"'.concat(t.topic,'" konusuna \xf6zel dikkat g\xf6stermelisiniz. Bu konuda ').concat(t.count," kez zorluk ya\u015fad\u0131n\u0131z."))})),y<50&&e.push("Genel ba\u015far\u0131 d\xfczeyinizi art\u0131rmak i\xe7in d\xfczenli \xe7al\u0131\u015fma plan\u0131 olu\u015fturman\u0131z\u0131 \xf6neririz."),e})().map(((e,t)=>(0,Un.jsxs)("div",{className:"recommendation-item",children:[(0,Un.jsx)("span",{className:"recommendation-icon",children:"\ud83d\udca1"}),(0,Un.jsx)("p",{children:e})]},t)))})]}),(0,Un.jsxs)("section",{className:"performance-chart",children:[(0,Un.jsx)("h3",{children:"Performans Geli\u015fimi"}),(0,Un.jsx)("div",{className:"chart-container",children:(0,Un.jsx)(RT,{data:f,options:M})})]}),(0,Un.jsxs)("section",{className:"topic-distribution",children:[(0,Un.jsx)("h3",{children:"Konu Da\u011f\u0131l\u0131m\u0131"}),(0,Un.jsx)("div",{className:"chart-container",children:(0,Un.jsx)(PT,{data:g,options:M})})]}),(0,Un.jsxs)("section",{className:"recent-quizzes",children:[(0,Un.jsx)("h3",{children:"Son S\u0131navlar"}),P.length>0?(0,Un.jsx)("div",{className:"quizzes-list",children:P.map(((e,t)=>(0,Un.jsxs)("div",{className:"quiz-item",children:[(0,Un.jsxs)("div",{className:"quiz-info",children:[(0,Un.jsx)("h4",{children:e.fileName}),(0,Un.jsx)("p",{className:"quiz-date",children:e.timestamp?new Date(e.timestamp).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Tarih bilgisi yok"}),(0,Un.jsx)("p",{className:"quiz-course",children:e.course})]}),(0,Un.jsx)("div",{className:"quiz-score",children:(0,Un.jsxs)("span",{className:"score ".concat((e.score||0)>=70?"good":"needs-improvement"),children:[e.score||0,"%"]})})]},t)))}):(0,Un.jsx)("p",{children:"Se\xe7ilen filtrelere uygun s\u0131nav sonucu bulunmuyor."})]}),(0,Un.jsx)("section",{className:"reset-topics",children:(0,Un.jsx)("button",{className:"reset-topics-button",onClick:async()=>{try{if(!t)throw new Error("Kullan\u0131c\u0131 bilgisi mevcut de\u011fil.");await lb.cleanAllTopics(t.uid),e(On()),o([]),E([]),l(null),alert("T\xfcm konular ba\u015far\u0131yla s\u0131f\u0131rland\u0131.")}catch(h){console.error("Konular s\u0131f\u0131rlan\u0131rken hata olu\u015ftu:",h),alert("Konular s\u0131f\u0131rlan\u0131rken bir hata olu\u015ftu.")}},children:"Konular\u0131 S\u0131f\u0131rla"})})]}):(0,Un.jsx)("div",{className:"error",children:"L\xfctfen giri\u015f yap\u0131n"})},MT=e=>e instanceof Error?e.message:"string"===typeof e?e:"Bilinmeyen bir hata olu\u015ftu";class LT{async uploadFile(e){try{const n=[".pdf",".txt",".doc",".docx"],i="."+e.name.split(".").pop().toLowerCase();if(!n.includes(i))throw new Error("Desteklenmeyen dosya t\xfcr\xfc. L\xfctfen PDF, TXT, DOC veya DOCX dosyas\u0131 y\xfckleyin.");if(e.size>Zv)throw new Error("Dosya boyutu ".concat(10,"MB'dan k\xfc\xe7\xfck olmal\u0131d\u0131r"));const r=new FormData;r.append("file",e),r.append("fileName",e.name);const s=new AbortController,o=setTimeout((()=>s.abort()),3e4);try{const e=await fetch(LT.UPLOAD_URL,{method:"POST",body:r,signal:s.signal});if(clearTimeout(o),!e.ok){const t=await e.json();throw new Error(t.details||t.error||"Dosya y\xfckleme hatas\u0131")}const t=await e.json();if(!t.success||!t.text)throw new Error("PDF i\xe7eri\u011fi al\u0131namad\u0131");return{success:!0,text:t.text}}catch(t){if(t instanceof Error){if("AbortError"===t.name)throw new Error("Dosya y\xfckleme zaman a\u015f\u0131m\u0131na u\u011frad\u0131");throw t}throw new Error("Beklenmeyen bir hata olu\u015ftu")}}catch(t){return{success:!1,error:MT(t)}}}}LT.UPLOAD_URL={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:"0",FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000",REACT_APP_FIREBASE_API_KEY:"AIzaSyC_3HCvaCSsLDvO0IJNmjXNvtNffalUl8Y",REACT_APP_FIREBASE_APP_ID:"1:29159149861:web:5ca6583d1f45efcb6e0acc",REACT_APP_FIREBASE_AUTH_DOMAIN:"my-app-71530.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-CZNHMSMK8P",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"29159149861",REACT_APP_FIREBASE_PROJECT_ID:"my-app-71530",REACT_APP_FIREBASE_STORAGE_BUCKET:"my-app-71530.firebasestorage.app"}.REACT_APP_UPLOAD_URL||"http://localhost:5000/upload";const jT=new LT;new class{constructor(){this.STORAGE_KEY="quizPreferences"}getStoredPreferences(){const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):this.getDefaultPreferences()}savePreferences(e){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}getDefaultPreferences(){return{questionTypes:{multipleChoice:!0},typeCount:{multipleChoice:10},optionCount:4}}updateQuestionType(e,t,n){return h(h({},e),{},{questionTypes:h(h({},e.questionTypes),{},{[t]:n}),typeCount:h(h({},e.typeCount),{},{[t]:n?e.typeCount[t]||5:0})})}updateQuestionCount(e,t,n){const i=Math.min(Math.max(1,n),50);return h(h({},e),{},{typeCount:h(h({},e.typeCount),{},{[t]:i})})}};const FT=()=>{const e=He(),{elapsedTime:t,getFormattedTime:n,startQuiz:i,stopQuiz:s}=qn(),{currentUser:o}=ub(),{questions:a,currentAnswers:l,preferences:c,fileName:u,course:d,showResults:f,showQuiz:p,isGeneratingQuiz:g,prioritizeWeakTopics:m}=Ke((e=>e.quiz)),[y,v]=(0,r.useState)(""),[b,_]=(0,r.useState)(!1),[w,x]=(0,r.useState)(0),[S,E]=(0,r.useState)(null),[k,T]=(0,r.useState)(!1),[C,I]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(o){const{uid:t,email:n,displayName:i}=o;e(Ln({uid:t,email:n,displayName:i})),e(jn(!1))}}),[o,e]),(0,r.useEffect)((()=>{o&&f&&S&&!k&&!C&&(T(!0),(async()=>{try{const e=await lb.quiz.saveQuiz(d,S.questions,S.currentAnswers,u,t,n(),o.uid);if(!e.success)throw new Error(e.error||"S\u0131nav kaydedilirken bir hata olu\u015ftu");x((e=>e+1)),I(!0)}catch(e){console.error("Quiz save error:",e)}finally{T(!1)}})())}),[f,o,S,k,d,u,t,n,C]);const A=async()=>{if(y){e(Cn(!0));try{var t;const n=await lb.quiz.createQuiz(y,h(h({},c),{},{typeCount:{multipleChoice:(null===c||void 0===c||null===(t=c.typeCount)||void 0===t?void 0:t.multipleChoice)||10}}),u,d,m);e(_n(n)),e(Tn(!0)),_(!1),i()}catch(n){}finally{e(Cn(!1))}}};return(0,Un.jsx)(je,{store:zn,children:(0,Un.jsxs)("div",{className:"app",children:[(0,Un.jsx)(mb,{}),g&&(0,Un.jsx)(wb,{}),b&&(0,Un.jsx)("div",{className:"pre-assessment-overlay",children:(0,Un.jsx)(Sb,{onAssessmentComplete:()=>{_(!1),A()}})}),(0,Un.jsxs)(Ee,{children:[(0,Un.jsx)(xe,{path:"/login",element:(0,Un.jsx)(yb,{})}),(0,Un.jsx)(xe,{path:"/register",element:(0,Un.jsx)(vb,{})}),(0,Un.jsx)(xe,{path:"/admin/*",element:(0,Un.jsx)(_b,{children:(0,Un.jsx)(bb,{})})}),(0,Un.jsx)(xe,{path:"/learning-progress",element:(0,Un.jsx)(DT,{})}),(0,Un.jsx)(xe,{path:"/",element:(0,Un.jsxs)("div",{className:"main-content",children:[(0,Un.jsxs)("div",{className:"quiz-setup",children:[(0,Un.jsxs)("div",{className:"file-upload-section",children:[(0,Un.jsx)("input",{type:"file",onChange:async t=>{try{var n;const i=null===(n=t.target.files)||void 0===n?void 0:n[0];if(!i)return;const r=await jT.uploadFile(i);if(!r.success||!r.text)return;e(Sn(i.name)),v(r.text)}catch(i){}},accept:".txt,.doc,.docx,.pdf",className:"file-input"}),u&&(0,Un.jsxs)("p",{className:"file-name",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:["Se\xe7ilen dosya: ",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if(e.length<=t)return e;const n=e.lastIndexOf("."),i=-1!==n?e.slice(n):"";return e.slice(0,t-i.length)+"..."+i}(u)]})]}),(0,Un.jsx)(Vn,{onCreateQuiz:A,isGeneratingQuiz:g,course:d})]}),(0,Un.jsx)(xb,{},w)]})})]}),p&&(0,Un.jsx)(db,{questions:a,currentAnswers:l,onAnswerSelect:(t,n)=>e(wn(h(h({},l),{},{[t]:n}))),onClose:()=>e(Tn(!1)),onShowResults:(t,n)=>{Object.keys(t).length===n.length&&(s(),E({questions:n,currentAnswers:t}),e(kn(!0)),e(Tn(!1)),I(!1))},showResults:f}),f&&S&&(0,Un.jsx)(gb,{formattedTime:n(),questions:S.questions,userAnswers:S.currentAnswers,preferences:c,fileName:u,onRestartQuiz:()=>{e(kn(!1)),e(wn({})),e(_n([])),E(null),_(!0)},course:d})]})})};var zT=n(950),UT=n.t(zT,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(WT){}new Map;const VT=s.startTransition;UT.flushSync,s.useId;function BT(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),_((function(e,t){let{pathname:n,search:i,hash:r}=e.location;return y("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:v(t)}),null,a)));let l=o.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:h}=i||{},d=r.useCallback((e=>{h&&VT?VT((()=>u(e))):u(e)}),[u,h]);return r.useLayoutEffect((()=>l.listen(d)),[l,d]),r.useEffect((()=>_e(i)),[i]),r.createElement(Se,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var HT,qT;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(HT||(HT={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(qT||(qT={}));o.createRoot(document.getElementById("root")).render((0,Un.jsx)(je,{store:zn,children:(0,Un.jsx)(Hn,{children:(0,Un.jsx)(hb,{children:(0,Un.jsx)(BT,{children:(0,Un.jsx)(FT,{})})})})}))})();
//# sourceMappingURL=main.568ffddf.js.map